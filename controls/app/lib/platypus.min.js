var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},plat;!function(a){function b(){}function c(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];if(t(a))return a;var e=q(a);e&&(a=b.shift());var f,h;return A(b,function(b){g(b)&&(f=Object.keys(b),A(f,function(d){if(h=b[d],e){if(v(h))return void c(e,a[d]||(a[d]=[]),h);if(x(h))return void(a[d]=new Date(h.getTime()));if(n(h))return void(a[d]=new RegExp(h));if(j(h))return void(a[d]=h.cloneNode(!0));if(g(h))return void c(e,a[d]||(a[d]={}),h)}a[d]=h}))}),a}function d(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];return c.apply(null,[!0,a].concat(b))}function e(a,b){if(!g(a))return a;if(x(a))return new Date(a.getTime());if(n(a))return new RegExp(a);if(j(a))return a.cloneNode(b);if(f(a))return new a.constructor(a.message);var e={};return v(a)&&(e=[]),q(b)&&b?d(e,a):c(e,a)}function f(a){return"[object Error]"===Object.prototype.toString.call(a)}function g(a){return null!=a&&"object"==typeof a}function h(a){return!!(a&&a.document&&a.setInterval)}function i(a){return!(!a||a.nodeType!==Node.DOCUMENT_NODE)}function j(a){return!(!a||"number"!=typeof a.nodeType)}function k(a){return!(!a||a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)}function l(a){return g(a)&&"[object File]"===a.toString()}function m(a){return"string"==typeof a}function n(a){return"[object RegExp]"===Object.prototype.toString.call(a)}function o(a){return g(a)&&("[object Promise]"===a.toString()||s(a.then))}function p(a){return t(a)?!0:m(a)||v(a)?0===a.length:g(a)?0===Object.keys(a).length:!1}function q(a){return"boolean"==typeof a}function r(a){return"number"==typeof a&&!isNaN(a)}function s(a){return"function"==typeof a}function t(a){return null===a||void 0===a}function u(a){return void 0===a}function v(a){return Td?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)}function w(a){return t(a)||h(a)||s(a)?!1:m(a)||a.length>=0}function x(a){return"[object Date]"===Object.prototype.toString.call(a)}function y(a,b,c){var d=[];return t(a)?d:s(a.filter)?a.filter(b,c):(A(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)}function z(a,b){return y(a,function(a){return!C(b,function(b,c){return a[c]!==b})})}function A(a,b,c){if(t(a)||!g(a)&&!w(a))return a;var d,e,f;if(s(a.forEach))return a.forEach(b,c);if(w(a))for(d=0,f=a.length;f>d;++d)b.call(c,a[d],d,a);else{var h=Object.keys(a);for(f=h.length;h.length>0;)e=h.shift(),b.call(c,a[e],e,a)}return a}function B(a,b,c){var d=[];return t(a)?d:s(a.map)?a.map(b,c):(A(a,function(e,f){d.push(b.call(c,e,f,a))}),d)}function C(a,b,c){if(t(a)||s(a))return!1;var d,e,f,g;if(s(a.some))return a.some(b,c);if(w(a)){for(d=0,f=a.length;f>d;++d)if(g=b.call(c,a[d],d,a),g===!0)return!0}else{var h=Object.keys(a);for(f=h.length;h.length>0;)if(e=h.shift(),g=b.call(c,a[e],e,a),g===!0)return!0}return!1}function D(a,b,c){return E(a,0,b,c)}function E(a,b,c,d){function e(){a.apply(d,c)}var f=setTimeout(e,b);return function(){clearTimeout(f)}}function F(a){function b(){return a+c.join("")}t(a)&&(a="");var c=Ud[a];t(c)&&(c=Ud[a]=["0","/"]);for(var d,e=c.length;e--;){if(d=c[e].charCodeAt(0),57===d)return c[e]="A",b();if(90===d)return c[e]="a",b();if(122!==d)return c[e]=String.fromCharCode(d+1),b();c[e]="0"}return c.unshift("0"),b()}function G(a){return!m(a)||p(a)?a:(a=a.charAt(0).toLowerCase()+a.slice(1),ob=ob||plat.acquire(Fb).camelCaseRegex,a.replace(ob,function(a,b,c,d){return d?c.toUpperCase():c}))}function H(a,b){return t(a)||delete a[b],a}function I(a,b){return t(a)?a:a[b]}function J(a,b){var c=k(b),d=t(b),e=c?b:plat.acquire(xb).createDocumentFragment();d&&(b=e);var f;for(f=s(a.push)?a:Array.prototype.slice.call(a);f.length>0;)e.insertBefore(f.shift(),null);return c||d||b.appendChild(e),b}function K(a){for(var b=Array.prototype.slice.call(a.childNodes);b.length>0;)a.removeChild(b.pop())}function L(a,b){if(s(a.push)||(a=Array.prototype.slice.call(a)),!t(b))return void M(a,b);for(var c;a.length>0;)c=a.pop(),b=c.parentNode,t(b)||b.removeChild(c)}function M(a,b){for(;a.length>0;)b.removeChild(a.pop())}function N(a){var b=plat.acquire(ub),c=plat.acquire(xb),d=Vd.exec(a),e=c.createElement("div");if(t(d))return e=V(e,a),e.removeChild(e.lastChild);a=a.trim();var f=d[1];if(b.pushState&&u(_d[f]))return V(e,a);if("body"===f)return e=V(c.createElement("html"),a),e.removeChild(e.lastChild);var g=ae[f]||ae._default,h=g[0],i=g[1],j=g[2];for(e=V(e,i+a+j);h-->0;)e=e.lastChild;return e}function O(a,b){if(K(a),!p(b)){var c=N(b);return c.childNodes.length>0?J(c.childNodes,a):a.insertBefore(c,null),a}}function P(a,b,c){if(!t(a)&&g(b)){u(c)&&(c=null);var d;if(j(b))return d=b,b=Array.prototype.slice.call(d.childNodes),a.insertBefore(d,c),b;s(b.push)||(b=Array.prototype.slice.call(b));var e=plat.acquire(xb),f=b.length;d=e.createDocumentFragment();for(var h=0;f>h;++h)d.insertBefore(b[h],null);return a.insertBefore(d,c),b}}function Q(a){var b=a.parentNode,c=P(b,a.childNodes,a);return b.removeChild(a),c}function R(a,b){if(t(b))return b;if(a.nodeType===Node.ELEMENT_NODE)for(var c,d=a.attributes,e=d.length,f=0;e>f;++f)c=d[f],b.setAttribute(c.name,c.value);var g=a.parentNode;return P(b,a.childNodes),g.replaceChild(b,a),b}function S(a){var b=plat.acquire(xb),c=b.createDocumentFragment();return p(a)||O(c,a),c}function T(a,b){if(!t(a)){var c,d=a.nextSibling,e=a.parentNode;if(t(b)&&(b=null),!t(e)&&(t(b)||b.parentNode===e))for(;d!==b;)c=d.nextSibling,e.removeChild(d),d=c}}function U(a,b){t(a)||(T(a,b),W(a),W(b))}function V(a,b){var c=plat.acquire(ub);return c.msApp?MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b,a}function W(a){if(!t(a)){var b=a.parentNode;t(b)||a.parentNode.removeChild(a)}}function X(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(Wd);if(u(a.classList)){if(p(c))return void(a.className=b);for(;e.length>0;)d=e.shift(),""!==d&&(a.className+=" "+d)}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.add(d)}}function Y(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(Wd);if(u(a.classList)){if(c===b)return void(a.className="");for(;e.length>0;)d=e.shift(),""!==d&&(a.className=c=c.replace(new RegExp("^"+d+"\\s|\\s"+d+"$|\\s"+d+"|"+d+"\\s","g"),""))}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.remove(d)}}function Z(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(Wd);if(u(a.classList)){var f;if(""===c)a.className=b;else if(c===b)return void(a.className="");for(;e.length>0;)if(d=e.shift(),""!==d){if(f=new RegExp("^"+d+"\\s|\\s"+d+"$|\\s"+d+"|"+d+"\\s","g"),f.test(c)){a.className=c=c.replace(f,"");continue}a.className+=" "+d}}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.toggle(d)}}function $(a,b){var c=(a||{}).className;if(!m(c)||!m(b)||""===b)return!1;var d=b.split(Wd);if(u(a.classList)){if(""===c)return!1;if(c===b)return!0;for(var e;d.length>0;)if(e=d.shift(),""!==e&&!new RegExp("^"+e+"\\s|\\s"+e+"$|\\s"+e+"|"+e+"\\s","g").test(c))return!1;return!0}for(;d.length>0;)if(e=d.shift(),""!==e&&!a.classList.contains(e))return!1;return!0}function _(a){var b,c=v(a);b=ie.Injector.getDependencies(c?a:[a]);for(var d=b.length,e=[],f=0;d>f;++f)e.push(b[f].inject());return c?e:e[0]}function ab(){return je}function bb(a){le.prototype=a||Error.prototype,ke.prototype=new le}function cb(a,b,c){var d;switch(a instanceof Error?bb(Object.getPrototypeOf(a)):le.prototype!==Error.prototype&&bb(),d=new ke(a,""),b){case je.PARSE:d.name="ParsingError";break;case je.BIND:d.name="BindingError";break;case je.COMPILE:d.name="CompilingError";break;case je.NAME:d.name="PlatNameError";break;case je.NAVIGATION:d.name="NavigatingError";break;case je.TEMPLATE:d.name="TemplatingError";break;case je.CONTEXT:d.name="ContextError";break;case je.EVENT:d.name="DispatchEventError";break;case je.INJECTABLE:d.name="InjectableError";break;case je.COMPAT:d.name="CompatibilityError";break;default:d=new le(a)}if(a instanceof Error){var e=Object.getOwnPropertyNames(a),f=e.length;d.message="",d=Object.create(d);for(var g=0;f>g;++g)d[e[g]]=a[e[g]]}var h=_(zb);if(h.dispatch("error",je,d),c)throw d}function db(){return new me}function eb(){return new ne}function fb(){return window}function gb(a){return a.document}function hb(a){return!t(re[a])}function ib(a){return!t(qe[a])}function jb(a){return!t(pe[a])}function kb(a){return!u(se[a])}function lb(a,b,c){return ue.$Parser=a,ue.$ContextManagerStatic=b,ue.$EventManagerStatic=c,ue}function mb(a,b,c,d,e){return xe.$Compat=a,xe.$EventManagerStatic=b,xe.$Document=c,xe.$Compiler=d,xe.$LifecycleEventStatic=e,xe}function nb(a){return a.app}var ob,pb="$AppStatic",qb="$App",rb="$Http",sb="$HttpConfig",tb="$Promise",ub="$Compat",vb="$ControlFactory",wb="$AttributeControlFactory",xb="$Document",yb="$DispatchEventInstance",zb="$ErrorEventStatic",Ab="$EventManagerStatic",Bb="$LifecycleEventStatic",Cb="$NavigationEventStatic",Db="$ExceptionStatic",Eb="$Parser",Fb="$Regex",Gb="$Tokenizer",Hb="$NavigatorInstance",Ib="$RoutingNavigator",Jb="$ContextManagerStatic",Kb="$Compiler",Lb="$CommentManagerFactory",Mb="$ElementManagerFactory",Nb="$NodeManagerStatic",Ob="$TextManagerFactory",Pb="$CacheFactory",Qb="$ManagerCache",Rb="$TemplateCache",Sb="$Animator",Tb="$AttributesInstance",Ub="$BindableTemplatesFactory",Vb="$Dom",Wb="$DomEvents",Xb="$DomEventsConfig",Yb="$DomEventInstance",Zb="$ResourcesFactory",$b="$TemplateControlFactory",_b="$BaseViewControlFactory",ac="$Utils",bc="$Browser",cc="$BrowserConfig",dc="$Router",ec="$UrlUtilsInstance",fc="$Window",gc="$LocalStorage",hc="$SessionStorage",ic="plat-",jc=ic+"bind",kc=ic+"href",lc=ic+"src",mc=ic+"keydown",nc=ic+"keypress",oc=ic+"keyup",pc=ic+"name",qc=ic+"options",rc=ic+"checked",sc=ic+"disabled",tc=ic+"selected",uc=ic+"readonly",vc=ic+"visible",wc=ic+"style",xc=ic+"tap",yc=ic+"blur",zc=ic+"change",Ac=ic+"copy",Bc=ic+"cut",Cc=ic+"paste",Dc=ic+"dbltap",Ec=ic+"focus",Fc=ic+"submit",Gc=ic+"touchstart",Hc=ic+"touchend",Ic=ic+"touchmove",Jc=ic+"touchcancel",Kc=ic+"hold",Lc=ic+"release",Mc=ic+"swipe",Nc=ic+"swipeleft",Oc=ic+"swiperight",Pc=ic+"swipeup",Qc=ic+"swipedown",Rc=ic+"track",Sc=ic+"trackleft",Tc=ic+"trackright",Uc=ic+"trackup",Vc=ic+"trackdown",Wc=ic+"trackend",Xc="a",Yc=ic+"foreach",Zc=ic+"html",$c=ic+"if",_c=ic+"ignore",ad=ic+"select",bd=ic+"template",cd=ic+"routeport",dd=ic+"viewport",ed=ic+"hide",fd=ic+"animating",gd=ic+"animation",hd=ic+"transition",id=ic+"enter",jd=ic+"leave",kd=ic+"fadein",ld=ic+"fadeout",md="$tap",nd="$dbltap",od="$touchstart",pd="$touchend",qd="$touchmove",rd="$touchcancel",sd="$hold",td="$release",ud="$swipe",vd="$swipeleft",wd="$swiperight",xd="$swipeup",yd="$swipedown",zd="$track",Ad="$trackleft",Bd="$trackright",Cd="$trackup",Dd="$trackdown",Ed="$trackend",Fd="{{",Gd="}}",Hd="static",Id="singleton",Jd="instance",Kd="factory",Ld="class",Md="css",Nd="-compiled",Od="-@",Pd=": start node",Qd=": end node",Rd="js",Sd="noop",Td=!!Array.isArray,Ud={},Vd=/<([\w:]+)/,Wd=/\s+/g,Xd=[1,'<select multiple="multiple">',"</select>"],Yd=[1,"<table>","</table>"],Zd=[3,"<table><tbody><tr>","</tr></tbody></table>"],$d=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],_d={thead:Yd,tbody:Yd,tfoot:Yd,colgroup:Yd,caption:Yd,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:Zd,th:Zd},ae=c({},_d,{option:Xd,optgroup:Xd,legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],text:$d,circle:$d,ellipse:$d,line:$d,path:$d,polygon:$d,polyline:$d,rect:$d,_default:[0,"",""]});!function(a){function b(b,c,d,e,f,g){var h=b[c]=new ie.Injector(c,d,e,f);return g===!0&&(fe[c]=h),a}function c(b,c,d){var e=new ie.Injector(b,c,d),f=_(pb);return f.registerApp(e),a}function d(a,c,d){if(!m(a))throw new Error("A Control must be registered with a string name");return a=a.toLowerCase(),b(ce,a,c,d)}function e(a,c,d,e){if(!m(a))throw new Error("A ViewControl must be registered with a string name");a=a.toLowerCase();var f=b(de,a,c,d);if(v(e)){var g=_(dc);g.registerRoutes(a,e)}return f}function f(a,c,d,e){if(m(e)){if(e=e.toLowerCase(),e===Kd||e===Hd||e===Ld)return b(ee,a,c,d,e,!0);if(e!==Id&&e!==Jd)throw new Error("Invalid injectable type "+e+" during injectable registration.")}else e=Id;return b(ee,a,c,d,e,!1)}function g(c,d,e,f){if(m(f)){if(f=f.toLowerCase(),f!==g.CSS&&f!==g.JS)throw new Error('Invalid animationType "'+f+'" during animation registration.')}else f=Md;return b(f===Rd?he:ge,c,d,e,a.injectable.INSTANCE)}a.app=c,a.control=d,a.viewControl=e,a.injectable=f,function(a){a.STATIC=Hd,a.SINGLETON=Id,a.INSTANCE=Jd,a.FACTORY=Kd,a.CLASS=Ld}(a.injectable||(a.injectable={}));var f=a.injectable;a.animation=g,function(a){a.CSS=Md,a.JS=Rd}(a.animation||(a.animation={}));var g=a.animation}(a.register||(a.register={}));var be=a.register,ce={},de={},ee={},fe={},ge={},he={};!function(a){var c=function(){function a(b,c,d,e){"undefined"==typeof e&&(e=null),this.name=b,this.Constructor=c,this.type=e;var f,g=this.__dependencies=a.convertDependencies(d),h=g.indexOf(Sd);if(h>-1){var i=d[h];if(t(i))throw new TypeError("The dependency for "+b+" at index "+h+" is undefined, did you forgot to include a file?");throw new TypeError("Could not resolve dependency "+i.slice(9,i.indexOf("("))+" for "+b+". Are you using a static injectable Type?")}if(f=a.__findCircularReferences(this),m(f))throw new Error("Circular dependency detected from "+b+" to "+f+".");if(b===pb){var j=this.inject();this.__dependencies=g,j.start()}}return a.initialize=function(){for(var a=fe,b=Object.keys(a),c=b.length,d=0;c>d;++d)a[b[d]].inject();fe={}},a.getDependencies=function(b){if(t(b)||p(b))return[];for(var c=[],d=b.length,e=0;d>e;++e)c.push(a.getDependency(b[e]));return c},a.getDependency=function(b){return t(b)||b===Sd?a.__noop():a.isInjector(b)?b:a.__locateInjector(b)},a.convertDependencies=function(b){if(!v(b))return[];for(var c,d,e=[],f=b.length,g=0;f>g;++g)c=b[g],t(c)?e.push("noop"):(d=a.__getInjectorName(c),e.push(d));return e},a.isInjector=function(a){return s(a.inject)&&!u(a.type)&&!u(a.name)&&!u(a.Constructor)},a.__getInjectorName=function(a){if(t(a))return Sd;if(m(a))return a;if(a===window)return fc;if(a===window.document)return xb;for(var b,c,d,e=ee,f=Object.keys(e),g=f.length,h=0;g>h;++h)if(c=f[h],b=e[c],d=b.Constructor,d===a)return c;return Sd},a.__construct=function(a,b){if(t(a)||t(a.prototype))return a;var c=Object.create(a.prototype),d=c.constructor.apply(c,b);return u(d)?c:d},a.__locateInjector=function(b){if(!t(b)){if(m(b))return ee[b]||a.__noop();if(b===window)return ee.$Window;if(b===window.document)return ee.$Document;for(var c,d=ee,e=Object.keys(d),f=e.length,g=0;f>g;++g)if(c=d[e[g]],c.Constructor===b)return c;return a.__wrap(b)}},a.__wrap=function(a){return{inject:function(){return a},name:"wrapped",__dependencies:[],Constructor:a}},a.__noop=function(){return{inject:b,type:Sd,name:Sd,__dependencies:[],Constructor:b}},a.__findCircularReferences=function(b){if(g(b)&&v(b.__dependencies))for(var c,d,e,f=b.name,h=b.__dependencies,i=[{name:f,dependencies:h.slice(0)}],j=a.__locateInjector;i.length>0;){c=i.pop(),h=c.dependencies,e=h.length;for(var k=0;e>k;++k){if(d=h[k],d===f)return c.name;b=j(d),g(b)&&v(b.__dependencies)&&i.push({name:b.name,dependencies:b.__dependencies.slice(0)})}}},a.prototype.inject=function(){for(var b,c,d=[],e=this.type,f=this.__dependencies,g=f.length,h=0;g>h;++h)b=a.getDependency(f[h]),d.push(b.inject());return c=a.__construct(this.Constructor,d),(e===Id||e===Kd||e===Hd||e===Ld)&&this._wrapInjector(c),c},a.prototype._wrapInjector=function(a){var b=this.name;return ee[b]={type:this.type,name:b,__dependencies:this.__dependencies,Constructor:this.Constructor,inject:function(){return a}}},a}();a.Injector=c}(a.dependency||(a.dependency={}));var ie=a.dependency;a.acquire=_;var je=function(){function a(){}return a.warn=function(a,b){cb(a,b,!1)},a.fatal=function(a,b){cb(a,b,!0)},a.PARSE=0,a.COMPILE=1,a.BIND=2,a.NAME=3,a.NAVIGATION=4,a.TEMPLATE=5,a.AJAX=6,a.CONTEXT=7,a.EVENT=8,a.INJECTABLE=9,a.COMPAT=10,a.PROMISE=11,a.ANIMATION=12,a}();a.Exception=je,a.IExceptionStatic=ab,be.injectable(Db,ab,null,Hd);var ke=function(){function a(a,b){this.message=a,this.name=b}return a}(),le=function(){function a(a){this.message=a,this.name="PlatError",this.message=a||""}return a}(),me=function(){function a(){this.$Window=_(fc),this.$Document=_(xb),this.__events={},this.__defineBooleans(),this.__defineMappedEvents(),this.__defineAnimationEvents(),this.__determineCss()}return a.prototype.hasEvent=function(a){var b=this.__events,c=b[a];if(u(c)){var d=this.$Document.createElement("div");c=b[a]="input"===a&&9===this.IE?!1:!u(d["on"+a])}return c},a.prototype.__defineBooleans=function(){var a=this.$Window,b=a.navigator||{},c=(b.userAgent||"").toLowerCase(),d=a.history,e=a.define,f=a.MSApp,h=parseInt((/android (\d+)/.exec(c)||[])[1],10);if(this.isCompatible=s(Object.defineProperty)&&s(this.$Document.querySelector),this.cordova=!t(a.cordova),this.pushState=!(t(d)||t(d.pushState)),this.fileSupported=!(u(a.File)||u(a.FormData)),this.amd=s(e)&&!t(e.amd),this.msApp=g(f)&&s(f.execUnsafeLocalFunction),this.indexedDb=!t(a.indexedDB),this.proto=g({}.__proto__),this.getProto=s(Object.getPrototypeOf),this.setProto=s(Object.setPrototypeOf),this.hasTouchEvents=!u(a.ontouchstart),this.hasPointerEvents=!!b.pointerEnabled,this.hasMsPointerEvents=!!b.msPointerEnabled,r(h))return void(this.ANDROID=h);var i=parseInt((/msie (\d+)/.exec(c)||[])[1],10)||parseInt((/trident\/.*; rv:(\d+)/.exec(c)||[])[1],10);r(i)&&(this.IE=i)},a.prototype.__defineMappedEvents=function(){this.mappedEvents=this.hasPointerEvents?{$touchstart:"pointerdown",$touchend:"pointerup",$touchmove:"pointermove",$touchcancel:"pointercancel"}:this.hasMsPointerEvents?{$touchstart:"MSPointerDown",$touchend:"MSPointerUp",$touchmove:"MSPointerMove",$touchcancel:"MSPointerCancel"}:this.hasTouchEvents?{$touchstart:"touchstart",$touchend:"touchend",$touchmove:"touchmove",$touchcancel:"touchcancel"}:{$touchstart:"mousedown",$touchend:"mouseup",$touchmove:"mousemove",$touchcancel:null}},a.prototype.__defineAnimationEvents=function(){var a,b=this.$Document.documentElement,c=this.$Window.getComputedStyle(b,"");if(u(c.OLink)){var d=Array.prototype.slice.call(c).join("").match(/-(moz|webkit|ms)-/);a=v(d)&&d.length>1?d[1]:""}else a="o";if(this.vendorPrefix={lowerCase:a,css:""===a?"":"-"+a+"-",js:a[0].toUpperCase()+a.slice(1)},"webkit"===a){if(this.animationSupported=!u(b.style.WebkitAnimation),!this.animationSupported)return void(this.animationEvents={$animation:"",$animationStart:"",$animationEnd:"",$transition:"",$transitionStart:"",$transitionEnd:""});this.animationEvents={$animation:"webkitAnimation",$animationStart:"webkitAnimationStart",$animationEnd:"webkitAnimationEnd",$transition:"webkitTransition",$transitionStart:"webkitTransitionStart",$transitionEnd:"webkitTransitionEnd"}}else{if(this.animationSupported=!u(b.style.animation),!this.animationSupported)return void(this.animationEvents={$animation:"",$animationStart:"",$animationEnd:"",$transition:"",$transitionStart:"",$transitionEnd:""});this.animationEvents={$animation:"animation",$animationStart:"animationstart",$animationEnd:"animationend",$transition:"transition",$transitionStart:"transitionstart",$transitionEnd:"transitionend"}}},a.prototype.__determineCss=function(){var a=this.$Document,b=a.head,c=a.createElement("div");c.setAttribute(ed,""),b.insertBefore(c,null);var d=this.$Window.getComputedStyle(c),e=d.display,f=d.visibility;this.platCss="none"===e||"hidden"===f?!0:!1,b.removeChild(c)},a}();a.Compat=me,a.ICompat=db,be.injectable(ub,db);var ne=function(){function a(){}return a.prototype.noop=function(){},a.prototype.extend=function(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];return c.apply(null,[a].concat(b))},a.prototype.deepExtend=function(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];return c.apply(null,[!0,a].concat(b))},a.prototype.clone=function(a,b){return e(a,b)},a.prototype.isObject=function(a){return g(a)},a.prototype.isWindow=function(a){return h(a)},a.prototype.isDocument=function(a){return i(a)},a.prototype.isNode=function(a){return j(a)},a.prototype.isDocumentFragment=function(a){return k(a)},a.prototype.isString=function(a){return m(a)},a.prototype.isRegExp=function(a){return n(a)},a.prototype.isPromise=function(a){return o(a)},a.prototype.isEmpty=function(a){return p(a)},a.prototype.isBoolean=function(a){return q(a)},a.prototype.isNumber=function(a){return r(a)},a.prototype.isFunction=function(a){return s(a)},a.prototype.isNull=function(a){return t(a)},a.prototype.isUndefined=function(a){return u(a)},a.prototype.isArray=function(a){return v(a)},a.prototype.isArrayLike=function(a){return w(a)},a.prototype.isDate=function(a){return x(a)},a.prototype.filter=function(a,b,c){return y(a,b,c)},a.prototype.where=function(a,b){return z(a,b)},a.prototype.forEach=function(a,b,c){return A(a,b,c)},a.prototype.map=function(a,b,c){return B(a,b,c)},a.prototype.pluck=function(a,b){return B(a,function(a){return a[b]})},a.prototype.some=function(a,b,c){return C(a,b,c)},a.prototype.postpone=function(a,b,c){return E(a,0,b,c)},a.prototype.defer=function(a,b,c,d){return E(a,b,c,d)},a.prototype.uniqueId=function(a){return F(a)},a.prototype.camelCase=function(a){return G(a)},a}();a.Utils=ne,a.IUtils=eb,be.injectable(ac,eb),a.Window=fb,be.injectable(fc,fb),a.Document=gb,be.injectable(xb,gb,[fc]),function(a){function b(){return new e}function c(){return new f}function d(){return new g}var e=function(){function a(){this.argumentRegex=/\((.*)\)/,this.aliasRegex=/[^@\.\[\(]+(?=[\.\[\(])/,this.initialUrlRegex=/\/[^\/]*\.(?:html|htm)/,this.protocolRegex=/:\/\//,this.invalidVariableRegex=/[^a-zA-Z0-9@_$]/,this.fileNameRegex=/.*(?:\/|\\)/,this.shiftedKeyRegex=/[A-Z!@#$%^&*()_+}{":?><|~]/,this.markupRegex=new RegExp(Fd+"[\\S\\s]*"+Gd)}return Object.defineProperty(a.prototype,"newLineRegex",{get:function(){return/\r|\n/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"optionalRouteRegex",{get:function(){return/\((.*?)\)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"namedParameterRouteRegex",{get:function(){return/(\(\?)?:\w+/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wildcardRouteRegex",{get:function(){return/\*\w*/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"escapeRouteRegex",{get:function(){return/[\-{}\[\]+?.,\\\^$|#\s]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"camelCaseRegex",{get:function(){return/([\-_\.\s])(\w+?)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"whiteSpaceRegex",{get:function(){return/("[^"]*?"|'[^']*?')|[\s\r\n\t\v]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"quotationRegex",{get:function(){return/'|"/g},enumerable:!0,configurable:!0}),a}();a.Regex=e,a.IRegex=b,be.injectable(Fb,b);var f=function(){function a(){this.__previousChar="",this.__variableRegex=_(Fb).invalidVariableRegex,this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]}return a.prototype.createTokens=function(a){if(t(a))return[];this._input=a;for(var b,c=a.length,d=0,e=!1,f=this._isSpace,g=this._isAlphaNumeric,h=0;c>h;h++)if(b=a[h],!f(b)){if(g(b))h=this.__handleAplhaNumeric(h,b);else if(hb(b))switch(b){case".":h=this.__handlePeriod(h,b);break;case"{":this.__handleLeftBrace(b);break;case"}":this.__handleRightBrace(b);break;case"[":this.__handleLeftBracket(b);break;case"]":this.__handleRightBracket(b);break;case"(":this.__handleLeftParenthesis(b);break;case")":this.__handleRightParenthesis(b);break;case",":this.__handleComma(b);break;case"'":case'"':h=this.__handleStringLiteral(h,b)}else if(jb(b))switch(b){case"?":e=!0,d++,this.__handleQuestion(b);break;case":":d=this.__handleColon(b,d);break;default:h=this.__handleOtherOperator(h,b)}else if(";"===b)return this._throwError("Unexpected semicolon"),[];this.__previousChar=b}if(e&&d>0)return this._throwError("Improper ternary expression"),[];if(this.__objArgCount.length>0)return this._throwError("Improper object literal"),[];this.__popRemainingOperators();var i=this.__outputQueue;return this._resetTokenizer(),i},a.prototype._checkType=function(a,b){return b?this._isNumeric(a):this._isAlphaNumeric(a)},a.prototype._lookAhead=function(a,b,c){for(var d,e=this._input,f=e.length;++b<f&&(d=e[b],this._checkType(d,c));)a+=d;return a},a.prototype._lookAheadForOperatorFn=function(a,b){for(var c,d=a,e=this._input,f=e.length;++b<f&&(c=e[b],d+=c,jb(d));)a=d;return a},a.prototype._lookAheadForDelimiter=function(a,b){for(var c,d="",e=this._input,f=e.length;++b<f&&(c=e[b])!==a;)d+=c;return d},a.prototype._popStackForVal=function(a,b,c){for(var d=this.__outputQueue,e=this.__operatorStack;a.val!==b;)if(d.push(e.shift()),a=e[0],0===e.length)return this._throwError(c)},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetTokenizer=function(){this._input=null,this.__previousChar="",this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]},a.prototype._throwError=function(a){var b=_(Db);b.fatal(a+" in "+this._input,b.PARSE)},a.prototype._isNumeric=function(a){return a>="0"&&"9">=a},a.prototype._isSpace=function(a){return" "===a||"\r"===a||"\n"===a||"	"===a||""===a||"Â "===a},a.prototype._isAlphaNumeric=function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||a>="0"&&"9">=a||"@"===a||"_"===a||"$"===a},a.prototype._isStringValidVariable=function(a){return!this.__variableRegex.test(a)},a.prototype.__handleAplhaNumeric=function(a,b){var c=this._isNumeric(b),d=this._lookAhead(b,a,c);return this.__outputQueue.push(c?{val:Number(d),args:0}:{val:d,args:-1}),a+d.length-1},a.prototype.__handlePeriod=function(a,b){var c,d=this.__outputQueue,e=this.__operatorStack,f=d.length-1,g=this.__previousChar;return 0>f||this._isSpace(g)||!t(pe[g])||"("===g||","===g?(c=this._lookAhead(b,a,!0),a+=c.length-1,d.push({val:parseFloat(c),args:0})):t(d[f])||!r(Number(d[f].val))||this._isValEqual(d[f-1],b)?this._isValEqual(e[0],b)?d.push({val:b,args:0}):e.unshift({val:b,args:0}):(c=this._lookAhead(b,a,!0),a+=c.length-1,d[f].val+=parseFloat(c)),a},a.prototype.__handleLeftBrace=function(a){this.__operatorStack.unshift({val:a,args:0}),this.__objArgCount.push(0),this.__lastColonChar.push(a),this.__lastCommaChar.push(a)},a.prototype.__handleRightBrace=function(){var a=this.__operatorStack,b=a[0],c=this.__objArgCount.pop();return t(b)?this._throwError("Improper object literal"):(this._popStackForVal(b,"{","Improper object literal"),a.shift(),this.__lastColonChar.pop(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"{}",args:c}))},a.prototype.__handleLeftBracket=function(a){var b=this.__previousChar,c=this.__operatorStack;this._isValEqual(c[0],".")&&this.__outputQueue.push(c.shift()),c.unshift({val:a,args:0}),this.__argCount.push({num:0,isArray:!("]"===b||")"===b||this._isAlphaNumeric(b))}),this.__lastCommaChar.push(a)},a.prototype.__handleRightBracket=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();return t(b)||t(c)?this._throwError("Brackets mismatch"):(c.isArray||c.num--,this._popStackForVal(b,"[","Brackets mismatch"),a.shift(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"[]",args:"["===this.__previousChar?-1:c.num+1}))},a.prototype.__handleLeftParenthesis=function(a){var b=this.__previousChar,c=this.__operatorStack;if(this._isAlphaNumeric(b)||"]"===b||")"===b){var d=this.__outputQueue,e=d[d.length-1];this._isValEqual(e,"[]")?(c.unshift(d.pop()),c.unshift(d.pop())):this._isValEqual(e,"()")||this._isNumeric(e.val)||c.unshift(d.pop()),this.__argCount.push({num:0})}c.unshift({val:a,args:0}),this.__lastCommaChar.push(a)},a.prototype.__handleRightParenthesis=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();if(t(b))return this._throwError("Parentheses mismatch");if(this._popStackForVal(b,"(","Parentheses mismatch"),a.shift(),this.__lastCommaChar.pop(),!t(c)){var d=c.num;if("("===this.__previousChar)return void(this.__removeFnFromStack(d)&&this.__outputQueue.push({val:"()",args:0}));this.__removeFnFromStack(d+1)&&this.__outputQueue.push({val:"()",args:d+1})}},a.prototype.__handleComma=function(){var a=this.__lastCommaChar,b=a[a.length-1];if("("===b||"["===b){var c=this.__argCount,d=c.length;if(!(d>0))return this._throwError("Mismatch with "+b);c[d-1].num++}var e=this.__operatorStack[0];return t(e)?this._throwError("Unexpected comma"):void this._popStackForVal(e,b,"Unexpected comma")},a.prototype.__handleStringLiteral=function(a,b){var c=this._lookAheadForDelimiter(b,a),d=this.__operatorStack;return this._isValEqual(d[0],"([")?d.unshift({val:c,args:0}):this.__outputQueue.push({val:c,args:0}),a+c.length+1},a.prototype.__handleQuestion=function(a){this.__lastColonChar.push(a),this.__determinePrecedence(a)},a.prototype.__handleColon=function(a,b){var c=this.__lastColonChar,d=c[c.length-1],e=this.__outputQueue;if("?"===d){var f=this.__operatorStack,g=f[0];if(t(g))return void this._throwError("Ternary mismatch");b--,c.pop(),this._popStackForVal(g,"?","Ternary mismatch"),e.push(f.shift()),f.unshift({val:a,args:0})}else{if("{"!==d)return void this._throwError("Unexpected colon");var h=this.__objArgCount,i=e.length-1;if(h[h.length-1]++,0>i)return void this._throwError("Unexpected colon");e[i].args=1}return b},a.prototype.__handleOtherOperator=function(a,b){var c=this._lookAheadForOperatorFn(b,a);return this.__determinePrecedence(c),a+c.length-1},a.prototype.__popRemainingOperators=function(){for(var a,b,c=this.__outputQueue,d=this.__operatorStack;d.length>0;){if(a=d.shift(),b=a.val,"("===b||")"===b)return this._throwError("Parentheses mismatch");c.push(a)}},a.prototype.__determineOperator=function(a){switch(a){case"+":case"-":if(0===this.__outputQueue.length||jb(this.__previousChar))return pe["u"+a];default:return pe[a]}},a.prototype.__determinePrecedence=function(a){var b,c,d=this.__determineOperator(a),e=d.precedence,f="ltr"===d.associativity,g=this.__operatorStack,h=this.__outputQueue;if(0===g.length)return void g.unshift({val:a,args:d.fn.length-2});do if(c=g[0].val,"."!==c){if(b=pe[c],t(b)||!(b.precedence<e||f&&b.precedence===e))return void g.unshift({val:a,args:d.fn.length-2});h.push(g.shift())}else h.push(g.shift());while(g.length>0);g.unshift({val:a,args:d.fn.length-2})},a.prototype.__removeFnFromStack=function(a){for(var b,c=this.__outputQueue,d=this.__operatorStack,e=d[0],f=this._isValEqual,g=this._isValUnequal,h=!1;!t(e)&&g(e,"([")&&(this._isStringValidVariable(e.val)||f(e.val,".[]")||ib(e.val));)b=d.shift(),-1!==b.args||f(b,".[]")||(b.args=-2),c.push(b),e=d[0],h=!0;return h||g(c[c.length-a-1],"()")||(h=!0),h},a}();a.Tokenizer=f,a.ITokenizer=c,be.injectable(Gb,c);var g=function(){function a(){this.$Tokenizer=_(Gb),this._tokens=[],this.__cache={},this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}}return a.prototype.parse=function(a){var b=this.__cache[a];if(!t(b))return b;this._tokens=this.$Tokenizer.createTokens(a),b=this._evaluate(a);var c=b.identifiers;if(0===c.length){var d=b.evaluate(null);b.evaluate=function(){return d}}return this.__cache[a]=b,b},a.prototype.clearCache=function(a){return m(a)?void H(this.__cache,a):void(this.__cache={})},a.prototype._evaluate=function(a){for(var b,c,d,e=this._tokens,f=e.length,g=this.__tempIdentifiers,h=this.__codeArray,i="",j=!1,k=0;f>k;k++)if(b=e[k],c=b.val,d=b.args,ib(c))switch(c){case"()":j=this.__handleFunction(k,d,j);break;case"{}":h.push(this.__convertObject(d)),g.push(".");break;default:0>d?(h.push("[]"),g.push(".")):d>0?(h.push(this.__convertArrayLiteral(d)),g.push(".")):j=this.__indexIntoObject(k,c,j)}else if(jb(c))switch(c){case"?":this.__handleQuestion();
break;case":":this.__handleColon();break;case"+":case"-":if(1===d){this.__handleOperator("u"+c,d);break}default:if(0===d){i=this.__convertPrimitive(k,c,d),h.push(i);break}this.__handleOperator(c,d)}else i=0>d?this.__convertFunction(k,c,j):this.__convertPrimitive(k,c,d),h.push(i);this._popRemainingIdentifiers(),this._makeIdentifiersUnique();var l={evaluate:new Function("context","aliases","var initialContext;return "+(0===h.length?'"'+a+'"':h.join(""))+";"),expression:a,identifiers:this.__identifiers.slice(0),aliases:Object.keys(this.__aliases)};return this._resetParser(),l},a.prototype.__convertPrimitive=function(a,b,c){if(c>0)return this.__tempIdentifiers.push("."),b;var d=r(Number(b)),e=this._peek(a),f=!(t(e)||e.args>=1),g=this._isValEqual;return kb(b)||m(b)&&(d||this._isValUnequal(e,"[]()")||g(e,"[]")&&!f)?(this.__tempIdentifiers.push("."),'"'+b+'"'):(this.__tempIdentifiers.push(!d||g(e,".[]")&&f?b:"."),b)},a.prototype.__convertFunction=function(a,b,c){if("@"===b[0])this.__aliases[b.slice(1)]=!0;else if(kb(b))return this.__tempIdentifiers.push("."),b;var d=this._peek(a),e=this._isValEqual;if(this.__tempIdentifiers.push(e(this._tokens[a-1],"()")&&e(d,".[]")?".":b),t(d))return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))';switch(d.val){case".":case"()":return b;default:if(!c)return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))'}},a.prototype.__convertObject=function(a){for(var b,c,d,e=this.__identifiers,f=this.__tempIdentifiers,g=this.__codeArray,h=0,i="{";h++<a;)d=g.pop(),b=g.pop(),i+=',"'+b+'":'+d,f.length>1&&(c=f.pop(),f.pop(),"."!==c&&e.push(c));return i.replace(",","")+"}"},a.prototype.__convertArrayLiteral=function(a){for(var b,c=this.__identifiers,d=this.__tempIdentifiers,e=this.__codeArray,f=0,g="";f++<a;)g=e.pop()+","+g,d.length>0&&(b=d.pop(),"."!==b&&c.push(b));return"["+g.slice(0,-1)+"]"},a.prototype.__handleFunction=function(a,b,c){var d,e,f=this.__identifiers,g=this.__tempIdentifiers,h=this.__codeArray,i=0,j=this._lookBack(a),k=!t(j)&&(-2===j.args||this._isValEqual(j,".[]")),l="",m="",n="",o=!1;for(k&&(m=h.pop(),n=g.pop());i++<b;)l=h.pop()+","+l,g.length>0&&(d=g.pop(),"."!==d&&(f.push(d),o=!0));if(e=b>0?".call(initialContext || context,"+l.slice(0,l.length-1)+")":".call(initialContext || context)",c)if(c=!1,h.length>0){var q=h.pop(),r=g.length-1;0>r||"."===g[r]||""===n?""!==n&&o&&"["!==q[0]&&"]"!==q[q.length-1]&&(f[f.length-1]+="."+n):(g[r]+="."+n,f.push(g.pop())),e=p(m)?q+e:"(("+this.__indexIntoContext.toString()+")("+q+',"'+m+'") || (function () {}))'+e}else this._throwError("Improper expression or context");else k?(e="(initialContext = (("+this.__findInitialContext.toString()+')(context,aliases,"'+m+'") || (function () {}))'+e+")",f.push(m)):e=h.pop()+e;h.push(e);var s=g.length;return this._isValEqual(this._peek(a),"[]")&&s>0&&"."!==g[s-1]&&f.push(g.pop()),c},a.prototype.__indexIntoObject=function(a,b,c){var d=this._isValEqual;if(d(this._peek(a),"()"))return!0;var e,f=this.__codeArray,g=f.pop(),h=this.__identifiers,i=this.__tempIdentifiers,j=this._lookBack(a),k=i.pop(),l=!t(k);return l&&"@"===k[0]?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",h.push(k),i.length>0&&h.push(i.pop())):d(j,"++--()[]*/%?:>=<=&&||!===")?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",i.push(".")):"[]"!==b||t(j)||j.args>=0?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+',"'+g+'")',e=i.length-1,e>=0?"."!==i[e]&&(i[e]+="."+k):l&&"."!==k&&"."!==b&&h.push(k)):(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",e=i.length-1,e>=0&&"."!==i[e]&&h.push(i.pop()),h.push(k)),f.push(g),c},a.prototype.__handleQuestion=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+"?"+e)},a.prototype.__handleColon=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+":"+e)},a.prototype.__handleOperator=function(a,b){for(var c,d=this.__identifiers,e=this.__tempIdentifiers,f=this.__codeArray,g=0,h="";g++<b;)h="function (context, aliases) { return "+f.pop()+"; },"+h,e.length>0&&(c=e.pop(),"."!==c&&d.push(c));f.push("("+pe[a].fn.toString()+")(context, aliases,"+h.slice(0,h.length-1)+")")},a.prototype.__findInitialContext=function(a,b,c,d){return"@"===c[0]&&null!==b&&"object"==typeof b?b[c]:null!==a&&"object"==typeof a?a[c]:d},a.prototype.__indexIntoContext=function(a,b,c){return null!==a&&"object"==typeof a?a[b]:c},a.prototype._peek=function(a){return this._tokens[a+1]},a.prototype._lookBack=function(a){return this._tokens[a-1]},a.prototype._popRemainingIdentifiers=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers;c.length>0;)a=c.pop(),"."!==a&&b.push(a)},a.prototype._makeIdentifiersUnique=function(){for(var a,b=this.__identifiers,c=[],d={};b.length>0;)a=b.pop(),d[a]||(d[a]=!0,c.push(a));this.__identifiers=c},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetParser=function(){this._tokens=[],this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}},a.prototype._throwError=function(a){var b=_(Db);b.fatal(a,b.PARSE)},a}();a.Parser=g,a.IParser=d,be.injectable(Eb,d)}(a.expressions||(a.expressions={}));a.expressions;!function(a){function b(){return new f}function c(){return f.config}function d(){return new h}function e(){return new i}var f=function(){function a(){this.$EventManagerStatic=_(Ab),this.$Compat=_(ub),this.$Regex=_(Fb),this.$Window=_(fc),this.$Dom=_(Vb),this.__lastUrl=this.$Window.location.href,this.__initializing=!1;var a=_(Jb);a.defineGetter(this,"uid",F("plat_")),this.$EventManagerStatic.on(this.uid,"beforeLoad",this.initialize,this)}return a.prototype.initialize=function(){var b=a.config,c=this.$Compat;if(this.$EventManagerStatic.dispose(this.uid),b.routingType!==b.NONE){this.__initializing=!0;var d=this.url(),e=d.replace(this.$Regex.initialUrlRegex,"/"),f=this._urlChanged.bind(this),g=this.$Dom,h=this.$Window;p(b.baseUrl)&&_(ec),e!==d&&this.url(e,!0),c.pushState&&(b.routingType===b.STATE&&this.url(b.baseUrl,!0),g.addEventListener(h,"popstate",f,!1)),g.addEventListener(h,"hashchange",f,!1),this.__initializing=!1}},a.prototype.url=function(a,b){var c=this.$Window.location;return m(a)&&this.__lastUrl!==a&&(this.__lastUrl=a,this._setUrl(a,b)),this.__currentUrl||c.href},a.prototype.urlUtils=function(b){b=b||this.url();var c=_(ec),d=a.config;return d.routingType===d.HASH&&(b=b.replace(new RegExp("#"+(d.hashPrefix||"")+"/?"),"")),c.initialize(b),c},a.prototype.isCrossDomain=function(a){if(!m(a))return!1;var b=this.urlUtils(a),c=this.urlUtils();return b.protocol!==c.protocol||b.hostname!==c.hostname||b.port!==c.port},a.prototype._urlChanged=function(){if(!this.__initializing){this.__currentUrl=null;var a=this.url();if(this.__lastUrl!==a){this.__lastUrl=a;var b=this.$EventManagerStatic;b.dispatch("urlChanged",this,b.DIRECT,[this.urlUtils()])}}},a.prototype._setUrl=function(a,b){a=this._formatUrl(a),this.$Compat.pushState?(b?history.replaceState(null,"",a):history.pushState(null,"",a),this.__initializing||this._urlChanged()):(this.__currentUrl=a,b?location.replace(a):location.href=a)},a.prototype._formatUrl=function(b){var c=a.config;if(c.routingType===c.HASH){var d=-1!==b.indexOf(this.urlUtils().protocol),e=c.hashPrefix||"",f=new RegExp("#"+e+"|#/");d&&!f.test(b)?b=b+"#"+e+"/":f.test(b)||(b="#"+e+"/"+b)}return b},a.config={NONE:"none",HASH:"hash",STATE:"state",routingType:"none",hashPrefix:"",baseUrl:""},a}();a.Browser=f,a.IBrowser=b,be.injectable(bc,b),a.IBrowserConfig=c,be.injectable(cc,c);var h=function(){function a(){this.$ContextManagerStatic=_(Jb),this.$Document=_(xb),this.$Window=_(fc),this.$Compat=_(ub),this.$Regex=_(Fb),this.$BrowserConfig=_(cc);var b=this.$BrowserConfig;if(p(b.baseUrl)){var c=this.$Window.location.href,d=c.replace(this.$Regex.initialUrlRegex,"/");b.baseUrl=b.routingType===b.HASH?d.replace(/#.*/,""):a.__getBaseUrl(d)}}return a.__getQuery=function(a){if(!p(a)){for(var b,c=a.split("&"),d={},e=c.length,f=0;e>f;++f)b=c[f].split("="),d[b[0]]=b[1];return d}},a.__getBaseUrl=function(a){var b=a.slice(a.indexOf(":")),c=b.slice(b.search(/\w+/));return a.slice(0,a.indexOf("/",a.indexOf(c)))+"/"},a.prototype.initialize=function(b){b=b||"";var c=a.__urlUtilsElement||(a.__urlUtilsElement=this.$Document.createElement("a")),d=this.$ContextManagerStatic.defineGetter;"/"===b[0]&&(b=b.slice(1)),c.setAttribute("href",b),b=c.href,c.setAttribute("href",b),b=c.href;var e=c.protocol?c.protocol.replace(/:$/,""):"";-1===e.indexOf("http")&&-1===e.indexOf("ms-appx")&&(b=b.replace("//","")),d(this,"href",b,!0,!0),d(this,"protocol",c.protocol?c.protocol.replace(/:$/,""):"",!0,!0),d(this,"host",c.host,!0,!0),d(this,"search",c.search?c.search.replace(/^\?/,""):"",!0,!0),d(this,"hash",c.hash?c.hash.replace(/^#/,""):"",!0,!0),d(this,"hostname",c.hostname,!0,!0),d(this,"port",c.port,!0,!0);var f;f=p(this.$BrowserConfig.baseUrl)?"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname:b.replace(this.$BrowserConfig.baseUrl,"/"),d(this,"pathname",f.split("?")[0],!0,!0),d(this,"query",a.__getQuery(this.search),!0,!0)},a.prototype.toString=function(){return this.href},a}();a.UrlUtils=h,a.IUrlUtilsInstance=d,be.injectable(ec,d,null,Jd);var i=function(){function a(){var a=this;this.$Browser=_(bc),this.$BrowserConfig=_(cc),this.$EventManagerStatic=_(Ab),this.$NavigationEventStatic=_(Cb),this.$Compat=_(ub),this.$Regex=_(Fb),this.$Window=_(fc),this._routes=[],this.__escapeRegex=this.$Regex.escapeRouteRegex,this.__optionalRegex=this.$Regex.optionalRouteRegex,this.__pathSlashRegex=/^\/|\/$/g,this.__firstRoute=!0;var b=_(Jb);b.defineGetter(this,"uid",F("plat_")),this._removeListener=this.$EventManagerStatic.on(this.uid,"urlChanged",function(b,c){D(function(){a._routeChanged(b,c)})},this);var c=this.$BrowserConfig;c.routingType===c.NONE&&(c.routingType=c.HASH,c.hashPrefix=c.hashPrefix||""),this.$Compat.msApp&&(this.__history=[])}return a.prototype.registerRoutes=function(a,b){if(v(b))for(var c=de[a],d=b.length,e=0;d>e;++e)this._registerRoute(b[e],c,a)},a.prototype.route=function(a,b){b=b||{};var c,d,e=b.replace,f=this.$Browser,g=f.urlUtils();if(this.__firstRoute&&(this.__firstRoute=!1,p(a)))return this._routeChanged(null,g),!0;var h=this._buildRoute(a,b.query);if(t(h)){var i=_(Db);return i.warn("Route: "+a+" is not a matched route.",i.NAVIGATION),!1}c=h.route,d=h.match;var j=this.$NavigationEventStatic.dispatch("beforeRouteChange",this,{parameter:d.route,target:d.injector,type:d.type,options:null,cancelable:!0});if(j.cancelled)return!1;var k=f.urlUtils(c);return g.href===k.href&&(e=!0),f.url(c,e),!0},a.prototype.goBack=function(a){this.$Window.history.go(-a);var b=this.__history;v(b)&&b.length>1&&(this.__history=b.slice(0,b.length-a),this.$Browser.url(this.__history.pop()||""))},a.prototype._buildRoute=function(a,b){var c=this._buildQueryString(b);if(m(a)){var d=a+c,e=this.$Browser.urlUtils(d),f=this._match(e);if(!t(f))return{route:d,match:f}}},a.prototype._buildQueryString=function(a){var b=[];if(!g(a))return b.join();for(var c,d=Object.keys(a),e=d.length,f=0;e>f;++f)c=d[f],b.push(c+"="+a[c]);return"?"+b.join("&")},a.prototype._routeChanged=function(a,b){var c=this._match(b);if(t(c)){var d=_(Db);return void d.warn("Could not match route: "+b.pathname,d.NAVIGATION)}this.__history&&this.__history.push(c.route.path),this.$NavigationEventStatic.dispatch("routeChanged",this,{parameter:c.route,target:c.injector,type:c.type,options:null,cancelable:!1})},a.prototype._registerRoute=function(a,b,c){var d,e=n(a);if(e||m(a)){if(e)d={regex:a,type:c,injector:b,args:[]};else{if(p(a))return void(this._defaultRoute={injector:b,type:c});if("/"===a.trim())return void(this._baseRoute={injector:b,type:c});"/"===a[0]&&(a=a.slice(1)),d=this._getRouteParameters(a),d.injector=b,d.type=c}this._routes.push(d)}},a.prototype._getRouteParameters=function(a){var b=this.$Regex,c=b.namedParameterRouteRegex,d=this.__escapeRegex,e=this.__optionalRegex,f=b.wildcardRouteRegex,g=a.match(c),h=f.exec(a),i=[];if(a=a.replace(d,"\\$").replace(e,"(?:$1)?").replace(c,function(a,b){return b?a:"([^/?]+)"}).replace(f,"([^?]*?)"),!t(g))for(var j=g.length,k=0;j>k;++k)i.push(g[k].slice(1));if(!t(h)){var l=h[0].slice(1);p(l)&&(l="wildcard"),i.push(l)}return{regex:new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$"),args:i}},a.prototype._match=function(a){var b,c,d,e,f,g=this._routes,h=this._getUrlFragment(a),i={},j=g.length;if(p(h)){var k=this._baseRoute||this._defaultRoute;if(t(k))return;return{injector:k.injector,type:k.type,route:{path:h,parameters:{},query:a.query}}}for(var l=0;j>l;++l)if(b=g[l],c=b.regex.exec(h),!t(c)){d=b.args,f=d.length,e=c.input,0===f&&(d=Object.keys(c.slice()),c.unshift(""),f=d.length);for(var m=0;f>m;++m)i[d[m]]=c[m+1];return{injector:b.injector,type:b.type,route:{path:e,parameters:i,query:a.query}}}var n=this._defaultRoute;if(!t(n))return{injector:n.injector,type:n.type,route:{path:h,parameters:{},query:a.query}}},a.prototype._getUrlFragment=function(a){return a.pathname.replace(this.__pathSlashRegex,"")},a}();a.Router=i,a.IRouter=e,be.injectable(dc,e)}(a.web||(a.web={}));a.web;!function(a){function d(){return function(){A.nextTick(h)}}function e(){var a=new y(h),b=_(xb),c=_(fc),d=b.createElement("div");return a.observe(d,{attributes:!0}),c.addEventListener("unload",function(){a.disconnect(),a=null},!1),function(){d.setAttribute("drainQueue","drainQueue")}}function f(){var a=a,b="undefined"!=typeof a?a:this;return function(){b.setTimeout(h,1)}}function h(){for(var a,b,c,d=0;d<z.length;d++)a=z[d],b=a[0],c=a[1],b(c);z=[]}function i(a){return!t(a.Promise)&&s(a.Promise.all)&&s(a.Promise.cast)&&s(a.Promise.race)&&s(a.Promise.resolve)&&s(a.Promise.reject)?a.Promise:n}function j(){return new I}function k(){return I.config}var n=function(){function a(b){var c;s(b)||(c=_(Db),c.fatal(new TypeError("You must pass a resolver function as the first argument to the promise constructor"),c.PROMISE)),this instanceof a||(c=_(Db),c.fatal(new TypeError('Failed to construct "Promise": Please use the "new" operator, this object constructor cannot be called as a function.'),c.PROMISE)),this.__subscribers=[],a.__invokeResolveFunction(b,this)}return a.all=function(b){return v(b)?new a(function(a,c){function d(a){return function(b){return e(a,b)}}function e(b,c){g[b]=c,0===--h&&a(g)}var f,g=[],h=b.length;0===h&&a([]);for(var i=0;i<b.length;i++)f=b[i],o(f)?f.then(d(i),c):e(i,f)}):a.all([b])},a.cast=function(b){return g(b)&&b.constructor===a?b:new a(function(a){return a(b)})},a.race=function(b){return v(b)?new a(function(a,c){for(var d,e=0;e<b.length;e++)d=b[e],d&&"function"==typeof d.then?d.then(a,c):a(d)}):a.race([b])},a.resolve=function(b){return new a(function(a){a(b)})},a.reject=function(b){return new a(function(a,c){c(b)})},a.__invokeResolveFunction=function(b,c){function d(b){a.__resolve(c,b)}function e(b){a.__reject(c,b)}try{b(d,e)}catch(f){e(f)}},a.__invokeCallback=function(b,c,d,e){var f,g,h,i,j=s(d);if(j)try{f=d(e),h=!0}catch(k){i=!0,g=k}else f=e,h=!0;a.__handleThenable(c,f)||(j&&h?a.__resolve(c,f):i?a.__reject(c,g):1===b?a.__resolve(c,f):2===b&&a.__reject(c,f))},a.__publish=function(b,c){for(var d,e,f=b.__subscribers,g=b.__detail,h=0;h<f.length;h+=3)d=f[h],e=f[h+c],a.__invokeCallback(c,d,e,g);b.__subscribers=null},a.__publishFulfillment=function(b){a.__publish(b,b.__state=1)},a.__publishRejection=function(b){a.__publish(b,b.__state=2)},a.__reject=function(b,c){b.__state===q.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishRejection,b))},a.__fulfill=function(b,c){b.__state===q.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishFulfillment,b))},a.__resolve=function(b,c){b===c?a.__fulfill(b,c):a.__handleThenable(b,c)||a.__fulfill(b,c)},a.__handleThenable=function(b,c){var d;try{if(b===c){var e=_(Db);e.fatal(new TypeError("A promises callback cannot return the same promise."),e.PROMISE)}if(o(c))return c.then.call(c,function(e){return d?!0:(d=!0,void(c!==e?a.__resolve(b,e):a.__fulfill(b,e)))},function(c){return d?!0:(d=!0,void a.__reject(b,c))}),!0}catch(f){return d?!0:(a.__reject(b,f),!0)}return!1},a.__subscribe=function(a,b,c,d){var e=a.__subscribers,f=e.length;e[f]=b,e[f+1]=c,e[f+2]=d},a.prototype.then=function(b,c){var d=this,e=new this.constructor(function(){},this);if(this.__state){var f=arguments;a.config.async(function(){a.__invokeCallback(d.__state,e,f[d.__state-1],d.__detail)})}else a.__subscribe(this,e,b,c);return e},a.prototype.catch=function(a){return this.then(null,a)},a.prototype.toString=function(){return"[object Promise]"},a.config={async:function(a,b){var c=z.push([a,b]);1===c&&w()}},a}();a.Promise=n;var q;!function(a){a[a.PENDING=void 0]="PENDING",a[a.SEALED=0]="SEALED",a[a.FULFILLED=1]="FULFILLED",a[a.REJECTED=2]="REJECTED"}(q||(q={}));var w,x="undefined"!=typeof window?window:{},y=x.MutationObserver||x.WebKitMutationObserver,z=[],A=A;w="undefined"!=typeof A&&"[object process]"==={}.toString.call(A)?d():y?e():f(),a.IPromise=i,be.injectable(tb,i,[fc],Ld);var B=function(){function a(a){this.$Browser=_(bc),this.$Window=_(fc),this.$Document=_(xb),this.$config=_(sb),this.__fileSupported=_(ub).fileSupported,this.__options=c({},this.$config,a)}return a.prototype.execute=function(){var a=this.__options,b=a.url;if(!m(b)||p(b.trim()))return this._invalidOptions();a.url=this.$Browser.urlUtils(b).toString();var c=a.isCrossDomain||!1,d=!1;return c?d=!0:(this.xhr=new XMLHttpRequest,u(this.xhr.withCredentials)&&(d=this.$Browser.isCrossDomain(b))),d?(this.xhr=null,this.jsonpCallback=a.jsonpCallback||F("plat_callback"),this.executeJsonp()):this._sendXhrRequest()},a.prototype.executeJsonp=function(){var a=this,c=this.__options,d=c.url;return!m(d)||p(d.trim())?this._invalidOptions():(c.url=this.$Browser.urlUtils(d).toString(),t(this.jsonpCallback)&&(this.jsonpCallback=c.jsonpCallback||F("plat_callback")),new G(function(e,f){var g=a.$Window,h=a.$Document,i=h.createElement("script"),j=a.jsonpCallback,k=c.jsonpIdentifier||"callback";i.src=d+"?"+k+"="+j;var l=g[j];g[j]=function(b){s(a.clearTimeout)&&a.clearTimeout(),h.head.removeChild(i),u(l)?H(g,j):g[j]=l,e({response:b,status:200})},h.head.appendChild(i);var m=c.timeout;r(m)&&m>0&&(a.clearTimeout=D(function(){a.clearTimeout=E(function(){f(new C({response:"Request timed out in "+m+"ms for "+d,status:408})),g[j]=b},m-1)}))},{__http:this}))},a.prototype._xhrOnReadyStateChange=function(){var a=this.xhr;if(4===a.readyState){var b=a.status;if(0===b){var c=a.response;if(t(c))try{c=a.responseText}catch(d){}return p(c)?!1:!0}return b>=200&&300>b||304===b?!0:!1}},a.prototype._sendXhrRequest=function(){var a=this,b=this.xhr,c=this.__options,d=c.method,e=c.url;return new G(function(f,h){if(b.onreadystatechange=function(){var b=a._xhrOnReadyStateChange();if(!t(b)){var d=a._formatResponse(c.responseType,b);b?f(d):h(new C(d)),a.xhr=c=null}},!m(d)){var i=_(Db);i.warn('AjaxOptions method was not of type string. Defaulting to "GET".',i.AJAX),d="GET"}b.open(d.toUpperCase(),e,!0,c.user,c.password);var j=c.responseType;a.__fileSupported||""===j||"text"===j||(j=""),b.responseType=j,b.withCredentials=c.withCredentials;var k=c.overrideMimeType,l=c.data;if(m(k)&&!p(k)&&b.overrideMimeType(k),t(l)||""===l)a.__setHeaders(),b.send();else{var n=c.transforms||[],o=n.length,q=c.contentType,s=m(q)&&!p(q);if(o>0){for(var u=0;o>u;++u)l=n[u](l,b);s&&b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)}else if(g(l))if(s){var v=q.toLowerCase();-1!==v.indexOf("x-www-form-urlencoded")?(l=a.__serializeFormData(),b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)):-1!==v.indexOf("multipart/form-data")?a.__fileSupported?(l=a.__appendFormData(),a.__setHeaders(),b.send(l)):a.__submitFramedFormData().then(function(a){f(a)},function(){a.xhr=null}):(l=JSON.stringify(l),b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l))}else a.__setHeaders(),b.send(l);else s&&b.setRequestHeader("Content-Type",q),a.__setHeaders(),b.send(l)}var w=c.timeout;r(w)&&w>0&&(a.clearTimeout=D(function(){a.clearTimeout=E(function(){h(new C({response:"Request timed out in "+w+"ms for "+c.url,status:b.status,getAllResponseHeaders:b.getAllResponseHeaders,xhr:b})),b.onreadystatechange=null,b.abort(),a.xhr=null},w-1)}))},{__http:this})},a.prototype._invalidOptions=function(){return new G(function(a,b){var c=_(Db);c.warn("Attempting a request without specifying a url",c.AJAX),b(new C({response:"Attempting a request without specifying a url",status:null,getAllResponseHeaders:null,xhr:null}))})},a.prototype._formatResponse=function(a,b){var c=this.xhr,d=c.status,e=c.response;if(t(e))try{e=c.responseText}catch(f){}if(0===d&&(d=b?200:404),c.onreadystatechange=null,s(this.clearTimeout)&&this.clearTimeout(),"json"===a&&m(e))try{e=JSON.parse(e)}catch(f){}return{response:e,status:d,getAllResponseHeaders:c.getAllResponseHeaders,xhr:c}},a.prototype.__setHeaders=function(){var a,b,c=this.__options.headers,d=Object.keys(c||{}),e=this.xhr,f=d.length;for(b=0;f>b;++b)a=d[b],e.setRequestHeader(a,c[a])},a.prototype.__serializeFormData=function(){for(var a,b,c=this.__options.data,d=Object.keys(c),e=[];d.length>0;){if(a=d.pop(),b=c[a],t(b))b="";else if(g(b)){var f=_(Db);f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),b=JSON.stringify(b)}e.push(encodeURIComponent(a)+"="+encodeURIComponent(b))}return e.join("&").replace(/%20/g,"+")},a.prototype.__appendFormData=function(){for(var a,b,c=this.__options.data,d=new FormData,e=Object.keys(c);e.length>0;)if(a=e.pop(),b=c[a],t(b))d.append(a,"");else if(g(b))if(l(b))d.append(a,b,b.name||b.fileName||"blob");else{var f=_(Db);f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),d.append(a,JSON.stringify(b))}else d.append(a,b);return d},a.prototype.__submitFramedFormData=function(){var a,b=this,c=this.__options,d=c.data,e=c.url,f=this.$Document,g=f.body,h=_(tb),i=f.createElement("form"),j=f.createElement("iframe"),k=F("iframe_target"),l=Object.keys(d);for(j.name=i.target=k,j.src="javascript:false;",i.enctype=i.encoding="multipart/form-data",i.action=e,i.method="POST",i.style.display="none";l.length>0;)a=l.pop(),i.insertBefore(this.__createInput(a,d[a]),null);return new h(function(a,c){b.xhr.abort=function(){j.onload=null,g.removeChild(i),g.removeChild(j),c()},j.onload=function(){var c=j.contentDocument.body.innerHTML;g.removeChild(i),g.removeChild(j),a({response:c,status:200,getAllResponseHeaders:function(){return""}}),b.xhr=j.onload=null},g.insertBefore(i,null),g.insertBefore(j,null),i.submit()})},a.prototype.__createInput=function(a,b){var c,d=this.$Document,e=d.createElement("input");if(e.type="hidden",e.name=a,t(b))e.value="";else if(g(b))if(!s(b.slice)||u(b.name)||u(b.path))c=_(Db),c.warn('Invalid form entry with key "'+a+'" and value "'+b,c.AJAX),e.value=JSON.stringify(b);else{var f=d.querySelectorAll('input[type="file"][name="'+a+'"]'),h=f.length;if(0===h)c=_(Db),c.warn('Could not find input[type="file"] with [name="'+a+'"]. Stringifying data instead.',c.AJAX),e.value=JSON.stringify(b);else if(1===h){e=f[0];var i=e.cloneNode(!0);e.parentNode.insertBefore(i,e)}else{for(var j,k=b.path;h-->0;)if(j=f[h],j.value===k){e=j;var l=e.cloneNode(!0);e.parentNode.insertBefore(l,e);break}-1===h&&(c=_(Db),c.warn('Could not find input[type="file"] with [name="'+a+'"] and [value="'+b.path+'"]. Stringifying data instead.',c.AJAX),e.value=JSON.stringify(b))}}else e.value=b;return e},a}(),C=function(){function a(a){this.name="AjaxError",Error.apply(this),this.response=this.message=a.response,this.status=a.status,this.getAllResponseHeaders=a.getAllResponseHeaders,this.xhr=a.xhr}return a.prototype.toString=function(){var a=this.response,b=a;return g(a)&&!a.hasOwnProperty("toString")&&(b=JSON.stringify(a)),"Request failed with status: "+this.status+" and response: "+b},a}();C.prototype=Error.prototype;var G=function(a){function c(b,c){a.call(this,b),this.$Window=_(fc),t(c)||(this.__http=c.__http)}return __extends(c,a),c.prototype.cancel=function(){var a=this.__http,c=a.xhr,d=a.jsonpCallback;s(a.clearTimeout)&&a.clearTimeout(),t(c)?t(d)||(this.$Window[d]=b):(c.onreadystatechange=null,c.abort(),a.xhr=null),this.__subscribers=[]},c.prototype.then=function(b,c){return a.prototype.then.call(this,b,c)},c.prototype.catch=function(b){return a.prototype.catch.call(this,b)},c}(n);a.AjaxPromise=G;var I=function(){function a(){this.responseType={DEFAULT:"",ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},this.contentType={ENCODED_FORM:"application/x-www-form-urlencoded;charset=utf-8;",JSON:"application/json;charset=utf-8;",MULTIPART_FORM:"multipart/form-data;",OCTET_STREAM:"application/octet-stream;charset=utf-8;",XML:"application/xml;charset=utf-8;",PLAIN_TEXT:"text/plain;",HTML:"text/html;"}}return a.prototype.ajax=function(a){return new B(a).execute()},a.prototype.jsonp=function(a){return new B(a).executeJsonp()},a.prototype.json=function(a){return new B(c({},a,{responseType:"json"})).execute()},a.config={url:null,method:"GET",responseType:"",transforms:[],headers:{},withCredentials:!1,timeout:null,jsonpIdentifier:"callback",contentType:"application/json;charset=utf-8;"},a}();a.Http=I,a.IHttp=j,be.injectable(rb,j),a.IHttpConfig=k,be.injectable(sb,k)}(a.async||(a.async={}));var oe=a.async;!function(a){function b(){return i}function c(){return l}function d(){return new m}function e(){return new o}function f(){return new p}var g={},h={},i=function(){function a(a,b){this.__id=a,this.__options=b,this.__size=0,t(b)&&(this.__options={timeout:0}),h[a]={}}return a.create=function(b,c){var d=g[b];return t(d)&&(d=g[b]=new a(b,c)),d},a.fetch=function(a){return g[a]},a.clear=function(){for(var a=Object.keys(g),b=a.length,c=0;b>c;++c)g[a[c]].clear();g={}},a.prototype.info=function(){return{id:this.__id,size:this.__size,options:this.__options}},a.prototype.put=function(a,b){var c=h[this.__id][a];h[this.__id][a]=b,u(c)&&this.__size++;var d=this.__options.timeout;return r(d)&&d>0&&E(this.remove,d,[a],this),b},a.prototype.read=function(a){return h[this.__id][a]},a.prototype.remove=function(a){H(h[this.__id],a),this.__size--},a.prototype.clear=function(){h[this.__id]={},this.__size=0},a.prototype.dispose=function(){this.clear(),H(g,this.__id)},a}();a.Cache=i,a.ICacheFactory=b,be.injectable(Pb,b,null,Kd);var l=i.create("__managerCache");a.IManagerCache=c,be.injectable(Qb,c);var m=function(a){function b(){a.call(this,"__templateCache"),this.$Promise=_(tb)}return __extends(b,a),b.prototype.put=function(b,c){var d=this.$Promise;if(a.prototype.put.call(this,b,d.resolve(c)),k(c))c=c.cloneNode(!0);else if(j(c)){var e=document.createDocumentFragment();e.appendChild(c.cloneNode(!0)),c=e}return d.resolve(c)},b.prototype.read=function(b){var c=this,d=a.prototype.read.call(this,b);return t(d)?this.$Promise.reject(null):d.then(function(a){return c.put(b,a)},function(){var a=_(Db);return a.warn("Error retrieving template from promise.",a.TEMPLATE),null})},b}(i);a.TemplateCache=m,a.ITemplateCache=d,be.injectable(Rb,d);var n=function(){function a(){var a=this;A(this.__storage,function(b,c){a[c]=b})}return Object.defineProperty(a.prototype,"length",{get:function(){return this.__storage.length},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this.__storage.clear()},a.prototype.getItem=function(a){return this.__storage.getItem(a)},a.prototype.key=function(a){return this.__storage.key(a)},a.prototype.removeItem=function(a){this.__storage.removeItem(a)},a.prototype.setItem=function(a,b){this.__storage.setItem(a,b),this[a]=this.getItem(a)},a}();a.BaseStorage=n;var o=function(a){function b(){a.apply(this,arguments),this.__storage=_(fc).localStorage}return __extends(b,a),b}(n);a.LocalStorage=o,a.ILocalStorage=e,be.injectable(gc,e);var p=function(a){function b(){a.apply(this,arguments),this.__storage=_(fc).sessionStorage}return __extends(b,a),b}(n);a.SessionStorage=p,a.ISessionStorage=f,be.injectable(hc,f)}(a.storage||(a.storage={}));var pe=(a.storage,{"u+":{precedence:4,associativity:"rtl",fn:function(a,b,c){return+c(a,b)}},"+":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)+d(a,b)}},"u-":{precedence:4,associativity:"rtl",fn:function(a,b,c){return-c(a,b)}},"-":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)-d(a,b)}},"*":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)*d(a,b)}},"/":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)/d(a,b)}},"%":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)%d(a,b)}},"?":{precedence:15,associativity:"rtl",fn:function(){return void 0}},":":{precedence:15,associativity:"rtl",fn:function(){return void 0}},">":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>d(a,b)}},"<":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<d(a,b)}},"!":{precedence:4,associativity:"rtl",fn:function(a,b,c){return!c(a,b)}},"~":{precedence:4,associativity:"rtl",fn:function(a,b,c){return~c(a,b)}},"&":{precedence:10,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&d(a,b)}},"|":{precedence:12,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)|d(a,b)}},">>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>d(a,b)}},"<<":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<<d(a,b)}},">>>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>>d(a,b)}},"&&":{precedence:13,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&&d(a,b)}},"||":{precedence:14,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)||d(a,b)}},"==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)==d(a,b)}},"===":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)===d(a,b)}},"!=":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!=d(a,b)}},"!==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!==d(a,b)}},">=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>=d(a,b)}},"<=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<=d(a,b)}},"=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"++":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"--":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"+=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"-=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"*=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"/=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}},"%=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Db);a.fatal("Assignment operators are not supported",a.PARSE)}}}),qe={"()":{precedence:2,associativity:null,fn:null},"[]":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},"{}":{precedence:1,associativity:null,fn:null}},re={"{":{precedence:1,associativity:null,fn:null},"}":{precedence:1,associativity:null,fn:null},"[":{precedence:2,associativity:null,fn:null},"]":{precedence:2,associativity:null,fn:null},"(":{precedence:2,associativity:null,fn:null},")":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},",":{precedence:18,associativity:null,fn:null},"'":{precedence:0,associativity:null,fn:null},'"':{precedence:0,associativity:null,fn:null}},se={"false":!1,"true":!0,"null":null,undefined:"undefined"};
!function(a){function c(){return f}var d=["push","pop","reverse","shift","sort","splice","unshift"],f=function(){function a(){this.$Compat=_(ub),this.__identifiers={},this.__identifierHash={},this.__lengthListeners={},this.__contextObjects={},this.__isArrayFunction=!1}return a.getManager=function(b){var c,d=a.__managers,e=b.uid,f=d[e];return t(f)?(c=d[e]=new a,c.context=b,c):c=f},a.dispose=function(b,c){if(!t(b)){var d=b.uid,f=a.__controls,g=f[d]||{},h=a.__managers,i=h[d];t(i)||(i.dispose(),H(h,d));for(var j,k=Object.keys(g);k.length>0;)for(j=g[k.shift()];j.length>0;)j.shift()();k=Object.keys(a.observedArrayListeners);for(var l=a.removeArrayListeners,m=k.length,n=0;m>n;++n)l(k[n],d);H(f,d),t(b.context)||a.defineProperty(b,"context",c===!0?e(b.context,!0):null,!0,!0)}},a.removeArrayListeners=function(b,c){var d=a.observedArrayListeners[b];t(d)||H(d,c)},a.getContext=function(a,b){if(t(a))return a;for(b=b.slice(0);b.length>0;)if(a=a[b.shift()],t(a))return a;return a},a.defineProperty=function(a,b,c,d,e){Object.defineProperty(a,b,{value:c,enumerable:d===!0,configurable:e===!0})},a.defineGetter=function(a,b,c,d,e){Object.defineProperty(a,b,{get:function(){return c},enumerable:d===!0,configurable:e===!0})},a.pushRemoveListener=function(b,c,d){var e,f=a.__controls,g=f[c];t(g)&&(g=f[c]={}),e=g[b],t(e)&&(e=g[b]=[]),e.push(d)},a.removeIdentifier=function(b,c){for(var d,e=b.length,f=a.__controls,g=0;e>g;++g)d=f[b[g]],t(d)||H(d,c)},a.createContext=function(a,b){var c=a.context;if(!g(c)){if(!t(c)){var d=_(Db);return void d.warn("A child control is trying to create a child context that has a parent control with a primitive type context",d.BIND)}c=a.context={}}for(var e,f,h=b.split(".");h.length>0;)e=h.shift(),f=c[e],t(f)&&(f=c[e]=r(Number(h[0]))?[]:{}),c=f;return c},a.prototype.getContext=function(a){var b=a.join("."),c=this.__contextObjects[b];return t(c)&&(c=this.__contextObjects[b]=this._getImmediateContext(b)),c},a.prototype.observe=function(c,d){var e=this;if(p(c))return b;var f,h,i=c.split("."),j=i.pop(),k=this._hasIdentifier(c),l=!t(d);if(i.length>0?(f=i.join("."),h=this.__contextObjects[f],t(h)&&(h=this.__contextObjects[f]=this._getImmediateContext(f))):(f=j,h=this.context),!g(h))return l?("length"===j&&(this.__lengthListeners[c]=d,a.pushRemoveListener(c,x,function(){H(e.__lengthListeners,c)})),this._addObservableListener(c,d)):b;this.__observedIdentifier=null,this.__contextObjects[c]=h[j];var n=this.__observedIdentifier,o=!t(n),q=b;if(o&&(k=!0),l){var r=b,s=this._addObservableListener(c,d);o&&c!==n&&(r=this._addObservableListener(n,d)),q=function(){s(),r()}}if(!k)if("length"===j&&v(h)){var u=i.pop(),w=this.getContext(i),x=d.uid;this.__observedIdentifier=null,I(w,u),m(this.__observedIdentifier)&&(f=this.__observedIdentifier);var y=q,z=this.observeArray(x,b,f,h,null),A=this.observe(f,{uid:x,listener:function(a,c){z(),z=e.observeArray(x,b,f,a,c)}});q=function(){y(),A(),z()}}else this._define(c,h,j);return q},a.prototype.observeArray=function(c,e,f,g,h){var i,j,k=d.length,l=this.$Compat,n=l.proto,o=l.setProto;if(v(h))if(o)Object.setPrototypeOf(h,Object.create(Array.prototype));else if(n)h.__proto__=Object.create(Array.prototype);else for(j=0;k>j;++j)i=d[j],h[i]=Array.prototype[i];if(t(g))return b;var p=f.split("."),q=p.pop(),r=this.getContext(p);this.__observedIdentifier=null,I(r,q),m(this.__observedIdentifier)&&(f=this.__observedIdentifier);var s=a.observedArrayListeners[f];t(s)&&(s=a.observedArrayListeners[f]={});var u=s[c];t(u)&&(u=s[c]=[]);var w=function(){u.splice(u.indexOf(e),1)};if(u.push(e),n){var x=Object.create(Array.prototype);for(j=0;k>j;++j)i=d[j],x[i]=this._overwriteArrayFunction(f,i);return o?Object.setPrototypeOf(g,x):g.__proto__=x,w}for(j=0;k>j;++j)i=d[j],a.defineProperty(g,i,this._overwriteArrayFunction(f,i),!1,!0);return w},a.prototype.dispose=function(){this.context=null,this.__identifiers={},this.__identifierHash={},this.__contextObjects={}},a.prototype._getImmediateContext=function(a){t(this.__identifiers[a])&&this.observe(a,null);for(var b=a.split("."),c=this.context;b.length>0&&(c=c[b.shift()],!t(c)););return c},a.prototype._getValues=function(a,b,c){for(var d,e=!0,f=!0;a.length>1;)if(d=a.shift(),e&&(b=b[d],t(b)&&(e=!1)),f&&(c=c[d],t(c)&&(f=!1)),!e&&!f)return null;d=a[0];var g,h;return t(b)||(g=b[d]),t(c)||(h=c[d]),{newValue:g,oldValue:h}},a.prototype._notifyChildProperties=function(a,c,d){var e=this,f=this.__identifierHash[a];if(!t(f)){var h,i,j,k,l,n,o,q,r,s,u=f.length,w={},x=a.length+1;if(0===u)return void H(this.__identifierHash,a);for(var y=0;u>y;++y){if(h=f[y],i=h.slice(x),k=i.split("."),n=k.pop(),j=k.join("."),p(j)){if(o=c,q=d,r=t(o)?void 0:o[n],s=t(q)?void 0:q[n],"length"===n&&!v(q)&&v(o)){var z=this.__lengthListeners[h];if(!t(z)){var A,B=z.uid,C=a.split("."),D=C.pop(),E=this.getContext(C);this.__observedIdentifier=null,I(E,D),A=m(this.__observedIdentifier)?this.__observedIdentifier:C.join(".");var F=this.observeArray(B,b,A,o,null);this.observe(A,{uid:B,listener:function(a,c){F(),F=e.observeArray(B,b,A,a,c)}}),H(this.__lengthListeners,h)}}}else{if(l=w[j],t(l)&&(l=w[j]=this._getValues(k,c,d),t(l))){this._execute(h,null,null);continue}o=l.newValue,q=l.oldValue,r=t(o)?void 0:o[n],s=t(q)?void 0:q[n]}w[i]={newValue:r,oldValue:s},g(o)&&(!v(o)||o.length>n)&&this._define(h,o,n),this._execute(h,r,s)}w=null}},a.prototype._addObservableListener=function(b,c){var d,e=this,f=function(){e._removeCallback(b,c)},h=b.split("."),i=h.pop(),j="length"===i;return j&&(i=h.pop(),d=this.getContext(h)),g(d)&&(this.__observedIdentifier=null,I(d,i),m(this.__observedIdentifier)&&(b=this.__observedIdentifier+(j?".length":""))),this.__add(b,c),a.pushRemoveListener(b,c.uid,f),f},a.prototype._define=function(a,b,c){g(b[c])?this.__defineObject(a,b,c):this.__definePrimitive(a,b,c)},a.prototype._overwriteArrayFunction=function(b,c){var d=a.observedArrayListeners[b],e=this;return function(){for(var a=[],f=0;f<arguments.length-0;f++)a[f]=arguments[f+0];var g,h=this.slice(0),i=-1!==c.indexOf("shift");i?(e.__isArrayFunction=!0,g=Array.prototype[c].apply(this,a),e.__isArrayFunction=!1):g=Array.prototype[c].apply(this,a);for(var j,k,l=Object.keys(d),m=l.length,n=0;m>n;++n){j=d[l[n]],k=j.length;for(var o=0;k>o;++o)j[o]({method:c,returnValue:g,oldArray:h,newArray:this,arguments:a})}return i?e._notifyChildProperties(b,this,h):h.length!==this.length&&e._execute(b+".length",this.length,h.length),g}},a.prototype._removeCallback=function(a,b){var c=this.__identifiers[a];t(c)||(c.splice(c.indexOf(b),1),p(this.__identifiers[a])&&(H(this.__identifierHash,a),H(this.__contextObjects,a)))},a.prototype._hasIdentifier=function(a){return!p(this.__identifiers[a])},a.prototype._execute=function(a,b,c){var d=this.__identifiers[a];if(u(b)?H(this.__contextObjects,a):this.__contextObjects[a]=b,!t(d))for(var e=0;e<d.length;++e)d[e].listener(b,c)},a.prototype.__defineObject=function(a,b,c){var d=this,e=b[c];Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d.__observedIdentifier=a,e},set:function(f){if(e!==f){var h=e;if(e=f,!d.__isArrayFunction){var i=d.__identifierHash[a],j=v(i)?i.length:0;d._execute(a,e,h),j>0&&d._notifyChildProperties(a,e,h),g(e)||d.__definePrimitive(a,b,c)}}}})},a.prototype.__definePrimitive=function(a,b,c){var d=this,e=b[c],f=!t(e);v(b)&&"length"===c||Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d.__observedIdentifier=a,e},set:function(h){if(e!==h){var i=e;if(e=h,!d.__isArrayFunction||!v(b))if(g(e)){var j=d.__identifierHash[a].length;d._execute(a,h,i),d.__defineObject(a,b,c),j>0&&d._notifyChildProperties(a,h,i)}else f?d._execute(a,h,i):(d._execute(a,h,i),d.__definePrimitive(a,b,c),f=!0)}}})},a.prototype.__add=function(a,b){var c=this.__identifiers[a];t(c)&&(c=this.__identifiers[a]=[]),c.push(b),this.__addHashValues(a)},a.prototype.__addHashValues=function(a){var b=a.split("."),c=b.shift(),d=this.__identifierHash[c];if(!t(d)||(d=this.__identifierHash[c]=[],0!==b.length))for(c!==a&&-1===d.indexOf(a)&&d.push(a);b.length>0;)c+="."+b.shift(),d=this.__identifierHash[c],t(d)?(d=this.__identifierHash[c]=[],c!==a&&d.push(a)):c!==a&&-1===d.indexOf(a)&&d.push(a)},a.observedArrayListeners={},a.__managers={},a.__controls={},a}();a.ContextManager=f,a.IContextManagerStatic=c,be.injectable(Jb,c,null,Hd)}(a.observable||(a.observable={}));a.observable;!function(a){function b(){return new g}function c(){return h}function d(a,b,c,d){return i.$Compat=a,i.$Document=b,i.$Window=c,i.$Dom=d,i}function e(a){return j.$EventManagerStatic=a,j}function f(a){return k.$EventManagerStatic=a,k}var g=function(){function a(){this.$EventManagerStatic=_(Ab)}return a.prototype.initialize=function(a,b,c){this.name=a,this.direction=c||this.$EventManagerStatic.DIRECT,this.sender=b},a.prototype.stopPropagation=function(){this.direction===this.$EventManagerStatic.UP&&(this.$EventManagerStatic.propagatingEvents[this.name]=!1)},a}();a.DispatchEvent=g,a.IDispatchEventInstance=b,be.injectable(yb,b,null,Jd);var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,c){var d=new b;d.initialize(a,c),i.sendEvent(d)},b.prototype.initialize=function(b,c){a.prototype.initialize.call(this,b,c,this.$EventManagerStatic.DIRECT)},b}(g);a.LifecycleEvent=h,a.ILifecycleEventStatic=c,be.injectable(Bb,c,null,Hd);var i=function(){function a(){}return a.initialize=function(){if(!a.__initialized){a.__initialized=!0;for(var b,c=a.__lifecycleEventListeners,d=c.length,e=a.$Compat,f=a.$Document,g=a.$Dom,i=h.dispatch;c.length>0;)b=c.pop(),f.removeEventListener(b.name,b.value,!1);if(e.cordova){var j,k=["resume","online","offline"];d=k.length;for(var l=0;l<k.length;++l)j=k[l],c.push({name:j,value:function(b){return function(){i(b,a)}}(j)}),g.addEventListener(f,j,c[l].value,!1);c.push({name:"pause",value:function(){i("suspend",a)}}),g.addEventListener(f,"pause",c[c.length-1].value,!1),c.push({name:"deviceReady",value:function(){i("ready",a)}}),g.addEventListener(f,"deviceReady",c[c.length-1].value,!1),c.push({name:"backbutton",value:function(){i("goBack",a)}}),g.addEventListener(f,"backbutton",c[c.length-1].value,!1)}else{if(e.amd)return;g.addEventListener(a.$Window,"load",function(){i("ready",a)})}}},a.dispose=function(b){H(a.__eventsListeners,b)},a.on=function(b,c,d,e){var f=a.__eventsListeners[b];t(f)&&(f=a.__eventsListeners[b]={listeners:{},context:e});var g=f.listeners[c];t(g)&&(g=f.listeners[c]=[]),g.push(d);var h=g.length-1;return function(){g.splice(h,1)}},a.dispatch=function(b,c,d,e){var f=_(yb);f.initialize(b,c,d),a.sendEvent(f,e)},a.hasDirection=function(b){return b===a.UP||b===a.DOWN||b===a.DIRECT},a.sendEvent=function(b,c){var d=b.name,e=b.direction;switch(c=c||[],a.propagatingEvents[d]=!0,c=c||[],e){case a.UP:a._dispatchUp(b,c);break;case a.DOWN:a._dispatchDown(b,c);break;case a.DIRECT:a._dispatchDirect(b,c)}H(a.propagatingEvents,d)},a._dispatchUp=function(b,c){for(var d=b.name,e=b.sender;!t(e)&&a.propagatingEvents[d];)t(e.uid)||(a.__executeEvent(e.uid,b,c),e=e.parent)},a._dispatchDown=function(b,c){var d,e=[],f=b.name;for(e.push(b.sender);e.length&&a.propagatingEvents[f];)d=e.pop(),t(d.uid)||(a.__executeEvent(d.uid,b,c),t(d.controls)||(e=e.concat(d.controls)))},a._dispatchDirect=function(b,c){for(var d,e=Object.keys(a.__eventsListeners),f=e.length,g=b.name,h=0;f>h&&a.propagatingEvents[g];++h)d=a.__eventsListeners[e[h]],t(d)||t(d.listeners[g])||a.__callListeners(d.context,b,d.listeners[g],c)},a.__executeEvent=function(b,c,d){var e=a.__eventsListeners[b];if(!t(e)){var f=e.context,g=e.listeners[c.name];t(g)||a.__callListeners(f,c,g,d)}},a.__callListeners=function(b,c,d,e){var f=c.name,g=d.length,h=-1;for(e=[c].concat(e);++h<g&&a.propagatingEvents[f];)try{d[h].apply(b,e)}catch(i){var j=_(Db);j.warn(i,j.EVENT)}},a.UP="up",a.DOWN="down",a.DIRECT="direct",a.propagatingEvents={},a.__eventsListeners={},a.__lifecycleEventListeners=[],a.__initialized=!1,a}();a.EventManager=i,a.IEventManagerStatic=d,be.injectable(Ab,d,[ub,xb,fc,Vb],Hd);var j=function(a){function b(){a.apply(this,arguments),this.cancelable=!0,this.cancelled=!1}return __extends(b,a),b.dispatch=function(a,c,d){var e=new b;return e.initialize(a,c,null,d),b.$EventManagerStatic.sendEvent(e,[]),e},b.prototype.initialize=function(b,c,d,e){a.prototype.initialize.call(this,b,c,this.$EventManagerStatic.DIRECT),this.parameter=e.parameter,this.options=e.options,this.target=e.target,this.type=e.type},b.prototype.cancel=function(){this.cancelable&&(this.cancelled=!0,this.$EventManagerStatic.propagatingEvents[this.name]=!1)},b}(g);a.NavigationEvent=j,a.INavigationEventStatic=e,be.injectable(Cb,e,[Ab],Hd);var k=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,c,d){var e=new b;e.initialize(a,c,null,d),b.$EventManagerStatic.sendEvent(e)},b.prototype.initialize=function(b,c,d,e){a.prototype.initialize.call(this,b,c,this.$EventManagerStatic.DIRECT),this.error=e},b}(g);a.ErrorEvent=k,a.IErrorEventStatic=f,be.injectable(zb,f,[Ab],Hd)}(a.events||(a.events={}));var te=a.events,ue=function(){function a(){this.priority=0,this.dom=_(Vb);var b=a.$ContextManagerStatic||_(Jb);b.defineGetter(this,"uid",F("plat_"))}return a.getRootControl=function(a){if(t(a))return a;if(!t(a.root))return a.root;for(;!t(a.parent)&&!a.hasOwnContext;){if(!t(a.root))return a.root;a=a.parent}return a},a.load=function(b){if(!t(b)){var c=b;if(m(c.absoluteContextPath)&&s(c.contextChanged)){var d=a.$ContextManagerStatic.getManager(c.root);d.observe(c.absoluteContextPath,{uid:b.uid,listener:function(a,c){we.TemplateControl.contextChanged(b,a,c)}}),s(c.zCC__plat)&&(c.zCC__plat(),H(c,"zCC__plat"))}s(b.loaded)&&b.loaded()}},a.dispose=function(b){var c=b;if(!t(c)){if(!u(c.templateControl))return void ve.AttributeControl.dispose(c);if(c.hasOwnContext)return void we.ViewControl.dispose(c);if(c.controls)return void we.TemplateControl.dispose(c);a.removeEventListeners(b),a.$ContextManagerStatic.dispose(b),b.dispose(),b.element=null,a.removeParent(b)}},a.removeParent=function(a){if(!t(a)){var b=a.parent;if(!t(b)){var c=b.controls||[],d=c.indexOf(a);-1!==d&&c.splice(d,1),a.parent=null}}},a.removeEventListeners=function(b){if(!t(b)){var c=a.__eventListeners,d=b.uid,e=c[d];if(v(e)){for(var f=e.length;f-->0;)e[f]();H(c,d)}}},a.getInstance=function(){return new a},a.__addRemoveListener=function(b,c){var d=a.__eventListeners;return v(d[b])?void d[b].push(c):void(d[b]=[c])},a.__spliceRemoveListener=function(b,c){var d=a.__eventListeners,e=d[b];if(v(e)){var f=e.indexOf(c);if(-1===f)return;e.splice(f,1)}},a.__getControls=function(b,c,d){var e,f=[],g=a.getRootControl(b);t(g)||g[c]!==d||f.push(g);var h=g.controls;if(t(h))return f;var i=[];for(i=i.concat(h);i.length>0;)e=i.shift(),e[c]===d&&f.push(e),t(e.controls)||(i=i.concat(e.controls));return f},a.prototype.initialize=function(){},a.prototype.loaded=function(){},a.prototype.getControlsByName=function(b){return a.__getControls(this,"name",b)},a.prototype.getControlsByType=function(b){return m(b)?a.__getControls(this,"type",b):a.__getControls(this,"constructor",b)},a.prototype.addEventListener=function(c,d,e,f){if(!s(e)){var g=_(Db);return g.warn('"Control.addEventListener" must take a function as the third argument.',g.EVENT),b}e=e.bind(this);var h=this.dom.addEventListener(c,d,e,f),i=this.uid;return a.__addRemoveListener(i,h),function(){h(),a.__spliceRemoveListener(i,h)}},a.prototype.observe=function(c,d,e){if(t(c)||!c.hasOwnProperty(d))return b;var f=s(this.getAbsoluteIdentifier)?this:this.parent;if(t(f)||!s(f.getAbsoluteIdentifier))return b;var g=f.getAbsoluteIdentifier(c);if(t(g))return b;var h=a.$ContextManagerStatic.getManager(a.getRootControl(this));return h.observe(g+"."+d,{listener:e.bind(this),uid:this.uid})},a.prototype.observeArray=function(c,d,e){if(t(c)||!c.hasOwnProperty(d))return b;var f=c[d],g=e.bind(this);if(!v(f))return b;var h=s(this.getAbsoluteIdentifier)?this:this.parent;if(t(h)||!s(h.getAbsoluteIdentifier))return b;var i=h.getAbsoluteIdentifier(c),j=a.$ContextManagerStatic;if(t(i)){if("context"!==d)return b;i=h.absoluteContextPath}else i+="."+d;var k=j.getManager(a.getRootControl(this)),l=this.uid,m=k.observe(i,{listener:function(a,b){n(),n=k.observeArray(l,g,i,a,b)},uid:l}),n=k.observeArray(l,g,i,f,null);return function(){j.removeArrayListeners(i,l),n(),m()}},a.prototype.observeExpression=function(c,d){var e=this;if(t(c))return b;if(!m(c)&&!s(c.evaluate))return b;var f,g,h=m(c)?a.$Parser.parse(c):c,i=h.aliases,j=t(this.resources)?this.parent:this,k=i.length,l={},n=a.$ContextManagerStatic,o=n.getManager,p=we.TemplateControl,q=p.findResource,r=p.evaluateExpression;if(t(j)||!m(j.absoluteContextPath))return b;for(g=0;k>g;++g){f=i[g];var u=q(j,f);t(u)||"observable"!==u.resource.type||(l[f]=o(u.control))}var v,w=h.identifiers,x=o(a.getRootControl(j)),y=[],z=j.absoluteContextPath+".",A={};for(k=w.length,g=0;k>g;++g){if(v=w[g],y=v.split("."),0===v.indexOf("this"))v=v.slice(5);else if("@"===v[0]){f=y[0].slice(1),v=v.replace("@"+f,"resources."+f+".value"),t(l[f])||(A[v]=l[f]);continue}A[z+v]=x}w=Object.keys(A),k=w.length;var B=r(h,j),C=[],D=this.uid;for(g=0;k>g;++g)v=w[g],C.push(A[v].observe(v,{uid:D,listener:function(){var a=r(h,j);d.call(e,a,B),B=a}}));return function(){for(var a=C.length,b=0;a>b;++b)C[b]()}},a.prototype.evaluateExpression=function(a,b){var c=we.TemplateControl;return c.evaluateExpression(a,this.parent,b)},a.prototype.dispatchEvent=function(b,c){for(var d=[],e=0;e<arguments.length-2;e++)d[e]=arguments[e+2];var f=a.$EventManagerStatic;f.hasDirection(c)||(u(c)||d.unshift(c),c=f.UP);var g=this;t(g.templateControl)||(g=g.templateControl),f.dispatch(b,g,c,d)},a.prototype.on=function(b,c){var d=a.$EventManagerStatic;return d.on(this.uid,b,c,this)},a.prototype.dispose=function(){},a.__eventListeners={},a}();a.Control=ue,a.IControlFactory=lb,be.injectable(vb,lb,[Eb,Jb,Ab],Kd),function(a){function c(){return d}var d=function(a){function b(){a.apply(this,arguments),this.templateControl=null}return __extends(b,a),b.dispose=function(a){H(a,"templateControl"),ue.dispose(a)},b.getInstance=function(){return new b},b}(ue);a.AttributeControl=d,a.IAttributeControlFactory=c,be.injectable(wb,c,null,Kd);var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.initialize=function(){var a=G(this.type),b=this.attributes[a];p(b)||this._isPrecompiled()||(this._label=b,this._define(b))},b.prototype.dispose=function(){for(var a=this._label,b=this.parent;!u(a)&&g(b);)g(b[a])&&j(b[a].element)&&b[a].element===this.element&&H(b,a),b=b.parent},b.prototype._define=function(a){var b=this.templateControl;t(b)||(b.name=a);for(var c=this.parent,d={element:this.element,control:b};g(c);){var e=c[a];g(e)||(c[a]=d),c=c.parent}},b.prototype._isPrecompiled=function(){for(var a=this.parent;!t(a);){if(-1!==a.type.indexOf(Nd))return!0;a=a.parent}return!1},b}(d);a.Name=e,be.control(pc,e);var f=function(a){function c(){a.apply(this,arguments),this.$Parser=_(Eb),this.$Regex=_(Fb),this._expression=[],this._aliases=[]}return __extends(c,a),c.prototype.loaded=function(){t(this.element)||(this.attribute=G(this.type),this._setListener())},c.prototype._setListener=function(){var a=this.attribute;p(this.event)||p(a)||(this._parseArgs(this.attributes[a]),t(this._expression)||this.addEventListener(this.element,this.event,this._onEvent,!1))},c.prototype._findListener=function(a){for(var b,c=this,d=this.$Parser.parse(a);!t(c);){if(b=d.evaluate(c),!t(b))return{control:c,value:b};c=c.parent}return{control:null,value:null}},c.prototype._buildExpression=function(){var a,c,d,e=this._expression.slice(0),f=!t(this.parent),g=f?this.parent.getResources(this._aliases):null,h=e.shift();if("@"!==h[0]){if(a=this._findListener(h),t(a))return{fn:b,control:{},args:[]};d=a.value,c=a.control}else d=g[h],c=null;for(var i=e.length,j=[],k=this.$Parser,l=0;i>l;++l)j.push(k.parse(e[l]).evaluate(f?this.parent.context:null,g));return{fn:d,control:c,args:j}},c.prototype._onEvent=function(a){var b=this._buildExpression(),c=b.fn,d=b.control,e=b.args;if(!s(c)){var f=_(Db);return void f.warn("Cannot find registered event method "+this._expression[0]+" for control: "+this.type,f.BIND)}c.apply(d,e.concat(a))},c.prototype._findAliases=function(a){for(var b,c,d=a.length,e={},f=this.$Regex,g=0;d>g;++g)b=a[g].trim(),"@"===b[0]&&(c=f.aliasRegex.exec(b),e[t(c)?b.slice(1):c[0]]=!0);return Object.keys(e)},c.prototype._parseArgs=function(a){var b=this.$Regex.argumentRegex.exec(a),c=!t(b);p(a)||(c?this._expression=[a.slice(0,b.index)].concat(""!==b[1]?b[1].split(","):[]):this._expression.push(a),this._aliases=this._findAliases(this._expression))},c}(d);a.SimpleEventControl=f;var h=function(a){function b(){a.apply(this,arguments),this.event=md}return __extends(b,a),b}(f);a.Tap=h;var i=function(a){function b(){a.apply(this,arguments),this.event="blur"}return __extends(b,a),b}(f);a.Blur=i;var k=function(a){function b(){a.apply(this,arguments),this.event="change"}return __extends(b,a),b}(f);a.Change=k;var l=function(a){function b(){a.apply(this,arguments),this.event="copy"}return __extends(b,a),b}(f);a.Copy=l;var n=function(a){function b(){a.apply(this,arguments),this.event="cut"}return __extends(b,a),b}(f);a.Cut=n;var w=function(a){function b(){a.apply(this,arguments),this.event="paste"}return __extends(b,a),b}(f);a.Paste=w;var x=function(a){function b(){a.apply(this,arguments),this.event=nd}return __extends(b,a),b}(f);a.DblTap=x;var y=function(a){function b(){a.apply(this,arguments),this.event="focus"}return __extends(b,a),b}(f);a.Focus=y;var z=function(a){function b(){a.apply(this,arguments),this.event=od}return __extends(b,a),b}(f);a.TouchStart=z;var A=function(a){function b(){a.apply(this,arguments),this.event=pd}return __extends(b,a),b}(f);a.TouchEnd=A;var B=function(a){function b(){a.apply(this,arguments),this.event=qd}return __extends(b,a),b}(f);a.TouchMove=B;var C=function(a){function b(){a.apply(this,arguments),this.event=rd}return __extends(b,a),b}(f);a.TouchCancel=C;var E=function(a){function b(){a.apply(this,arguments),this.event=sd}return __extends(b,a),b}(f);a.Hold=E;var F=function(a){function b(){a.apply(this,arguments),this.event=td}return __extends(b,a),b}(f);a.Release=F;var I=function(a){function b(){a.apply(this,arguments),this.event=ud}return __extends(b,a),b}(f);a.Swipe=I;var J=function(a){function b(){a.apply(this,arguments),this.event=vd}return __extends(b,a),b}(f);a.SwipeLeft=J;var K=function(a){function b(){a.apply(this,arguments),this.event=wd}return __extends(b,a),b}(f);a.SwipeRight=K;var L=function(a){function b(){a.apply(this,arguments),this.event=xd}return __extends(b,a),b}(f);a.SwipeUp=L;var M=function(a){function b(){a.apply(this,arguments),this.event=yd}return __extends(b,a),b}(f);a.SwipeDown=M;var N=function(a){function b(){a.apply(this,arguments),this.event=zd}return __extends(b,a),b}(f);a.Track=N;var O=function(a){function b(){a.apply(this,arguments),this.event=Ad}return __extends(b,a),b}(f);a.TrackLeft=O;var P=function(a){function b(){a.apply(this,arguments),this.event=Bd}return __extends(b,a),b}(f);a.TrackRight=P;var Q=function(a){function b(){a.apply(this,arguments),this.event=Cd}return __extends(b,a),b}(f);a.TrackUp=Q;var R=function(a){function b(){a.apply(this,arguments),this.event=Dd}return __extends(b,a),b}(f);a.TrackDown=R;var S=function(a){function b(){a.apply(this,arguments),this.event=Ed}return __extends(b,a),b}(f);a.TrackEnd=S;var T=function(a){function b(){a.apply(this,arguments),this.event="submit"}return __extends(b,a),b.prototype._onEvent=function(b){this.element.hasAttribute("action")||b.preventDefault(),a.prototype._onEvent.call(this,b)},b}(f);a.Submit=T,be.control(xc,h),be.control(yc,i),be.control(zc,k),be.control(Ac,l),be.control(Bc,n),be.control(Cc,w),be.control(Dc,x),be.control(Ec,y),be.control(Fc,T),be.control(Gc,z),be.control(Hc,A),be.control(Ic,B),be.control(Jc,C),be.control(Kc,E),be.control(Lc,F),be.control(Mc,I),be.control(Nc,J),be.control(Oc,K),be.control(Pc,L),be.control(Qc,M),be.control(Rc,N),be.control(Sc,O),be.control(Tc,P),be.control(Uc,Q),be.control(Vc,R),be.control(Wc,S),a.KeyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,"left arrow":37,up:38,"up arrow":38,right:39,"right arrow":39,down:40,"down arrow":40,insert:45,"delete":46,0:48,zero:48,")":48,"right parenthesis":48,1:49,one:49,"!":49,exclamation:49,"exclamation point":49,2:50,two:50,"@":50,at:50,3:51,three:51,"#":51,"number sign":51,hash:51,pound:51,4:52,four:52,$:52,dollar:52,"dollar sign":52,5:53,five:53,"%":53,percent:53,"percent sign":53,6:54,six:54,"^":54,caret:54,7:55,seven:55,"&":55,ampersand:55,8:56,eight:56,"*":56,asterisk:56,9:57,nine:57,"(":57,"left parenthesis":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,lwk:91,"left window key":91,rwk:92,"right window key":92,select:93,"select key":93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"scroll lock":145,";":186,"semi-colon":186,":":186,colon:186,"=":187,equal:187,"equal sign":187,"+":187,plus:187,",":188,comma:188,"<":188,lt:188,"less than":188,"left angle bracket":188,"-":189,dash:189,_:189,underscore:189,".":190,period:190,">":190,gt:190,"greater than":190,"right angle bracket":190,"/":191,"forward slash":191,"?":191,"question mark":191,"`":192,"grave accent":192,"~":192,tilde:192,"[":219,"open bracket":219,"{":219,"open brace":219,"\\":220,"back slash":220,"|":220,pipe:220,"]":221,"close bracket":221,"}":221,"close brace":221,"'":222,"single quote":222,'"':222,"double quote":222};var U=function(b){function c(){b.apply(this,arguments),this.$Regex=plat.acquire(Fb)}return __extends(c,b),c.prototype._setListener=function(){var a=this.attribute;if(!p(this.event)&&!p(a)){var c=this.attributes[a].trim();if("{"===c[0]){var d=this.evaluateExpression(c)||{method:"",key:null},e=d.key,f=d.keys;return this._parseArgs(d.method),t(e)&&t(f)?(this.attributes[a]=d.method,this._setKeyCodes(),void b.prototype._setListener.call(this)):(f=v(f)?f:[e],this._setKeyCodes(f),void this.addEventListener(this.element,this.event,this._onEvent,!1))}this._setKeyCodes(),b.prototype._setListener.call(this)}},c.prototype._onEvent=function(a){var c,d=this.keyCodes;p(d)?b.prototype._onEvent.call(this,a):u(d[a.keyCode])||(c=d[a.keyCode],(!c.shifted||a.shiftKey)&&b.prototype._onEvent.call(this,a))},c.prototype._setKeyCodes=function(b){v(b)||(b=[]);var c,d,e=b.length,f=this.keyCodes,h=this.$Regex.shiftedKeyRegex;g(f)||(f=this.keyCodes={});for(var i=0;e>i;++i)c=b[i],d=r(c)?c:a.KeyCodes[c.toLowerCase()],f[d]={shifted:h.test(c)}},c}(f);a.KeyCodeEventControl=U;var V=function(a){function b(){a.apply(this,arguments),this.event="keydown"}return __extends(b,a),b}(U);a.KeyDown=V;var W=function(a){function b(){a.apply(this,arguments),this.event="keydown"}return __extends(b,a),b.prototype._onEvent=function(b){var c=b.keyCode;(c>=48&&90>=c||c>=186||c>=96&&111>=c)&&a.prototype._onEvent.call(this,b)},b}(U);a.KeyPress=W;var X=function(a){function b(){a.apply(this,arguments),this.event="keyup"}return __extends(b,a),b}(U);a.KeyUp=X,be.control(mc,V),be.control(nc,W),be.control(oc,X);var Y=function(a){function b(){a.apply(this,arguments),this.property=""}return __extends(b,a),b.prototype.loaded=function(){t(this.element)||(this.attribute=G(this.type),this.setter(),this.__removeListener=this.attributes.observe(this.attribute,this.setter))},b.prototype.contextChanged=function(){t(this.element)||this.setter()},b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null)},b.prototype.setter=function(){var a=this,b=this.attributes[this.attribute];D(function(){if(j(a.element))switch(b){case"false":case"0":case"null":case"":a.element.setAttribute(a.property,""),a.element[a.property]=!1,a.element.removeAttribute(a.property);break;default:a.element.setAttribute(a.property,a.property),a.element[a.property]=!0}})},b}(d);a.SetAttributeControl=Y;var Z=function(a){function b(){a.apply(this,arguments),this.property="checked"}return __extends(b,a),b}(Y);a.Checked=Z;var $=function(a){function b(){a.apply(this,arguments),this.property="disabled"}return __extends(b,a),b}(Y);a.Disabled=$;var ab=function(a){function b(){a.apply(this,arguments),this.property="selected"}return __extends(b,a),b}(Y);a.Selected=ab;var bb=function(a){function b(){a.apply(this,arguments),this.property="readonly"}return __extends(b,a),b}(Y);a.ReadOnly=bb;var cb=function(a){function b(){a.apply(this,arguments),this.property=ed}return __extends(b,a),b.prototype.initialize=function(){this.__hide()},b.prototype.setter=function(){var a=this,b=this.attributes[this.attribute];D(function(){if(j(a.element))switch(b){case"false":case"0":case"null":case"":a.__hide();break;default:a.__show()}})},b.prototype.__hide=function(){this.element.hasAttribute(this.property)||this.element.setAttribute(this.property,"")},b.prototype.__show=function(){this.element.hasAttribute(this.property)&&this.element.removeAttribute(this.property)},b}(Y);a.Visible=cb;var db=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setter=function(){var a=this.attributes[this.attribute];if(!p(a))for(var b,c,d,e=a.split(";"),f=this.element.style,g=e.length,h=0;g>h;++h)b=e[h].split(":"),2===b.length&&(c=G(b[0].trim()),d=b[1].trim(),u(f[c])||(f[c]=d))},b}(Y);a.Style=db,be.control(rc,Z),be.control(sc,$),be.control(tc,ab),be.control(uc,bb),be.control(vc,cb),be.control(wc,db);var eb=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setter=function(){var a=this.element,b=this.property,c=this.attributes[this.attribute];p(c)||t(a)||u(a[b])||(a[b]=c)},b}(Y);a.ElementPropertyControl=eb;var fb=function(a){function b(){a.apply(this,arguments),this.property="href"}return __extends(b,a),b}(eb);a.Href=fb;var gb=function(a){function b(){a.apply(this,arguments),this.property="src"}return __extends(b,a),b}(eb);a.Src=gb,be.control(kc,fb),be.control(lc,gb);var hb=function(c){function d(){c.apply(this,arguments),this.$Parser=_(Eb),this.$ContextManagerStatic=_(Jb),this.$Compat=_(ub),this.$document=_(xb),this.priority=100,this.__fileSupported=_(ub).fileSupported,this.__fileNameRegex=_(Fb).fileNameRegex,this.__isSelf=!1}return __extends(d,c),d.prototype.initialize=function(){this._determineType()},d.prototype.loaded=function(){var a=this;if(!t(this.parent)&&!t(this.element)){var b=G(this.type),c=this._expression=this.$Parser.parse(this.attributes[b]),d=c.identifiers;if(1!==d.length){var e=_(Db);return e.warn("Only 1 identifier allowed in a plat-bind expression",e.BIND),void(this._contextExpression=null)}var f=d[0].split(".");if(this._property=f.pop(),f.length>0)this._contextExpression=this.$Parser.parse(f.join("."));else if(c.aliases.length>0){var g=c.aliases[0],h=this.parent.findResource(g);if(t(h)||"observable"!==h.resource.type)return;this._property="value",this._contextExpression={evaluate:function(){return h.resource},aliases:[],identifiers:[],expression:""}}else this._contextExpression={evaluate:function(){return a.parent.context},aliases:[],identifiers:[],expression:""};this._watchExpression(),t(this._addEventType)||this._addEventType()}},d.prototype.contextChanged=function(){this._watchExpression()},d.prototype.dispose=function(){this._addEventType=null},d.prototype._addTextEventListener=function(){var b,c=this,d=this.element,e=this.$Compat,f=!1,g=function(){f||c._propertyChanged()},h=function(){s(b)||(b=D(function(){g(),b=null}))};u(e.ANDROID)&&(this.addEventListener(d,"compositionstart",function(){return f=!0},!1),this.addEventListener(d,"compositionend",function(){f=!1,g()},!1)),e.hasEvent("input")?this.addEventListener(d,"input",g,!1):(this.addEventListener(d,"keydown",function(b){var c=b.keyCode,d=a.KeyCodes;
c===d.lwk||c===d.rwk||c>=d.shift&&c<=d.escape||c>d.space&&c<=d.down||h()},!1),this.addEventListener(d,"cut",h,!1),this.addEventListener(d,"paste",h,!1)),this.addEventListener(d,"change",g,!1)},d.prototype._addChangeEventListener=function(){this.addEventListener(this.element,"change",this._propertyChanged,!1)},d.prototype._addButtonEventListener=function(){this.addEventListener(this.element,md,this._propertyChanged,!1)},d.prototype._getChecked=function(){return this.element.checked},d.prototype._getValue=function(){return this.element.value},d.prototype._getTextContent=function(){return this.element.textContent},d.prototype._getFile=function(){var a=this.element,c=a.value;return this.__fileSupported&&a.files.length>0?a.files[0]:{name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}}},d.prototype._getFiles=function(){var a=this.element;if(this.__fileSupported)return Array.prototype.slice.call(a.files);for(var c,d=a.value.split(/,|;/g),e=d.length,f=[],g=0;e>g;++g)c=d[g],f.push({name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}});return f},d.prototype._getSelectedValues=function(){for(var a,b=this.element.options,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.selected&&d.push(a.value);return d},d.prototype._setText=function(a,b,c){return this.__isSelf?void 0:t(a)&&(a="",c===!0)?(t(this.element.value)&&this.__setValue(a),void this._propertyChanged()):void this.__setValue(a)},d.prototype._setRange=function(a,b,c){return this.__isSelf?void 0:p(a)&&(a=0,c===!0)?(p(this.element.value)&&this.__setValue(a),void this._propertyChanged()):void this.__setValue(a)},d.prototype._setChecked=function(a,b,c){if(!this.__isSelf){if(!q(a)){if(c===!0)return void this._propertyChanged();a=!!a}this.element.checked=a}},d.prototype._setRadio=function(a){var b=this.element;if(!this.__isSelf)return t(a)&&b.checked?void this._propertyChanged():void(b.checked=b.value===a)},d.prototype._setSelectedIndex=function(a,b,c){if(!this.__isSelf){if(c===!0&&this.__checkAsynchronousSelect())return void(t(a)&&this._propertyChanged());var d=this.element,e=d.value;if(t(a))return c!==!0&&this.$document.body.contains(d)?void(d.selectedIndex=-1):void this._propertyChanged();if(m(a)){if(e===a)return;if(!this.$document.body.contains(d))return d.value=a,void(d.value!==a&&(d.value=e,this._propertyChanged()))}else{var f,g=_(Db);r(a)?(a=a.toString(),f="Trying to bind a value of type number to a select element. The value will implicitly be converted to type string."):f="Trying to bind a value that is not a string to a select element. The element's selected index will be set to -1.",g.warn(f,g.BIND)}d.value=a,(d.value!==a||-1===d.selectedIndex)&&(d.selectedIndex=-1)}},d.prototype._setSelectedIndices=function(a,b,c){if(!(this.__isSelf||c===!0&&this.__checkAsynchronousSelect())){var d,e=this.element.options,f=t(e)?0:e.length,g=t(a);if(!g&&v(a))for(var h,i;f-->0;)d=e[f],h=d.value,i=Number(h),d.selected=-1!==a.indexOf(h)||r(i)&&-1!==a.indexOf(i)?!0:!1;else for(c===!0&&this._propertyChanged();f-->0;){if(d=e[f],!g&&d.value===""+a)return void(d.selected=!0);d.selected=!1}}},d.prototype._determineType=function(){if(t(this.templateControl)||!this._observedBindableProperty()){var a=this.element;if(!t(a))switch(a.nodeName.toLowerCase()){case"textarea":this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText;break;case"input":switch(a.type){case"button":case"submit":case"reset":this._addEventType=this._addButtonEventListener,this._getter=this._getValue;break;case"checkbox":this._addEventType=this._addChangeEventListener,this._getter=this._getChecked,this._setter=this._setChecked;break;case"radio":this.__initializeRadio();break;case"range":this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRange;break;case"file":var b=a.multiple;this._addEventType=this._addChangeEventListener,this._getter=b?this._getFiles:this._getFile;break;default:this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText}break;case"select":this.__initializeSelect();break;case"button":this._addEventType=this._addButtonEventListener,this._getter=this._getTextContent}}},d.prototype._watchExpression=function(){var a=this,b=this._contextExpression,c=this.evaluateExpression(b);if(!g(c))if(t(c)&&b.identifiers.length>0)c=this.$ContextManagerStatic.createContext(this.parent,b.identifiers[0]);else{var d=_(Db);d.warn("plat-bind is trying to index into a primitive type. "+this._contextExpression.expression+' is already defined and not an object when trying to evaluate plat-bind="'+this._expression.expression+'"',d.BIND)}var e;if(s(this._setter)){this._setter===this._setSelectedIndices&&(e=this._property,t(c[e])&&(c[e]=[]),this.observeArray(c,e,function(b){a._setter(b.newArray,b.oldArray,!0)}));var f=this._expression;this.observeExpression(f,this._setter),this._setter(this.evaluateExpression(f),void 0,!0)}},d.prototype._propertyChanged=function(){if(!t(this._contextExpression)){var a=this.evaluateExpression(this._contextExpression),b=this._property,c=this._getter();t(a)||a[b]===c||(this.__isSelf=!0,a[b]=c,this.__isSelf=!1)}},d.prototype._observedBindableProperty=function(){var a=this,b=this.templateControl;return s(b.observeProperty)&&s(b.setProperty)?(b.observeProperty(function(b){a._getter=function(){return b},a._propertyChanged()}),this._setter=this.__setBindableProperty,!0):!1},d.prototype.__setBindableProperty=function(a,b,c){this.__isSelf||this.templateControl.setProperty(a,b,c)},d.prototype.__setValue=function(a){var b=this.element;b.value!==a&&(b.value=a)},d.prototype.__initializeRadio=function(){var a=this.element;if(this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRadio,!a.hasAttribute("name")){var b=G(this.type),c=this.attributes[b];a.setAttribute("name",c)}a.hasAttribute("value")||a.setAttribute("value","")},d.prototype.__initializeSelect=function(){var a,b=this.element,c=b.multiple,d=b.options,e=d.length;this._addEventType=this._addChangeEventListener,c?(this._getter=this._getSelectedValues,this._setter=this._setSelectedIndices):(this._getter=this._getValue,this._setter=this._setSelectedIndex);for(var f=0;e>f;++f)a=d[f],a.hasAttribute("value")||a.setAttribute("value",a.textContent)},d.prototype.__checkAsynchronousSelect=function(){var a=this,b=this.templateControl;if(!t(b)&&(b.type===ad||b.type===Yc)&&o(b.itemsLoaded)){var c=b.absoluteContextPath.split("."),d=c.pop();return this.observeArray(this.$ContextManagerStatic.getContext(this.parent,c),d,function(){b.itemsLoaded.then(function(){a._setter(a.evaluateExpression(a._expression))})}),b.itemsLoaded.then(function(){a._setter(a.evaluateExpression(a._expression))}),!0}return!1},d}(d);a.Bind=hb,be.control(jc,hb);var ib=function(a){function b(){a.apply(this,arguments),this.$ContextManagerStatic=_(Jb),this.property="",this.priority=200,this._listeners=[]}return __extends(b,a),b.prototype.initialize=function(){this.attribute=G(this.type),this._setProperty(this._getValue())},b.prototype.loaded=function(){this._observeProperty(),this._setProperty(this._getValue())},b.prototype.dispose=function(){s(this._removeListener)&&this._removeListener(),this._listeners=[]},b.prototype._setProperty=function(a,b){var c=this.templateControl;t(c)||(this.$ContextManagerStatic.defineGetter(c,this.property,{value:a,observe:this._addListener.bind(this)},!0,!0),this._callListeners(a,b))},b.prototype._callListeners=function(a,b){for(var c=this._listeners,d=c.length,e=this.templateControl,f=0;d>f;++f)c[f].call(e,a,b)},b.prototype._addListener=function(a){var b=this._listeners,c=b.length;return b.push(a),function(){b.splice(c,1)}},b.prototype._getValue=function(){var a=this.attributes[this.attribute],b=this.templateControl;if(!t(b))return this.evaluateExpression(a)},b.prototype._observeProperty=function(){var a=this.attributes[this.attribute],b=this.templateControl;t(b)||(this._removeListener=this.observeExpression(a,this._setProperty))},b}(d);a.ObservableAttributeControl=ib;var jb=function(a){function b(){a.apply(this,arguments),this.property="options"}return __extends(b,a),b}(ib);a.Options=jb,be.control(qc,jb)}(a.controls||(a.controls={}));var ve=a.controls;!function(a){function d(a,b,c,d,e,f,g){return A.$ResourcesFactory=a,A.$BindableTemplatesFactory=b,A.$ManagerCache=c,A.$TemplateCache=d,A.$Parser=e,A.$Http=f,A.$Promise=g,A}function f(){return C}function h(){return new N}function l(){return V}function n(){return new W}function q(a,b){return ab.$ContextManagerStatic=a,ab.$Regex=b,ab}function x(){return new bb}function y(){return bb.config}function z(){return new cb}var A=function(a){function b(){a.apply(this,arguments),this.priority=100,this.context=null,this.absoluteContextPath=null,this.hasOwnContext=!1,this.replaceWith="any"}return __extends(b,a),b.evaluateExpression=function(a,c,d){return t(a)||!m(a)&&!s(a.evaluate)?void 0:(a=m(a)?b.$Parser.parse(a):a,t(c)?a.evaluate(null,d):(a.aliases.length>0&&(d=b.getResources(c,a.aliases,d)),a.evaluate(c.context,d)))},b.getResources=function(a,c,d){if(t(a))return{};var e,f,g=c.length,h=b.__resourceCache[a.uid];t(h)&&(h=b.__resourceCache[a.uid]={}),d=d||{};for(var i=0;g>i;++i)if(e=c[i],"@"===e[0]&&(e=e.slice(1)),t(d[e])){if(t(h[e]))f=b.findResource(a,e);else{var j=h[e].control,k=j.resources;f=t(k)?b.findResource(a,e):{control:j,resource:k[e]}}if(t(f)){var l=_(Db);l.warn("Attempting to use a resource that is not defined.",l.CONTEXT)}else h[e]=f,d["@"+e]=t(f.resource)?f.resource:f.resource.value}return d},b.findResource=function(a,b){var c;if(t(a)||t(a.resources)||!m(b)||p(b))return null;if("@"===b[0]&&(b=b.slice(1)),"rootContext"===b)return a=ue.getRootControl(a),{resource:a.resources[b],control:a};if("context"===b||"control"===b)return{resource:a.resources[b],control:a};for(;!t(a);){if(c=a.resources[b],!t(c))return{resource:c,control:a};a=a.parent}},b.dispose=function(a){if(!t(a)){var c=a.uid,d=a.controls,e=d&&d.slice(0),f=ue.$ContextManagerStatic,g=f.defineProperty;if(!t(e))for(var h=e.length-1,i=h;i>=0;--i)ue.dispose(e[i]);s(a.dispose)&&a.dispose(),ue.removeEventListeners(a),b.removeElement(a),b.$ResourcesFactory.dispose(a),b.$BindableTemplatesFactory.dispose(a),H(b.__resourceCache,a.uid),f.dispose(a),te.EventManager.dispose(a.uid),b.$ManagerCache.remove(c),ue.removeParent(a),g(a,"context",null,!0,!0),g(a,"resources",null,!0,!0),a.attributes=null,a.bindableTemplates=null,a.controls=[],a.root=null,a.innerTemplate=null}},b.loadControl=function(a){for(var c,d=a.controls,e=d.length,f=0;e>f;++f)c=d[f],t(c.controls)?c.loaded():b.loadControl(c);a.loaded()},b.contextChanged=function(a,c,d){a.context=c,b.setContextResources(a),s(a.contextChanged)&&a.contextChanged(c,d)},b.setContextResources=function(a){var c=a.context;return t(a.resources)&&(a.resources=b.$ResourcesFactory.getInstance(),a.resources.initialize(a)),a.hasOwnContext&&(t(a.resources.rootContext)?a.resources.add({root:{type:"observable",value:c}}):a.resources.rootContext.value=c),t(a.resources.context)?void a.resources.add({context:{type:"observable",value:c}}):void(a.resources.context.value=c)},b.removeElement=function(a){if(!t(a)){var b,c=a.dom,d=a.element;return null===a.replaceWith||""===a.replaceWith||k(d)?(c.removeAll(a.startNode,a.endNode),void(a.elementNodes=a.startNode=a.endNode=null)):void(t(d)||(b=d.parentNode,t(b)||b.removeChild(d),a.element=null))}},b.setAbsoluteContextPath=function(a,b){ue.$ContextManagerStatic.defineGetter(a,"absoluteContextPath",b,!1,!0)},b.determineTemplate=function(a,c){var d=b.$TemplateCache,e=a.dom,f=b.$Promise;if(t(c)){if(t(a.templateUrl)){if(t(a.templateString))return f.reject(null);var h=a.type;return d.read(h).catch(function(b){return t(b)&&(b=e.serializeHtml(a.templateString)),d.put(h,b)})}c=a.templateUrl}else;var i;return d.put(c,d.read(c).catch(function(a){return t(a)?b.$Http.ajax({url:c}):void 0}).then(function(a){if(k(a))return d.put(c,a);if(!g(a)||!m(a.response))return i=_(Db),i.warn("No template found at "+c,i.AJAX),d.put(c,e.serializeHtml());var b=a.response;return p(b.trim())?d.put(c,e.serializeHtml()):d.put(c,e.serializeHtml(b))}).catch(function(a){return D(function(){i=_(Db),i.fatal("Failure to get template from "+c+".",i.TEMPLATE)}),a}))},b.detach=function(a){if(!t(a)&&!t(a.controls)){for(var c=a.controls.slice(0),d=c.length,e=0;d>e;++e)ue.dispose(c[e]);b.removeElement(a),b.$ResourcesFactory.dispose(a,!0),H(b.__resourceCache,a.uid),ue.$ContextManagerStatic.dispose(a,!0),te.EventManager.dispose(a.uid),b.$ManagerCache.remove(a.uid),ue.removeParent(a),a.controls=[],a.attributes=null}},b.getInstance=function(){return new b},b.prototype.contextChanged=function(){},b.prototype.setTemplate=function(){},b.prototype.getIdentifier=function(a){var b,c,d,e,f=[],h=this.context,i=!1,j={context:h,identifier:""};for(h===a?i=!0:f.push(j);f.length>0;)if(j=f.pop(),g(j.context)){c=Object.keys(j.context),b=c.length;for(var k=0;b>k;++k){if(d=c[k],e=j.context[d],e===a)return""!==j.identifier?j.identifier+"."+d:d;f.push({context:e,identifier:""!==j.identifier?j.identifier+"."+d:d})}}return i?j.identifier:void 0},b.prototype.getAbsoluteIdentifier=function(a){if(a===this.context)return this.absoluteContextPath;var b=this.getIdentifier(a);return t(b)?b:this.absoluteContextPath+"."+b},b.prototype.getResources=function(a,c){return b.getResources(this,a,c)},b.prototype.findResource=function(a){return b.findResource(this,a)},b.prototype.evaluateExpression=function(a,c){return b.evaluateExpression(a,this,c)},b.__resourceCache={},b}(ue);a.TemplateControl=A,a.ITemplateControlFactory=d,be.injectable($b,d,[Zb,Ub,Qb,Rb,Eb,rb,tb],Kd);var B=function(a){function b(){a.apply(this,arguments),this._listeners=[]}return __extends(b,a),b.prototype.observeProperty=function(a){var b=this._listeners,c=a.length;return b.push(a),function(){b.splice(c,1)}},b.prototype.setProperty=function(){},b.prototype.propertyChanged=function(a,b){if(a!==b)for(var c=this._listeners,d=c.length,e=0;d>e;++e)c[e](a,b)},b.prototype.dispose=function(){this._listeners=[]},b}(A);a.BindablePropertyControl=B;var C=function(a){function b(){a.apply(this,arguments),this.hasOwnContext=!0}return __extends(b,a),b.detach=function(a){A.detach(a)},b.dispose=function(a){A.dispose(a)},b.getInstance=function(){return new b},b.prototype.navigatedTo=function(){},b.prototype.navigatingFrom=function(){},b}(A);a.BaseViewControl=C,a.IBaseViewControlFactory=f,be.injectable(_b,f,null,Kd);var I=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(C);a.ViewControl=I;var M=function(a){function b(){var c=this;a.call(this),this.title="",this.description="",this.on("navigated",function(){p(c.title)&&(c.title=""),p(c.description)&&(c.description=""),b.setTitle(c.title),b.setDescription(c.description)})}return __extends(b,a),b.setTitle=function(a){var c=b.titleElement;if(!j(c)){var d=plat.acquire(plat.Document);c=b.titleElement=d.head.querySelector("title"),j(c)||(c=b.titleElement=d.head.appendChild(d.createElement("title")))}c.textContent=a.replace(/\//g," ")},b.setDescription=function(a){var c=b.descriptionElement;if(!j(c)){var d=plat.acquire(plat.Document);c=b.descriptionElement=d.head.querySelector('meta[name="description"]'),j(c)||(c=b.descriptionElement=d.head.appendChild(d.createElement("meta")),c.setAttribute("name","description"))}c.setAttribute("content",a.replace(/\//g," "))},b.prototype.setTitle=function(a){this.title=a,b.setTitle(a)},b.prototype.setDescription=function(a){this.description=a,b.setDescription(a)},b}(C);a.WebViewControl=M;var N=function(){function a(){this.$DomEvents=_(Wb)}return a.prototype.addEventListener=function(a,b,c,d){return this.$DomEvents.addEventListener(a,b,c,d)},a.prototype.appendChildren=function(a,b){return J(a,b)},a.prototype.clearNode=function(a){return K(a)},a.prototype.clearNodeBlock=function(a,b){return L(a,b)},a.prototype.setInnerHtml=function(a,b){return O(a,b)},a.prototype.insertBefore=function(a,b,c){return P(a,b,c)},a.prototype.replace=function(a){return Q(a)},a.prototype.replaceWith=function(a,b){return R(a,b)},a.prototype.serializeHtml=function(a){return S(a)},a.prototype.removeBetween=function(a,b){return T(a,b)},a.prototype.removeAll=function(a,b){return U(a,b)},a.prototype.addClass=function(a,b){return X(a,b)},a.prototype.removeClass=function(a,b){return Y(a,b)},a.prototype.toggleClass=function(a,b){return Z(a,b)},a.prototype.hasClass=function(a,b){return $(a,b)},a}();a.Dom=N,a.IDom=h,be.injectable(Vb,h);var V=function(){function a(){this.$ResourcesFactory=_(Zb),this.$TemplateControlFactory=_($b),this.$Promise=_(tb),this.$ManagerCache=_(Qb),this.$Document=_(xb),this.$ElementManagerFactory=_(Mb),this.templates={},this._cache={},this.__compiledControls=[]}return a.create=function(b,c){var d=new a;return d.control=b,t(c)||(d.templates=c.templates,d._cache=c._cache),d},a.dispose=function(a){if(!t(a)){var b=a.bindableTemplates;!t(b)&&s(b.dispose)&&b.dispose()}},a.prototype.bind=function(a,b,c){var d,e=this,f=this.templates[a];return t(f)?(d=_(Db),void d.fatal("Cannot bind template, no template stored with key: "+a,d.TEMPLATE)):t(b)||r(b)||m(b)?f.then(function(d){return e._bindTemplate(a,d.cloneNode(!0),b,c)},function(a){return D(function(){d=_(Db),d.fatal(a,d.BIND)}),null}):(d=_(Db),void d.warn("Cannot bind template with relativeIdentifier: "+b+". Identifier must be either a string or number",d.BIND))},a.prototype.add=function(a,b){if(!t(b)){if(k(b))return void this._compile(a,b);var c=this.$Document.createDocumentFragment();if(j(b))c.appendChild(b);else{if(!w(b))return;J(b,c)}this._compile(a,c)}},a.prototype.dispose=function(){for(var a=this.$TemplateControlFactory.dispose,b=this.__compiledControls,c=b.length,d=0;c>d;++d)a(b[d]);this.__compiledControls=[],this.control=null,this._cache={},this.templates={}},a.prototype._bindTemplate=function(a,b,c,d){var e=this,f=this._createBoundControl(a,b,c,d),g=this._createNodeMap(f,b,c),h=!1,i=f.dispose;return f.dispose=function(){h=!0,i.call(f),f.dispose=i},this._bindNodeMap(g,a).then(function(){var a=e.$Document;return h?a.createDocumentFragment():(f.startNode=b.insertBefore(a.createComment(f.type+Pd),b.firstChild),f.endNode=b.insertBefore(a.createComment(f.type+Qd),null),b)},function(a){return D(function(){var b=_(Db);b.fatal(a,b.COMPILE)}),null})},a.prototype._bindNodeMap=function(a,b){var c=this._cache[b],d=a.uiControlNode.control,e=a.element,f=this.$ManagerCache;return this.control.controls.push(d),c.clone(e,f.read(this.control.uid),a),f.read(d.uid).bindAndLoad()},a.prototype._compile=function(a,b){var c=this._createBoundControl(a+Nd,b),d=this._createNodeMap(c,b);this.__compiledControls.push(c),this._compileNodeMap(c,d,a)},a.prototype._compileNodeMap=function(a,b,c){var d=this,e=this.$ElementManagerFactory.getInstance(),f=[];e.isClone=!0,e.initialize(b,null),e.setUiControlTemplate(),this._cache[c]=e,f.push(e.fulfillTemplate()),this.templates[c]=this.$Promise.all(f).then(function(){var c,e,f=b.element,g=b.element.cloneNode(!0);return c=a.startNode=d.$Document.createComment(a.type+Pd),e=a.endNode=d.$Document.createComment(a.type+Qd),f.insertBefore(c,f.firstChild),f.insertBefore(e,null),g})},a.prototype._createNodeMap=function(a,b,c){return{element:b,attributes:{},nodes:[],childContext:c,uiControlNode:{control:a,nodeName:a.type,expressions:[],injector:null}}},a.prototype._createBoundControl=function(a,b,c,d){var e=this.$TemplateControlFactory,f=e.getInstance(),g=this.$ResourcesFactory,h=this.control,i=g.getInstance();return i.initialize(f,d),f.resources=i,g.addControlResources(f),f.parent=h,f.controls=[],f.element=b,f.type=h.type+Od+a,f},a}();a.BindableTemplates=V,a.IBindableTemplatesFactory=l,be.injectable(Ub,l,null,Kd);var W=function(){function a(){this.__listeners={}}return a.prototype.initialize=function(a,b){this.__control=a;for(var c,d=Object.keys(b),e=this.__listeners,f=d.length,g=0;f>g;++g)c=d[g],this[c]=b[c],e[c]=[]},a.prototype.observe=function(a,c){var d=this.__listeners[G(a)];if(t(d))return b;var e=d.length;return d.push(c),function(){d.splice(e,1)}},a.prototype._attributeChanged=function(a,b,c){for(var d=this.__control,e=this.__listeners[G(a)],f=e.length,g=0;f>g;++g)e[g].call(d,b,c)},a}();a.Attributes=W,a.IAttributesInstance=n,be.injectable(Tb,n,null,Jd);var ab=function(){function a(){this.__resources={},this.__bound=!1}return a.create=function(c,d){if(t(d))return d;var e;switch(d.type.toLowerCase()){case"injectable":var f=ee[d.value];t(f)||(d.value=f.inject());break;case"observable":a._observeResource(c,d);break;case"object":e=d.value,m(e)&&(d.value=c.evaluateExpression(e));break;case"function":if(e=d.value,m(e))if(e=c[e],s(e))d.value=e.bind(c);else{var g=_(Db);g.warn('Attempted to create a "function" type Resource with a function not found on your control.',g.BIND),d.value=b}}return d},a.addControlResources=function(b){b.resources.add({context:{value:b.context,type:"observable"},control:{value:b,type:"object"}}),b.hasOwnContext&&a.__addRoot(b)},a.bindResources=function(b){var c=b.__resources;if(!t(c)){for(var d,e=b.__controlInstance,f=Object.keys(c),g=a.__controlResources,h=f.length,i=0;h>i;++i)d=f[i],-1===g.indexOf(d)&&(b[d]=c[d]=a.create(e,b[d]));b.__bound=!0}},a.dispose=function(b,c){var d=b.resources;if(!t(d)){for(var f,g,h=Object.keys(d.__resources),i=h.length,j=a.$ContextManagerStatic.defineProperty,k=0;i>k;++k)f=h[k],g=d[f],t(g)||"observable"!==g.type||j(d,f,c?e(g,!0):null,!0,!0);a._removeListeners(d.__controlInstance)}},a.parseElement=function(b){for(var c,d,e,f,g,h,i=Array.prototype.slice.call(b.children),j=a.$Regex,k=j.whiteSpaceRegex,l=j.quotationRegex,m={},n=a.__resourceTypes;i.length>0;)c=i.pop(),g=c.nodeName.toLowerCase(),-1!==n.indexOf(g)&&(e=c.attributes,d={},f=e.getNamedItem("alias"),t(f)||(d.alias=f.value,h=c.textContent.replace(k,"$1"),p(h)||(d.value="injectable"===g?h.replace(l,""):h,d.type=g,m[d.alias]=d)));return m},a.getInstance=function(){return new a},a._observeResource=function(b,c){var d=c.value,e=b.uid,f=a.__observableResourceRemoveListeners[e];if(t(f)&&(f=a.__observableResourceRemoveListeners[e]=[]),m(d)){t(c.initialValue)?c.initialValue=d:d=c.initialValue;var g=b.observeExpression(d,function(a){c.value=a});c.value=b.evaluateExpression(d),f.push(g)}},a._removeListeners=function(b){if(!t(b)){var c=b.uid,d=a.__observableResourceRemoveListeners[c];if(v(d))for(var e=d.length,f=0;e>f;++f)d[f]();H(a.__observableResourceRemoveListeners,c)}},a.__addRoot=function(a){a.resources.add({root:{value:a,type:"object",alias:"root"},rootContext:{value:a.context,type:"observable",alias:"rootContext"}})},a.prototype.initialize=function(b,c){if(this.__controlInstance=b,!t(c)){j(c)?c=a.parseElement(c):g(c.resources)&&(c=c.resources),this.__resources=c;for(var d,e=Object.keys(c),f=e.length,h=0;f>h;++h)d=e[h],this[d]=c[d]}},a.prototype.add=function(b){if(!t(b)){j(b)&&(b=a.parseElement(b));for(var c,d,e=Object.keys(b),f=e.length,g=this.__controlInstance,h=this.__bound,i=a.create,k=0;f>k;++k)d=e[k],c=b[d],c.alias=d,this[d]=this.__resources[d]=h?i(g,c):c}},a.__controlResources=["control","context","root","rootContext"],a.__resourceTypes=["injectable","object","observable","function"],a.__observableResourceRemoveListeners={},a}();a.Resources=ab,a.IResourcesFactory=q,be.injectable(Zb,q,[Jb,Fb],Kd);var bb=function(){function a(){this.$Document=_(xb),this.$Compat=_(ub),this._subscribers={},this._gestures={$tap:md,$dbltap:nd,$hold:sd,$release:td,$swipe:ud,$swipeleft:vd,$swiperight:wd,$swipeup:xd,$swipedown:yd,$track:zd,$trackleft:Ad,$trackright:Bd,$trackup:Cd,$trackdown:Dd,$trackend:Ed},this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__START="start",this.__MOVE="move",this.__END="end",this.__hasMoved=!1,this.__hasSwiped=!1,this.__hasRelease=!1,this.__detectingMove=!1,this.__tapCount=0,this.__touchCount=0,this.__cancelRegex=/cancel/i,this.__pointerEndRegex=/up|cancel/i,this.__mappedEventListener=this.__handleMappedEvent.bind(this),this.__reverseMap={},this.__pointerHash={},this.__pointerEvents=[],this.__listeners={start:this._onTouchStart.bind(this),move:this._onMove.bind(this),end:this._onTouchEnd.bind(this)},this.__getTypes()}return a.prototype.addEventListener=function(a,c,d,e){var f=this,g=this.$Compat,h=g.mappedEvents,i=h[c],j=!t(i),k=b,l=b,m=this._gestures;if(j&&(this.__reverseMap[i]=c,this.__registerElement(a,c),k=this.__addMappedEvent(i,e),g.hasTouchEvents&&(i=i.replace("touch","mouse").replace("start","down").replace("end","up"),this.__reverseMap[i]=c,l=this.__addMappedEvent(i,e))),a.addEventListener(c,d,e),!u(a["on"+c])||u(m[c])||j)return function(){k(),l(),a.removeEventListener(c,d,e)};var n=m.$swipe,o=m.$track,p=c;if(-1!==c.indexOf(o)){var q=m.$trackend;p=c===q?q:o}else-1!==c.indexOf(n)&&(p=n);return this._gestureCount[p]++,this.__registerElement(a,c),function(){f.__removeEventListener(a,c,d,e)}},a.prototype.dispose=function(){this.__unregisterTypes(),this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this._isActive=!1,this._subscribers={},this.__pointerEvents=[],this.__pointerHash={},this.__reverseMap={},this.__tapCount=0,this.__touchCount=0,this.__detectingMove=!1,this.__hasMoved=!1,this.__hasRelease=!1,this.__hasSwiped=!1,this.__swipeOrigin=null,this.__lastMoveEvent=null,this.__lastTouchDown=null,this.__lastTouchUp=null,this.__capturedTarget=null,this.__focusedElement=null},a.prototype._onTouchStart=function(b){var c=this,d="mousedown"!==b.type;if(d)this._inTouch=!0;else if(this._inTouch===!0)return b.preventDefault(),!1;if(this.__capturedTarget=null,this.__standardizeEventObject(b),this.__lastTouchDown=this.__swipeOrigin=b,this.__lastMoveEvent=null,this.__hasMoved=!1,(this.__touchCount=b.touches.length)>1)return b.preventDefault(),!1;this.__registerType(this.__MOVE),this.__detectingMove=!0;var e=this._gestureCount,f=e.$hold<=0,g=e.$release<=0;if(f&&g)return!0;var h,i,j=a.config.intervals.holdInterval;return f?(this.__hasRelease=!1,void(this.__holdTimeout=setTimeout(function(){c.__hasRelease=!0},j))):(g?(h=this.__findFirstSubscriber(b.target,this._gestures.$hold),i=function(){h.trigger(b),c.__holdTimeout=null}):(this.__hasRelease=!1,h=this.__findFirstSubscriber(b.target,this._gestures.$hold),i=function(){h.trigger(b),c.__hasRelease=!0,c.__holdTimeout=null}),t(h)||(this.__holdTimeout=setTimeout(i,j)),!0)},a.prototype._onMove=function(b){if(this.__clearHold(),this.__touchCount>1||this._inTouch===!0&&"mousemove"===b.type)return b.preventDefault(),!1;this.__standardizeEventObject(b);var c=this._gestureCount,d=c.$track<=0,e=a.config,f=this.__swipeOrigin,g=b.clientX,h=b.clientY,i=f.clientX,j=f.clientY,k=this.__getDistance(i,g,j,h)>=e.distances.minScrollDistance;if(k&&(this.__hasMoved=!0),c.$swipe<=0&&d||d&&!k)return!0;var l=this.__lastMoveEvent,m=b.direction=t(l)?this.__getDirection(g-i,h-j):this.__getDirection(g-l.clientX,h-l.clientY);this.__checkForOriginChanged(m)&&b.preventDefault();var n=b.velocity=this.__getVelocity(g-f.clientX,h-f.clientY,b.timeStamp-f.timeStamp);return this.__hasSwiped=(this.__isHorizontal(m)?n.x:n.y)>=e.velocities.minSwipeVelocity,d||this.__handleTrack(b),this.__lastMoveEvent=b,!0},a.prototype._onTouchEnd=function(b){var c=b.type,d=this.__hasMoved,e=this._inTouch;if(this.__touchCount>1)return b.preventDefault(),"touchend"===c&&this.__preventClickFromTouch(),!1;if("mouseup"!==c){if("touchend"===c){var f=b.target;d?(b.preventDefault(),this.__preventClickFromTouch()):this.__isFocused(f)?this.__preventClickFromTouch():(b.preventDefault(),e===!0&&this.__handleInput(f)),this._inTouch=!1}}else if(!u(e))return b.preventDefault(),!1;if(this.__clearHold(),this.__detectingMove&&(this.__unregisterType(this.__MOVE),this.__detectingMove=!1),this.__standardizeEventObject(b),this.__cancelRegex.test(c))return this.__tapCount=0,this.__hasRelease=!1,this.__hasSwiped=!1,!0;if(b.touches.length>0)return b.preventDefault(),!1;this.__hasRelease&&this.__handleRelease(b),this.__hasSwiped&&this.__handleSwipe();var g=a.config,h=g.intervals,i=b.timeStamp,j=this.__lastTouchDown;if(d)return this.__handleTrackEnd(b),this.__tapCount=0,!1;if(t(j)||i-j.timeStamp>h.tapInterval)return this.__tapCount=0,!0;var k=this.__lastTouchUp,l=b.clientX,m=b.clientY;return this.__tapCount>0&&this.__getDistance(l,k.clientX,m,k.clientY)<=g.distances.maxDblTapDistance&&i-k.timeStamp<=h.dblTapInterval?this.__handleDbltap(b):this.__tapCount=0,this.__handleTap(b),this.__lastTouchUp=b,!0},a.prototype.__handleTap=function(b){var c=this;if(this.__tapCount++,!(this._gestureCount.$tap<=0)){var d=this._gestures,e=this.__findFirstSubscriber(b.target,d.$tap);if(!t(e))return a.config.intervals.dblTapZoomDelay<=0||"mouse"===b.pointerType||"mouseup"===b.type?void e.trigger(b):void(this.__tapTimeout=setTimeout(function(){e.trigger(b),c.__tapCount=0,c.__tapTimeout=null},a.config.intervals.dblTapZoomDelay))}},a.prototype.__handleDbltap=function(a){if(this.__tapCount=0,t(this.__tapTimeout)||(clearTimeout(this.__tapTimeout),this.__tapTimeout=null),!(this._gestureCount.$dbltap<=0)){var b=this.__findFirstSubscriber(a.target,this._gestures.$dbltap);t(b)||(b.trigger(a),this.__tapCount=-1)}},a.prototype.__handleRelease=function(a){var b=this.__findFirstSubscriber(a.target,this._gestures.$release);t(b)||b.trigger(a),this.__hasRelease=!1},a.prototype.__handleSwipe=function(){var a=this.__lastMoveEvent;if(t(a))return void(this.__hasSwiped=!1);var b=this.__swipeSubscribers,c=b.master,d=b.directional;t(c)||c.trigger(a),t(d)||d.trigger(a),this.__hasSwiped=!1,this.__lastMoveEvent=null,this.__swipeSubscribers=null},a.prototype.__handleTrack=function(a){var b=this._gestures.$track,c=a.direction,d=b+c,e=this.__capturedTarget||a.target,f=this.__findFirstSubscriber(e,b),g=this.__findFirstSubscriber(e,d);t(f)||(a.preventDefault(),f.trigger(a)),t(g)||(a.preventDefault(),g.trigger(a))},a.prototype.__handleTrackEnd=function(a){if(!(this._gestureCount.$trackend<=0)){var b=this.__capturedTarget||a.target,c=this.__findFirstSubscriber(b,this._gestures.$trackend);t(c)||c.trigger(a)}},a.prototype.__handleMappedEvent=function(a){var b=a.type,c=this.__reverseMap[b],d=this.__findFirstSubscriber(a.target,c);t(d)||(this.__standardizeEventObject(a),d.trigger(a))},a.prototype.__getTypes=function(){var a=this.$Compat,b=a.mappedEvents;if(a.hasPointerEvents)return this._startEvents=[b.$touchstart],this._moveEvents=[b.$touchmove],void(this._endEvents=[b.$touchend,b.$touchcancel]);if(a.hasTouchEvents)return this._startEvents=[b.$touchstart,"mousedown"],this._moveEvents=[b.$touchmove,"mousemove"],void(this._endEvents=[b.$touchend,b.$touchcancel,"mouseup"]);var c=b.$touchcancel;this._startEvents=[b.$touchstart],this._moveEvents=[b.$touchmove],this._endEvents=t(c)?[b.$touchend]:[b.$touchend,c]},a.prototype.__registerTypes=function(){this.__registerType(this.__START),this.__registerType(this.__END)},a.prototype.__unregisterTypes=function(){this.__unregisterType(this.__START),this.__unregisterType(this.__MOVE),this.__unregisterType(this.__END)},a.prototype.__registerType=function(a){var b,c=this.__listeners[a],d=this.$Document;switch(a){case this.__START:b=this._startEvents;break;case this.__MOVE:b=this._moveEvents;break;case this.__END:b=this._endEvents;break;default:return}for(var e=b.length;e-->0;)d.addEventListener(b[e],c,!1)},a.prototype.__unregisterType=function(a){var b,c=this.__listeners[a],d=this.$Document;switch(a){case this.__START:b=this._startEvents;break;case this.__MOVE:b=this._moveEvents;break;case this.__END:b=this._endEvents;break;default:return}for(var e=b.length;e-->0;)d.removeEventListener(b[e],c,!1)},a.prototype.__registerElement=function(b,c){var d,e=b.__plat;t(e)?(d=F("domEvent_"),b.__plat=e={domEvent:d}):t(e.domEvent)&&(d=F("domEvent_"),e.domEvent=d),this._isActive||(this.__registerTypes(),t(this._isActive)&&this.__appendGestureStyle(),this._isActive=!0);var f;if(t(d)){var g=this._subscribers[e.domEvent];
u(g[c])?(f=new db(b,c),g[c]=f):g[c].count++,g.gestureCount++}else{var h={gestureCount:1};f=new db(b,c),h[c]=f,this._subscribers[d]=h,u(b.className)||X(b,a.config.styleConfig[0].className),this.__removeSelections(b)}},a.prototype.__unregisterElement=function(a,b){var c=a.__plat;if(!t(c)&&!t(c.domEvent)){var d=c.domEvent,e=this._subscribers[d],f=e[b];t(f)||(f.count--,0===f.count&&H(e,b),e.gestureCount--,0===e.gestureCount&&(H(this._subscribers,d),this.__removeElement(a)))}},a.prototype.__setTouchPoint=function(a){var b=a.type,c=this.$Compat;c.hasPointerEvents?("pointerdown"===b&&this.__setCapture(a.target),this.__updatePointers(a,this.__pointerEndRegex.test(b))):c.hasMsPointerEvents?("MSPointerDown"===b&&this.__setCapture(a.target),this.__updatePointers(a,this.__pointerEndRegex.test(b))):"mousedown"===b?(a.pointerType="mouse",this.__setCapture(a.target)):a.pointerType=-1===b.indexOf("mouse")?"touch":"mouse"},a.prototype.__setCapture=function(a){t(this.__capturedTarget)&&!i(a)&&(this.__capturedTarget=a)},a.prototype.__updatePointers=function(a,b){var c=a.pointerId,d=this.__pointerHash[c];b?u(d)||(this.__pointerEvents.splice(this.__pointerEvents.indexOf(d),1),H(this.__pointerHash,c)):(a.identifier=a.pointerId,u(d)?this.__pointerEvents.push(a):this.__pointerEvents.splice(this.__pointerEvents.indexOf(d),1,a),this.__pointerHash[c]=a)},a.prototype.__findFirstSubscriber=function(a,b){var c,d,e;do if(c=a.__plat,!u(c)&&!u(c.domEvent)&&(d=this._subscribers[c.domEvent],e=d[b],!u(e)))return e;while(!t(a=a.parentNode))},a.prototype.__addMappedEvent=function(a,b){var c=this,d=this.$Document;return d.addEventListener(a,this.__mappedEventListener,b),function(){d.removeEventListener(a,c.__mappedEventListener,b)}},a.prototype.__removeEventListener=function(a,b,c,d){var e=this._gestures;a.removeEventListener(b,c,d);var f=e.$swipe,g=e.$track,h=b;-1!==b.indexOf(g)?h=g:-1!==b.indexOf(f)&&(h=f),this._gestureCount[h]--,this.__unregisterElement(a,b)},a.prototype.__removeElement=function(b){this.__returnSelections(b),u(b.className)||Y(b,a.config.styleConfig[0].className);var c=b.__plat;H(c,"domEvent"),p(c)&&H(b,"__plat"),p(this._subscribers)&&this.dispose()},a.prototype.__standardizeEventObject=function(a){this.__setTouchPoint(a),a.touches=a.touches||this.__pointerEvents;var b=a;return u(a.clientX)&&(a.touches.length>0?b=a.touches[0]:(a.changedTouches||[]).length>0&&(b=a.changedTouches[0]),a.clientX=b.clientX,a.clientY=b.clientY),u(a.offsetX)||!t(this.__capturedTarget)?void(a.offset=this.__getOffset(a)):void(a.offset={x:a.offsetX,y:a.offsetY})},a.prototype.__getOffset=function(a){var b=this.__capturedTarget||a.target;if(i(b))return{x:a.clientX,y:a.clientY};for(var c=b.offsetLeft,d=b.offsetTop;!t(b=b.offsetParent);)c+=b.offsetLeft,d+=b.offsetTop;return{x:a.clientX-c,y:a.clientY-d}},a.prototype.__clearHold=function(){t(this.__holdTimeout)||(clearTimeout(this.__holdTimeout),this.__holdTimeout=null)},a.prototype.__getDistance=function(a,b,c,d){var e=Math.abs(b-a),f=Math.abs(d-c);return Math.sqrt(e*e+f*f)},a.prototype.__getVelocity=function(a,b,c){return{x:Math.abs(a/c)||0,y:Math.abs(b/c)||0}},a.prototype.__getDirection=function(a,b){var c=Math.abs(a),d=Math.abs(b);return d>c?0>b?"up":"down":0>a?"left":"right"},a.prototype.__checkForOriginChanged=function(a){var b=this.__lastMoveEvent;if(t(b))return this.__hasSwiped=!1,this.__checkForRegisteredSwipe(a);var c=b.direction;return c===a?!1:(this.__swipeOrigin=b,this.__hasSwiped=!1,this.__checkForRegisteredSwipe(a))},a.prototype.__checkForRegisteredSwipe=function(a){var b=this.__swipeOrigin.target,c=this._gestures.$swipe,d=c+a,e=this.__findFirstSubscriber(b,c),f=this.__findFirstSubscriber(b,d);return this.__swipeSubscribers={master:e,directional:f},!t(e)||!t(f)},a.prototype.__isHorizontal=function(a){return"left"===a||"right"===a},a.prototype.__appendGestureStyle=function(){var b,c,d=this.$Document;if(!this.$Compat.platCss)if(!t(d.styleSheets)&&d.styleSheets.length>0){var e=d.styleSheets[0];for(b=a.config.styleConfig,c=b.length;c-->0;)e.insertRule(this.__createStyle(b[c]),0)}else{var f=d.head,g=d.createElement("style"),h="";for(g.type="text/css",b=a.config.styleConfig,c=b.length;c-->0;)h=this.__createStyle(b[c])+h;g.textContent=h,f.appendChild(g)}},a.prototype.__createStyle=function(a){var b=a.styles||[],c=b.length,d="."+a.className+" { ",e="";c=b.length;for(var f=0;c>f;++f)e+=b[f]+";";return d+=e+" } "},a.prototype.__isFocused=function(a){return a===this.__focusedElement},a.prototype.__handleInput=function(a){var b=this,c=a.nodeName,d=this.__focusedElement||{};if(!m(c))return this.__focusedElement=null,void(s(d.blur)&&d.blur());var e;switch(c.toLowerCase()){case"input":switch(a.type){case"range":s(d.blur)&&d.blur();break;case"button":case"submit":case"checkbox":case"radio":case"file":s(d.blur)&&d.blur(),D(function(){b.$Document.body.contains(a)&&a.click()});break;default:return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1))}break;case"a":case"button":case"select":case"label":s(d.blur)&&d.blur(),D(function(){b.$Document.body.contains(a)&&a.click()});break;case"textarea":return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1));default:s(d.blur)&&d.blur(),D(function(){b.$Document.body.contains(a)&&s(a.click)&&a.click()})}this.__focusedElement=null},a.prototype.__preventClickFromTouch=function(){var a=this,c=this.$Document,d=E(function(){c.removeEventListener("click",e,!0),c.removeEventListener("mousedown",e,!0),c.removeEventListener("mouseup",e,!0)},400),e=function(f){if(f.preventDefault(),f.stopPropagation(),c.removeEventListener(f.type,e,!0),d===b)return!1;d(),d=b;var g=a.__lastTouchDown;return t(g)||a.__isFocused(g.target)?!1:(a.__handleInput(g.target),!1)};c.addEventListener("click",e,!0),c.addEventListener("mousedown",e,!0),c.addEventListener("mouseup",e,!0)},a.prototype.__removeSelections=function(a){j(a)&&(u(a.onselectstart)||a.addEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.addEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__returnSelections=function(a){j(a)&&(u(a.onselectstart)||a.removeEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.removeEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__preventDefault=function(a){var b=a.target.nodeName;return m(b)&&(b=b.toLowerCase()),"input"===b||"textarea"===b?!0:(a.preventDefault(),!1)},a.config={intervals:{tapInterval:200,dblTapInterval:300,holdInterval:400,dblTapZoomDelay:0},distances:{minScrollDistance:5,maxDblTapDistance:20},velocities:{minSwipeVelocity:.8},styleConfig:[{className:"plat-gesture",styles:["-moz-user-select: none","-khtml-user-select: none","-webkit-touch-callout: none","-webkit-user-select: none","-webkit-user-drag: none","-webkit-tap-highlight-color: transparent","-webkit-overflow-scrolling: touch","-ms-user-select: none","-ms-touch-action: manipulation","touch-action: manipulation"]},{className:"plat-no-touch-action",styles:["-ms-touch-action: none","touch-action: none"]}]},a}();a.DomEvents=bb,a.IDomEvents=x,be.injectable(Wb,x),a.IDomEventsConfig=y,be.injectable(Xb,y);var cb=function(){function a(){this.$Document=_(xb)}return a.prototype.initialize=function(a,b){this.element=a,this.event=b},a.prototype.trigger=function(a){var b=this.$Document.createEvent("CustomEvent");g(a)&&c(b,a),b.initCustomEvent(this.event,!0,!0,0),this.element.dispatchEvent(b)},a}();a.DomEvent=cb,a.IDomEventInstance=z,be.injectable(Yb,z,null,Jd);var db=function(a){function b(b,c){a.call(this),this.count=0,this.element=b,this.event=c,this.count++}return __extends(b,a),b.prototype.trigger=function(a){var b=this.$Document.createEvent("CustomEvent");this.__extendEventObject(b,a),b.initCustomEvent(this.event,!0,!0,0),this.element.dispatchEvent(b)},b.prototype.__extendEventObject=function(a,b){var c=b.pointerType;a.clientX=b.clientX,a.clientY=b.clientY,a.offsetX=b.offset.x,a.offsetY=b.offset.y,a.direction=b.direction||"none",a.touches=b.touches,a.velocity=b.velocity||{x:0,y:0},a.identifier=b.identifier||0,a.pointerType=r(c)?this.__convertPointerType(c,b.type):c,a.screenX=b.screenX,a.screenY=b.screenY,a.pageX=b.pageX,a.pageY=b.pageY},b.prototype.__convertPointerType=function(a,b){switch(a){case MSPointerEvent.MSPOINTER_TYPE_MOUSE:return"mouse";case MSPointerEvent.MSPOINTER_TYPE_PEN:return"pen";case MSPointerEvent.MSPOINTER_TYPE_TOUCH:return"touch"}return-1===b.indexOf("mouse")?"touch":"mouse"},b}(cb);!function(a){function b(){return new c}var c=function(){function a(){this.$Compat=_(ub),this._elements={},this.__cssWarning=!1}return a.prototype.animate=function(a,b,c){if(!j(a)||a.nodeType!==Node.ELEMENT_NODE||this.__parentIsAnimating(a))return this.__resolvePromise();var d,e=this.$Compat,f=ge[b],g=he[b];if(!e.animationSupported||u(f)){if(u(g))return this.__resolvePromise();d=g.inject()}else{if(!this.__cssWarning&&!e.platCss){var h=_(Db);h.warn("CSS animation occurring and platypus.css was not found prior to platypus.js. If you intend to use platypus.css, please move it before platypus.js inside your head or body declaration.",h.ANIMATION),this.__cssWarning=!0}d=f.inject()}var i=this.__setAnimationId(a,d);this.__stopChildAnimations(a,i);var k=this._elements[i],l=d._init(a,c).then(function(){k.promise=null,k.animationEnd()});return t(k.promise)?k.promise=l:k.promise.then(function(){return l})},a.prototype.__parentIsAnimating=function(a){for(;!i(a=a.parentNode)&&a.nodeType===Node.ELEMENT_NODE;)if($(a,fd))return!0;return!1},a.prototype.__setAnimationId=function(a,b){var c,d=this._elements,e=a.__plat;u(e)&&(a.__plat=e={}),u(e.animation)?e.animation=c=F("animation_"):c=e.animation;var f=d[c],g=function(f){return f===!0?void b.cancel():(Y(a,fd),H(d,c),H(e,"animation"),void(p(e)&&H(a,"__plat")))};return u(f)?(X(a,fd),d[c]={animationEnd:g}):(f.animationEnd(!0),f.animationEnd=g),c},a.prototype.__stopChildAnimations=function(a,b){for(var c,d,e=this._elements,f=Array.prototype.slice.call(a.querySelectorAll("."+fd)),g=f.length;g-->0;)c=f[g],d=c.__plat,u(d)||u(d.animation)||(b=d.animation,s(e[b])&&e[b].animationEnd())},a.prototype.__resolvePromise=function(){return new d(function(a){a()})},a}();a.Animator=c,a.IAnimator=b,be.injectable("$Animator",b);var d=function(a){function b(b,c){a.call(this,b),t(c)||(this.__animationInstance=c.__animationInstance)}return __extends(b,a),b.prototype.cancel=function(){return t(this.__animationInstance)||(this.__animationInstance.cancel(),this.__animationInstance.end()),this},b.prototype.then=function(b){return a.prototype.then.call(this,b)},b.prototype.catch=function(b){return a.prototype.catch.call(this,b)},b}(oe.Promise);a.AnimationPromise=d;var e=function(){function a(){this.$Compat=_(ub),this.dom=_(Vb)}return a.prototype.initialize=function(){},a.prototype.start=function(){},a.prototype.end=function(){s(this.__resolve)&&this.__resolve(),this.dispose()},a.prototype.cancel=function(){this.end()},a.prototype.dispose=function(){this.__resolve=null},a.prototype._init=function(a,b){var c=this;return this.element=a,this.options=b,new d(function(a){c.__resolve=a,c.initialize(),c.start()},{__animationInstance:this})},a}();a.BaseAnimation=e;var f=function(a){function b(){a.apply(this,arguments),this.__animationEvents=this.$Compat.animationEvents,this.__subscribers=[]}return __extends(b,a),b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.__subscribers=[],a.prototype.dispose.call(this)},b.prototype.animationStart=function(a){return this.__addEventListener(this.__animationEvents.$animationStart,a)},b.prototype.transitionStart=function(a){return this.__addEventListener(this.__animationEvents.$transitionStart,a)},b.prototype.animationEnd=function(a){return this.__addEventListener(this.__animationEvents.$animationEnd,a)},b.prototype.transitionEnd=function(a){return this.__addEventListener(this.__animationEvents.$transitionEnd,a)},b.prototype.__addEventListener=function(a,b){var c=this,d=this.__subscribers,e=function(){c.__removeListener=c.dom.addEventListener(c.element,a,function(){c.__removeListener(),c.__removeListener=null,0!==d.length&&(b.call(c),d.shift(),0!==d.length&&d[0]())},!1)};return d.push(e),1===d.length&&e(),this},b}(e);a.CssAnimation=f;var g=function(a){function b(){a.apply(this,arguments),this.isJs=!0}return __extends(b,a),b}(e);a.JsAnimation=g;var h=function(a){function b(){a.apply(this,arguments),this.$Window=_(fc),this.className=gd}return __extends(b,a),b.prototype.start=function(){var a=this,b=this.$Compat.animationEvents.$animation,c=this.element,d=this.className;X(c,d);var e=this.$Window.getComputedStyle(c),f=e[b+"Name"];return""===f||"none"===f||"paused"===e[b+"PlayState"]?(Y(c,d),void this.end()):void this.animationEnd(function(){Y(c,d),a.end()})},b.prototype.cancel=function(){Y(this.element,this.className),a.prototype.cancel.call(this)},b}(f);a.SimpleCssAnimation=h,be.animation(gd,h);var k=function(a){function b(){a.apply(this,arguments),this.className=kd}return __extends(b,a),b}(h);a.FadeIn=k,be.animation(kd,k);var l=function(a){function b(){a.apply(this,arguments),this.className=ld}return __extends(b,a),b}(h);a.FadeOut=l,be.animation(ld,l);var n=function(a){function b(){a.apply(this,arguments),this.className=id}return __extends(b,a),b}(h);a.Enter=n,be.animation(id,n);var o=function(a){function b(){a.apply(this,arguments),this.className=jd}return __extends(b,a),b}(h);a.Leave=o,be.animation(jd,o);var q=function(a){function b(){a.apply(this,arguments),this.$Window=_(fc),this.className=hd}return __extends(b,a),b.prototype.start=function(){var a=this,b=this.$Compat.animationEvents.$transition,c=this.element,d=this.className,e=function(){Y(c,d),a.end()};X(c,d);var f=this.$Window.getComputedStyle(c),g=f[b+"Property"],h=f[b+"Duration"];return""===g||"none"===g||""===h||"0s"===h?(this._animate(),void e()):(this.transitionEnd(e),void(this._animate()||e()))},b.prototype.cancel=function(){Y(this.element,this.className),a.prototype.cancel.call(this)},b.prototype._animate=function(){for(var a,b,c,d=this.element.style||{},e=this.options||{},f=Object.keys(e),g=f.length,h=0,i=0;g>i;++i)a=f[i],b=d[a],c=e[a],m(c)?(d[a]=c,b===d[a]&&h++):h++;return g>h},b}(f);a.SimpleCssTransition=q,be.animation(hd,q)}(a.animations||(a.animations={}));a.animations;!function(a){var c=function(a){function b(b){a.call(this),this.$ManagerCache=_(Qb),this.$Document=_(xb),this.$ElementManagerFactory=_(Mb),this.$Animator=_(Sb),this.$Promise=_(tb),this.navigator=b}return __extends(b,a),b.prototype.setTemplate=function(){this.dom.clearNode(this.element),this._load()},b.prototype.dispose=function(){this.navigator.dispose()},b.prototype.navigateTo=function(a){var b=a.target,c=a.parameter,d=a.options,e=this.element,f=a.type,g=ie.Injector.isInjector(b),h=g?b.inject():b,i=h.replaceWith,j=this.$Document.createElement(p(i)||"any"===i?"div":i),k={},l={element:j,attributes:k,nodes:[],uiControlNode:{control:h,nodeName:f,expressions:[],injector:b,childManagerLength:0}};j.setAttribute("plat-control",f),j.className=f,e.appendChild(j),this.$Animator.animate(this.element,id);var m=this.$ManagerCache.read(this.uid),n=this.$ElementManagerFactory.getInstance(),o=this.navigator;m.children=[],n.initialize(l,m,!g),b=this.controls[0],b.navigator=o,o.navigated(b,c,d),o.navigating||n.setUiControlTemplate()},b.prototype.navigateFrom=function(a){return t(a)||!s(a.navigatingFrom)?this.$Promise.resolve(null):(a.navigatingFrom(),this.$Animator.animate(this.element,jd))},b.prototype._load=function(a,b){var c=this.navigator;c.initialize(this),c.navigate(a,b)},b}(A);a.Baseport=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._load=function(){var b;if(t(this.options))return b=_(Db),void b.warn("No defaultView specified in plat-options for plat-viewport.",b.NAVIGATION);var c=this.options.value||{},d=c.defaultView,e=de[d];return t(e)?(b=_(Db),void b.fatal("The defaultView "+d+" is not a registered view control.",b.NAVIGATION)):void a.prototype._load.call(this,e)},b}(c);a.Viewport=d,be.control(dd,d,[Hb]);var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._load=function(){var b="",c=this.options;t(c)||t(c.value)||(b=c.value.defaultRoute||""),a.prototype._load.call(this,b,{replace:!0})},b}(c);a.Routeport=e,be.control(cd,e,[Ib]);var f=function(a){function b(){a.call(this),this.$Promise=_(tb),this.$TemplateCache=_(Rb),this.$Document=_(xb),this.replaceWith=null,this.__isFirst=!1;var b=_(Pb);this.__templateControlCache=b.create("__templateControlCache")}return __extends(b,a),b.prototype.initialize=function(){var a=this._id=this.options.value.id,b=this.options.value;if(!t(a)){this._url=b.templateUrl;var c=this.__templateControlCache.read(a);if(!t(c))return void(this.__templatePromise=c);this.__isFirst=!0,this._initializeTemplate()}},b.prototype.loaded=function(){this.__isFirst||this._waitForTemplateControl(this.__templatePromise)},b.prototype.dispose=function(){this.__isFirst&&this.__templateControlCache.dispose()},b.prototype._initializeTemplate=function(){var a=this,b=this._id;if(!t(b)){var c,d=this.endNode.parentNode,e=this._url;t(e)?(c=this.$Document.createDocumentFragment(),this.dom.appendChildren(this.elementNodes,c)):(c=this.$TemplateCache.read(e),this.dom.clearNodeBlock(this.elementNodes,d));var f;o(c)?f=c.catch(function(b){return t(b)?A.determineTemplate(a,e):void 0}).then(function(c){return a.bindableTemplates.add(b,c.cloneNode(!0)),a}):(this.bindableTemplates.add(b,c.cloneNode(!0)),f=this.$Promise.resolve(this)),this.__templateControlCache.put(b,f)}},b.prototype._waitForTemplateControl=function(a){var b,c=this;a.then(function(a){return t(c._url)||c._url===a._url||(b=_(Db),b.warn("The specified url: "+c._url+' does not match the original plat-template with id: "'+c._id+'". The original url will be loaded.',b.TEMPLATE)),c.__mapBindableTemplates(a),c.bindableTemplates.bind(c._id)}).then(function(a){var b=c.endNode;c.dom.insertBefore(b.parentNode,a,b)}).catch(function(a){D(function(){b=_(Db),b.warn("Problem resolving plat-template url: "+a.response,b.TEMPLATE)})})},b.prototype.__mapBindableTemplates=function(a){var b=this.bindableTemplates;b._cache=a.bindableTemplates._cache,b.templates=a.bindableTemplates.templates},b}(A);a.Template=f,be.control(bd,f);var g=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setTemplate=function(){this.innerTemplate=this.dom.appendChildren(this.element.childNodes)},b.prototype.loaded=function(){this.element.appendChild(this.innerTemplate.cloneNode(!0))},b}(A);a.Ignore=g,be.control(_c,g);var h=function(a){function b(){var b=this;a.call(this),this.$Animator=_(Sb),this.$Promise=_(tb),this.priority=120,this._blockLength=0,this.__currentAnimations=[],this.itemsLoaded=new this.$Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){var a=Array.prototype.slice.call(this.element.childNodes);this.bindableTemplates.add("item",a)},b.prototype.contextChanged=function(a,b){return t(this.__removeListener)&&this._setListener(),v(a)?0===a.length?void this._removeItems(this.controls.length):void this._executeEvent({method:"splice",arguments:null,returnValue:null,oldArray:b||[],newArray:a||[]}):void 0},b.prototype.loaded=function(){var a=this.context;v(a)&&(this._addItems(a.length,0),this._setListener())},b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.__resolveFn=null},b.prototype._addItem=function(a,b){if(j(a)&&v(this.context)&&0!==this.context.length&&0!==this.controls.length){var c,d,e=this.$Animator;if(b!==!0)return 0===this._blockLength&&(this._blockLength=a.childNodes.length),void this.dom.insertBefore(this.element,a);c=Array.prototype.slice.call(a.childNodes),0===this._blockLength&&(this._blockLength=c.length),this.dom.insertBefore(this.element,a);for(var f=this.__currentAnimations;c.length>0;)d=c.shift(),d.nodeType===Node.ELEMENT_NODE&&f.push(e.animate(d,id).then(function(){f.shift()}))}},b.prototype._removeItem=function(){var a=this.controls,b=a.length-1;A.dispose(a[b])},b.prototype._updateResources=function(){for(var a=this.controls,b=a.length,c=0;b>c;++c)a[c].resources.add(this._getAliases(c))},b.prototype._setListener=function(){this.__removeListener=this.observeArray(this,"context",this._executeEvent)},b.prototype._executeEvent=function(a){var b="_"+a.method;s(this[b])&&this[b](a)},b.prototype._addItems=function(a,b,c){for(var d=this,e=this.bindableTemplates,f=[],g=0;a>g;++g,++b)f.push(e.bind("item",b,this._getAliases(b)).then(function(a){d._addItem(a,c)}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.BIND)})}));return f.length>0?this.itemsLoaded=this.$Promise.all(f).then(function(){s(d.__resolveFn)&&(d.__resolveFn(),d.__resolveFn=null)}):(s(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null),this.itemsLoaded=new this.$Promise(function(a){d.__resolveFn=a})),this.itemsLoaded},b.prototype._removeItems=function(a){for(var b=0;a>b;++b)this._removeItem();this.controls.length>0&&this._updateResources()},b.prototype._getAliases=function(a){var b=0===(1&a);return{index:{value:a,type:"observable"},even:{value:b,type:"observable"},odd:{value:!b,type:"observable"},first:{value:0===a,type:"observable"},last:{value:a===this.context.length-1,type:"observable"}}},b.prototype._push=function(a){this._addItems(a.arguments.length,a.oldArray.length,!0)},b.prototype._pop=function(a){var b,c,d=this,e=this._blockLength;return e>0&&(b=e*a.newArray.length,c=this._animateItems(b,void 0,jd)),t(c)?void this._removeItems(1):void(this.itemsLoaded=c.then(function(){d._removeItems(1)}))},b.prototype._shift=function(){this._removeItems(1)},b.prototype._splice=function(a){var b=this.controls.length,c=a.newArray.length;c>b?this._addItems(c-b,b,0===b):b>c&&this._removeItems(b-c)},b.prototype._unshift=function(a){this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._sort=function(){},b.prototype._reverse=function(){},b.prototype._animateItems=function(a,b,c,d){var e=this,f=this.__currentAnimations,g=f.length;if(0===g||d===!1)return this.__handleAnimation(a,b,c);for(var h=[];g-->0;)h.push(f[g].cancel());return this.$Promise.all(h).then(function(){return e.__handleAnimation(a,b,c)})},b.prototype.__handleAnimation=function(a,b,c){for(var d,e,f=Array.prototype.slice.call(this.element.childNodes,a,b),g=this.$Animator,h=this.__currentAnimations;f.length>0;)d=f.shift(),d.nodeType===Node.ELEMENT_NODE&&(e=g.animate(d,c).then(function(){h.shift()}),h.push(e));return e},b}(A);a.ForEach=h,be.control(Yc,h);var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.contextChanged=function(){this.loaded()},b.prototype.loaded=function(){var a=this.context;m(a)&&this.dom.setInnerHtml(this.element,a)},b}(A);a.Html=i,be.control(Zc,i);var k=function(a){function b(){var b=this;a.call(this),this.$Promise=_(tb),this.$Document=_(xb),this.replaceWith="select",this.priority=120,this.groups={},this.__isGrouped=!1,this.__isNativeSelect=!1,this.itemsLoaded=new this.$Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){var a=this.$Document,b=this.options||{},c=b.value||{},d=a.createElement("option"),e=c.value,f=c.textContent;if(u(e)&&u(f))return void(this.__isNativeSelect=!0);if(!t(c.group)){var g=this.__group=c.group,h=a.createElement("optgroup");h.label=Fd+g+Gd,this.bindableTemplates.add("group",h)}(!m(e)||p(e))&&(e=void 0),(!m(f)||p(f))&&(f=void 0),d.value=Fd+(e||f)+Gd,d.textContent=Fd+(f||e)+Gd,this.bindableTemplates.add("option",d)},b.prototype.contextChanged=function(a,b){var c=this;if(!this.__isNativeSelect&&v(a)){var d=v(a)?a.length:0,e=v(b)?b.length:0;t(this.__removeListener)&&(this.__removeListener=this.observeArray(this,"context",function(a){s(c["_"+a.method])&&c["_"+a.method](a)})),d>e?this._addItems(d-e,e):e>d&&this._removeItems(e-d)}},b.prototype.loaded=function(){var a=this;if(!this.__isNativeSelect){var b=this.options||{},c=b.value||{};if(u(c.value)&&u(c.textContent))return void(this.__isNativeSelect=!0);var d=this.context,e=this.element,f=e.firstElementChild;j(f)&&"option"===f.nodeName.toLowerCase()&&(this.__defaultOption=f.cloneNode(!0)),this.__isGrouped=!t(this.__group=c.group),v(d)&&(this._addItems(d.length,0),this.__removeListener=this.observeArray(this,"context",function(b){s(a["_"+b.method])&&a["_"+b.method](b)}))}},b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.__resolveFn=null,this.__defaultOption=null},b.prototype._addItems=function(a,b){for(var c,d=this,e=b,f=this.bindableTemplates,g=[],h=0;a>h;++h,++e)c=this.context[e],g.push(f.bind("option",e).then(this._insertOptions.bind(this,e,c)));return g.length>0?this.itemsLoaded=this.$Promise.all(g).then(function(){s(d.__resolveFn)&&(d.__resolveFn(),d.__resolveFn=null)}):(s(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null),this.itemsLoaded=new this.$Promise(function(a){d.__resolveFn=a})),this.itemsLoaded},b.prototype._insertOptions=function(a,b,c){var d=this.element;if(this.__isGrouped){var e=this.groups,f=b[this.__group],g=e[f];return t(g)?e[f]=this.bindableTemplates.bind("group",a).then(function(a){return g=e[f]=a.childNodes[1],g.appendChild(c),d.appendChild(a),g}):o(g)?g.then(function(a){return a.appendChild(c),a}):(g.appendChild(c),this.$Promise.resolve(null))}return d.appendChild(c),this.$Promise.resolve(null)},b.prototype._removeItem=function(a){0>a||A.dispose(this.controls[a])},b.prototype._removeItems=function(a){for(var b=this.controls,c=b.length-1;a-->0;)this._removeItem(c--)},b.prototype._itemRemoved=function(a){return 0!==a.oldArray.length?this.__isGrouped?void this._resetSelect():void this._removeItems(1):void 0},b.prototype._resetSelect=function(){var a=this.context.length,b=this.element,c=b.childNodes.length;this._removeItems(c),this.groups={},t(this.__defaultOption)||b.appendChild(this.__defaultOption.cloneNode(!0)),this._addItems(a,0)},b.prototype._push=function(a){this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._pop=function(a){this._itemRemoved(a)},b.prototype._shift=function(a){this._itemRemoved(a)},b.prototype._splice=function(a){if(this.__isGrouped)return void this._resetSelect();var b=a.oldArray.length,c=a.newArray.length;c>b?this._addItems(c-b,b):b>c&&this._removeItems(b-c)},b.prototype._unshift=function(a){return this.__isGrouped?void this._resetSelect():void this._addItems(a.arguments.length,a.oldArray.length)},b.prototype._sort=function(){this.__isGrouped&&this._resetSelect()},b.prototype._reverse=function(){this.__isGrouped&&this._resetSelect()},b}(A);a.Select=k,be.control(ad,k);var l=function(a){function c(){a.call(this),this.$Animator=_(Sb),this.__condition=!0,this.__firstTime=!0;var b=_(xb);this.commentNode=b.createComment("plat-if"+Od+"placeholder"),this.fragmentStore=b.createDocumentFragment()}return __extends(c,a),c.prototype.contextChanged=function(){var a=this.options.value;p(a)||this._setter(a)},c.prototype.loaded=function(){if(t(this.options)){var a=_(Db);a.warn("No condition specified in plat-options for plat-if.",a.BIND),this.options={value:{condition:!0},observe:b}}this.contextChanged(),this.__firstTime=!1,this.__removeListener=this.options.observe(this._setter)},c.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.commentNode=null,this.fragmentStore=null},c.prototype._setter=function(a){var b=this,c=!!a.condition;c!==this.__condition&&(c?t(this.__leaveAnimation)?this._addItem():this.__leaveAnimation.cancel().then(function(){b.__leaveAnimation=null,b._addItem()}):t(this.__enterAnimation)?this._removeItem():this.__enterAnimation.cancel().then(function(){b.__enterAnimation=null,b._removeItem()}),this.__condition=c)},c.prototype._addItem=function(){var a=this,b=this.commentNode,c=b.parentNode;j(c)&&(c.replaceChild(this.fragmentStore,b),this.__enterAnimation=this.$Animator.animate(this.element,id).then(function(){a.__enterAnimation=null}))},c.prototype._removeItem=function(){var a=this,b=this.element;return this.__firstTime?(b.parentNode.insertBefore(this.commentNode,b),void P(this.fragmentStore,b)):void(this.__leaveAnimation=this.$Animator.animate(b,jd).then(function(){a.__leaveAnimation=null,b.parentNode.insertBefore(a.commentNode,b),P(a.fragmentStore,b)}))},c}(A);a.If=l,be.control($c,l);var n=function(a){function b(){a.apply(this,arguments),this.replaceWith="a"}return __extends(b,a),b.prototype.initialize=function(){var a=this.element;p(a.href)&&this.addEventListener(a,"click",function(b){p(a.href)&&b.preventDefault()},!1)},b}(A);be.control(Xc,n)}(a.controls||(a.controls={}));a.controls}(a.ui||(a.ui={}));var we=a.ui;!function(a){function c(){return new i}function d(a,b,c,d){return k._markupRegex=a.markupRegex,k._newLineRegex=a.newLineRegex,k.$ContextManagerStatic=b,k.$Parser=c,k.$TemplateControlFactory=d,k}function e(a,b,c,d){return l.$Document=a,l.$ManagerCache=b,l.$ResourcesFactory=c,l.$BindableTemplatesFactory=d,l}function f(){return n}function h(){return o}var i=function(){function a(){this.$ElementManagerFactory=_(Mb),this.$TextManagerFactory=_(Ob),this.$CommentManagerFactory=_(Lb),this.$ManagerCache=_(Qb)}return a.prototype.compile=function(a,b){var c,d,e,f=a.childNodes,g=!t(b),h=g?this.$ManagerCache.read(b.uid):null,i=this.$ElementManagerFactory.create;if(f=u(f)?s(a.push)?a:Array.prototype.slice.call(a):Array.prototype.slice.call(f),t(h)){c=f.length;for(var j=0;c>j;++j)e=f[j],e.nodeType===Node.ELEMENT_NODE&&(t(i(e))||this.compile(e)),d=f.length,j+=d-c,c=d}else this._compileNodes(f,h)},a.prototype._compileNodes=function(a,b){for(var c,d,e,f=a.length,g=this.$ElementManagerFactory.create,h=this.$CommentManagerFactory.create,i=this.$TextManagerFactory.create,j=0;f>j;++j){switch(c=a[j],c.nodeType){case Node.ELEMENT_NODE:d=g(c,b),t(d)||this._compileNodes(Array.prototype.slice.call(c.childNodes),d);break;case Node.TEXT_NODE:i(c,b);break;case Node.COMMENT_NODE:h(c,b)}e=a.length,j+=e-f,f=e}},a}();a.Compiler=i,a.ICompiler=c,be.injectable(Kb,c);var k=function(){function a(){this.isClone=!1}return a.findUniqueIdentifiers=function(a){var b,c,d,e,f=a.length,g={},h=[];if(1===f)return a[0].identifiers.slice(0);for(var i=0;f>i;++i)for(b=a[i].identifiers,e=b.length,d=0;e>d;++d)c=b[d],t(g[c])&&(g[c]=!0,h.push(c));return h},a.hasMarkup=function(b){return a._markupRegex.test(b)},a.findMarkup=function(b){var c,d,e,f,g=[],h=a._wrapExpression,i=a.$Parser;for(b=b.replace(a._newLineRegex,"");-1!==(c=b.indexOf(Fd))&&-1!==(d=b.indexOf(Gd));){for(0!==c&&g.push(h(b.slice(0,c)));"}"===b[++d];);e=b.slice(c+2,d-2),"="===e[0]?(e=e.slice(1).trim(),f=i.parse(e),f={expression:f.expression,evaluate:f.evaluate,identifiers:[],aliases:f.aliases,oneTime:!0},g.push(f)):g.push(i.parse(e.trim())),b=b.slice(d)}return c>-1&&d>=0?g.push(h(b.slice(d))):""!==b&&g.push(h(b)),g},a.build=function(b,c){for(var d,e,f="",h=b.length,i={},j=a.$TemplateControlFactory.evaluateExpression,k=0;h>k;++k){if(d=b[k],e=j(d,c,i),g(e))try{f+=JSON.stringify(e,null,4)}catch(l){t(l.description)||(l.description="Cannot stringify object: "+l.description),l.message="Cannot stringify object: "+l.message;var m=_(Db);m.warn(l,m.PARSE)}else t(e)||(f+=e);d.oneTime&&(b[k]=a._wrapExpression(e))}return f},a.observeIdentifiers=function(b,c,d){for(var e,f,g,h,i,j,k=b.length,l=a.$ContextManagerStatic,m=l.getManager(ue.getRootControl(c)),n=c.absoluteContextPath,o=c.context,p={listener:d,uid:c.uid},q={},r=0;k>r;++r){if(j=b[r],i="","@"===j[0]){if(g=j.split("."),h=g.shift().slice(1),g.length>0&&(i="."+g.join(".")),e=q[h],t(e)&&(e=q[h]=c.findResource(h)),t(e)||t(e.resource)||"observable"!==e.resource.type)continue;f=l.getManager(q[h].control),i="resources."+h+".value"+i}else g=j.split("."),t(l.getContext(o,g))?t(l.getContext(c,g))?(f=m,i=n+"."+j):f=null:(f=m,i=n+"."+j);t(f)||f.observe(i,p)}},a._wrapExpression=function(a){return{evaluate:function(){return a
},identifiers:[],aliases:[],expression:a}},a.prototype.initialize=function(a,b){this.nodeMap=a,this.parent=b,t(b)||(this.isClone=b.isClone,b.children.push(this))},a.prototype.getParentControl=function(){for(var a,b=this.parent;t(a)&&!t(b);)a=b.getUiControl(),b=b.parent;return a},a.prototype.clone=function(){return 1},a.prototype.bind=function(){},a}();a.NodeManager=k,a.INodeManagerStatic=d,be.injectable(Nb,d,[Fb,Jb,Eb,$b],Hd);var l=function(a){function b(){a.apply(this,arguments),this.$Promise=_(tb),this.$Compiler=_(Kb),this.$ContextManagerStatic=_(Jb),this.$CommentManagerFactory=_(Lb),this.$ControlFactory=_(vb),this.$TemplateControlFactory=_($b),this.children=[],this.type="element",this.replace=!1,this.hasOwnContext=!1}return __extends(b,a),b.create=function(a,c){var d,e=a.nodeName.toLowerCase(),f=e,g=ce[e]||de[e],h=!0,i=!1;if(t(g)&&(a.hasAttribute("plat-control")?(e=a.getAttribute("plat-control").toLowerCase(),g=ce[e]||de[e],h=!1):a.hasAttribute("data-plat-control")&&(e=a.getAttribute("data-plat-control").toLowerCase(),g=ce[e]||de[e],h=!1)),!t(g)){var j=g.inject(),k=b.locateResources(a);d={control:j,resourceElement:k,nodeName:e,expressions:[],injector:g},i=!0,h&&a.setAttribute("plat-control",e);var l=j.replaceWith,m="any"===l&&h;if(!p(l)&&("any"!==l||m)&&l.toLowerCase()!==f){m&&(l="div");var n=b.$Document.createElement(l);n.nodeType===Node.ELEMENT_NODE&&(a=R(a,n.cloneNode(!0)))}}var o=b._collectAttributes(a.attributes),q=new b;return o.element=a,o.uiControlNode=d,q.initialize(o,c),o.hasControl||i?(q.setUiControlTemplate(),i?null:q):(q.bind=function(){return[]},q)},b.locateResources=function(a){for(var b,c=Array.prototype.slice.call(a.childNodes);c.length>0;)if(b=c.shift(),"plat-resources"===b.nodeName.toLowerCase())return a.removeChild(b);return null},b.clone=function(a,c,d,e,f){t(f)&&(f=b._cloneNodeMap(a.nodeMap,d,c.getUiControl()||c.getParentControl(),e));var g=new b,h=!t(e);return g.nodeMap=f,g.parent=c,t(c)||c.children.push(g),g.replace=a.replace,g.replaceNodeLength=a.replaceNodeLength,g.hasOwnContext=a.hasOwnContext,g.isClone=!0,f.hasControl||h||(g.bind=function(){return[]}),h&&b.$ManagerCache.put(e.uid,g),g},b.cloneUiControl=function(a,c){var d=a.uiControlNode;if(!t(d)&&!t(d.injector)){var e=d.control,f=d.injector.inject(),g=b.$ResourcesFactory.getInstance(),h=_(Tb);return f.parent=c,c.controls.push(f),f.controls=[],h.initialize(f,a.attributes),f.attributes=h,g.initialize(f,e.resources),f.resources=g,b.$ResourcesFactory.addControlResources(f),t(e.innerTemplate)||(f.innerTemplate=e.innerTemplate.cloneNode(!0)),f.type=e.type,f.bindableTemplates=b.$BindableTemplatesFactory.create(f,e.bindableTemplates),f.replaceWith=e.replaceWith,f}},b.createAttributeControls=function(a,c,d,e,f){var g,h=a.nodes,i=f===!0?e:a.element;if(j(i)){if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return f===!0?b._copyAttributeNodes(h):[];g=i.attributes}var k,l,n,o,p,q,u=a.attributes,v=[],w=h.length;for(q=0;w>q;++q)l=h[q],p=l.nodeName,n=l.injector,o=null,t(n)||(o=n.inject(),l.control=o,o.parent=c,o.element=i,k=_(Tb),k.initialize(o,u),o.attributes=k,o.type=p,m(o.uid)||(o.uid=F("plat_")),o.templateControl=d),f===!0&&(v.push({control:o,expressions:l.expressions,identifiers:l.identifiers,node:g?g.getNamedItem(p)||g.getNamedItem("data-"+p):null,nodeName:p,injector:n}),t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize()));if(!f)for(h.sort(function(a,b){var c=a.control,d=b.control;if(t(c))return 1;if(t(d))return-1;var e=r(c.priority)?c.priority:0,f=r(d.priority)?d.priority:0;return f-e}),q=0;w>q;++q)l=h[q],o=l.control,t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize());return v},b.getInstance=function(){return new b},b._collectAttributes=function(a){for(var b,c,d,e,f,g,h,i,j,l=[],m=k.hasMarkup,n=k.findMarkup,o=k.findUniqueIdentifiers,p=k.$Parser,q=k.build,r=!1,s=a.length,u={},v=0;s>v;++v){if(b=a[v],d=b.value,c=b.name.replace(/^data-/i,"").toLowerCase(),i=ce[c]||de[c],h=[],j=[],"plat-context"===c){if(""!==d){if(e=p.parse(d),1!==e.identifiers.length){var w=_(Db);w.warn("Incorrect plat-context: "+d+", must contain a single identifier.",w.COMPILE)}f=e.identifiers[0]}}else"plat-control"!==c&&(g=m(d),g&&(h=n(d),j=o(h),0===j.length&&(b.value=d=q(h))),r||!g&&t(i)||(r=!0),l.push({control:null,node:b,nodeName:c,expressions:h,identifiers:j,injector:i}));u[G(c)]=d}return{element:null,attributes:u,nodes:l,childContext:f,hasControl:r}},b._copyAttributeNodes=function(a){for(var b,c=[],d=a.length,e=0;d>e;++e)b=a[e],c.push({identifiers:b.identifiers,expressions:b.expressions,nodeName:b.nodeName});return c},b._cloneNode=function(a,b,c){return{control:c,injector:a.injector,identifiers:a.identifiers,expressions:a.expressions,node:b,nodeName:a.nodeName}},b._cloneNodeMap=function(a,c,d,e){var f=a.hasControl,g={attributes:a.attributes,childContext:a.childContext,nodes:[],element:c,uiControlNode:t(a.uiControlNode)?null:b._cloneNode(a.uiControlNode,c,e),hasControl:f};return f&&(g.nodes=b.createAttributeControls(a,d,e,c,!0)),g},b.prototype.clone=function(a,c,d){var e,f,g,h,i=this.replace,j=this.children,k=t(d)?null:d.uiControlNode.control,l=!t(k);if(l||(k=b.cloneUiControl(this.nodeMap,c.getUiControl()||c.getParentControl()),l=!t(k)),i){var m=a.parentNode.childNodes,n=Array.prototype,o=n.indexOf.call(m,a);e=n.slice.call(m,o+1,o+this.replaceNodeLength),f=b.clone(this,c,null,k,d),k.elementNodes=e,k.startNode=a,k.endNode=e.pop(),g=j.shift(),h=j.shift(),g.clone(k.startNode,f),h.clone(k.endNode,f),s(k.initialize)&&k.initialize()}else e=Array.prototype.slice.call(a.childNodes),f=b.clone(this,c,a,k,d),d=f.nodeMap,l&&(k.element=a,s(k.initialize)&&k.initialize());f.hasOwnContext&&D(function(){f.observeRootContext(k,f.bindAndLoad)});for(var p=j.length,q=0,r=0;p>r;++r)q+=j[r].clone(e[q],f);return i?(j.unshift(h),j.unshift(g),q+2):1},b.prototype.initialize=function(c,d,e){a.prototype.initialize.call(this,c,d);var f,g=c.uiControlNode,h=!t(g);h&&(this._populateUiControl(),f=g.control,this.hasOwnContext=f.hasOwnContext),c.hasControl&&b.createAttributeControls(c,this.getParentControl(),f),!e&&h&&s(f.initialize)&&f.initialize()},b.prototype.bind=function(){var a=this.nodeMap,c=this.getParentControl(),d=a.uiControlNode,e=[];if(!t(d)){var f,h=d.control,i=a.childContext,j=this.$ContextManagerStatic.getManager,k=t(c)?"context":c.absoluteContextPath,l=this.$TemplateControlFactory,m=!h.hasOwnContext;if(e.push(h),m&&!t(i))if("@"===i[0]){var n,o=i.split("."),p=o.shift().slice(1),q=l.findResource(h,p);if(g(q)){var r=q.resource;g(r)&&"observable"===r.type?(k="resources."+p+".value"+(o.length>0?"."+o.join("."):""),h.root=q.control):(n=_(Db),n.warn('Only resources of type "observable" can be set as context.',n.CONTEXT))}else n=_(Db),n.warn("Could not set the context of "+h.type+' with the resource specified as "'+i+'".',n.CONTEXT)}else k+="."+i;if(h.root=this.$ControlFactory.getRootControl(h)||h,f=j(h.root),m?h.context=f.getContext(k.split(".")):k="context",h.zCC__plat=f.observe(k,{uid:h.uid,listener:function(a){h.context=a}}),l.setAbsoluteContextPath(h,k),l.setContextResources(h),b.$ResourcesFactory.bindResources(h.resources),!this.replace){var u=h.element;!t(u)&&s(u.removeAttribute)&&u.removeAttribute(ed)}}return this._observeControlIdentifiers(a.nodes,c,e),e},b.prototype.setUiControlTemplate=function(a){var b=this,c=this.nodeMap.uiControlNode;if(!t(c)){var d=c.control;return void(this.templatePromise=this.$TemplateControlFactory.determineTemplate(d,a).then(function(a){b.templatePromise=null,b._initializeControl(d,a.cloneNode(!0))},function(a){b.templatePromise=null,t(a)?b._initializeControl(d,a):D(function(){var b=_(Db);b.fatal(a,b.COMPILE)})}))}t(this.parent)&&this.bindAndLoad()},b.prototype.getUiControl=function(){var a=this.nodeMap.uiControlNode;if(!t(a))return a.control},b.prototype.fulfillTemplate=function(){var a=this;return t(this.templatePromise)?this._fulfillChildTemplates():this.templatePromise.then(function(){return a._fulfillChildTemplates()})},b.prototype.bindAndLoad=function(){for(var a,b=this,c=this.children,d=c.length,e=[],f=this.bind(),g=0;d>g;++g)a=c[g],a.hasOwnContext?e.push(a.loadedPromise):u(a.children)?a.bind():e.push(a.bindAndLoad());return this.$Promise.all(e).then(function(){b._loadControls(f,b.getUiControl())}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.BIND)})})},b.prototype.observeRootContext=function(a,b){var c=this;return t(a.context)?void(this.loadedPromise=new this.$Promise(function(d){var e=c.$ContextManagerStatic.getManager(a).observe("context",{listener:function(){e(),b.call(c).then(d)},uid:a.uid})}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.BIND)})})):void(this.loadedPromise=b.call(this))},b.prototype._observeControlIdentifiers=function(a,b,c){for(var d,e,f=a.length,g=[],h=this._attributeChanged,i=!t(b),j=0;f>j;++j)d=a[j],e=d.control,i&&d.identifiers.length>0&&(k.observeIdentifiers(d.identifiers,b,h.bind(this,d,b,c)),g.push(d)),t(e)||c.push(e);for(f=g.length,j=0;f>j;++j)this._attributeChanged(g[j],b,c)},b.prototype._loadControls=function(a,b){var c,d,e,f=a.length,g=this.$ControlFactory.load,h=t(b);if(h)e=0;else{var i=b.priority;d=r(i)?i:100,e=1}for(;f>e;++e)c=a[e],c.templateControl=b,!h&&d>c.priority&&(h=!0,g(b)),g(c);h||g(b)},b.prototype._fulfillAndLoad=function(){var a=this;return this.fulfillTemplate().then(function(){return a.bindAndLoad()}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.BIND)})})},b.prototype._populateUiControl=function(){var a=this.nodeMap,c=this.getParentControl(),d=a.uiControlNode,e=d.control,f=e.uid,h=e.resources,i=a.element,j=Array.prototype.slice.call(i.childNodes),k=_(Tb),l=this.replace=null===e.replaceWith||""===e.replaceWith;m(f)||(f=e.uid=F("plat_")),b.$ManagerCache.put(f,this),t(c)||e.parent===c||(c.controls.push(e),e.parent=c),s(i.setAttribute)&&i.setAttribute(ed,""),e.element=i,e.controls=[],k.initialize(e,a.attributes),e.attributes=k,g(h)&&s(h.add)?h.add(d.resourceElement):(h=b.$ResourcesFactory.getInstance(),h.initialize(e,d.resourceElement),e.resources=h),b.$ResourcesFactory.addControlResources(e),e.type=d.nodeName,e.bindableTemplates=e.bindableTemplates||b.$BindableTemplatesFactory.create(e),!(j.length>0)||p(e.templateString)&&p(e.templateUrl)||(e.innerTemplate=J(j)),l&&this._replaceElement(e,a)},b.prototype._replaceElement=function(a,c){var d=c.element,e=d.parentNode,f=b.$Document,g=a.type,h=a.uid,i=a.startNode=f.createComment(g+" "+h+Pd),j=a.endNode=f.createComment(g+" "+h+Qd),k=this.$CommentManagerFactory.create;k(i,this),k(j,this),e.insertBefore(i,d),e.insertBefore(j,d.nextSibling),a.elementNodes=Q(d),a.element=c.element=null},b.prototype._initializeControl=function(a,c){var d,e=this.nodeMap.element,f=this.replace;if(!t(c)){var g=b.locateResources(c);t(g)||a.resources.add(b.$ResourcesFactory.parseElement(g)),f?(d=a.endNode,a.elementNodes=Array.prototype.slice.call(c.childNodes),P(d.parentNode,c,d)):P(e,c,e.lastChild)}if(s(a.setTemplate)&&a.setTemplate(),f){this.$Compiler.compile(a.elementNodes,a);var h=a.startNode,i=h.parentNode,j=Array.prototype.slice.call(i.childNodes);d=a.endNode,a.elementNodes=j.slice(j.indexOf(h)+1,j.indexOf(d)),this.replaceNodeLength=a.elementNodes.length+2}else this.$Compiler.compile(e,a);a.hasOwnContext&&!this.isClone?this.observeRootContext(a,this._fulfillAndLoad):t(a.parent)&&this._fulfillAndLoad()},b.prototype._attributeChanged=function(a,b,c){for(var d,e,f=c.length,g=G(a.nodeName),h=k.build(a.expressions,b),i=0;f>i;++i)d=c[i].attributes,e=d[g],d[g]=h,d._attributeChanged(g,h,e);this.replace||(a.node.value=h)},b.prototype._fulfillChildTemplates=function(){for(var a,b=this.children,c=b.length,d=[],e=0;c>e;++e)a=b[e],u(a.children)||d.push(a.fulfillTemplate());return this.$Promise.all(d).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.COMPILE)})})},b}(k);a.ElementManager=l,a.IElementManagerFactory=e,be.injectable(Mb,e,[xb,Qb,Zb,Ub],Kd);var n=function(a){function c(){a.apply(this,arguments),this.type="text"}return __extends(c,a),c.create=function(a,d){var e=a.nodeValue,f=new c;if(k.hasMarkup(e)){var g=k.findMarkup(e),h={nodes:[{node:a,expressions:g,identifiers:k.findUniqueIdentifiers(g)}]};return f.initialize(h,d),f}return f.initialize(null,d),f.bind=b,f},c._cloneNodeMap=function(a,b){var c=a.nodes[0],d={nodes:[{identifiers:c.identifiers,expressions:c.expressions,nodeName:c.nodeName,node:b}]};return d},c._clone=function(a,d,e){var f=a.nodeMap,g=new c;return t(f)?(g.initialize(null,e),g.bind=b):g.initialize(c._cloneNodeMap(f,d),e),g},c.prototype.clone=function(a,b){return c._clone(this,a,b),1},c.prototype.bind=function(){var a=this.getParentControl(),b=this.nodeMap.nodes[0],c=b.node,d=b.expressions;k.observeIdentifiers(b.identifiers,a,this._setText.bind(this,c,a,d)),this._setText(c,a,d)},c.prototype._setText=function(a,b,c){b=b||{},a.nodeValue=k.build(c,b)},c}(k);a.TextManager=n,a.ITextManagerFactory=f,be.injectable(Ob,f,null,Kd);var o=function(a){function b(){a.apply(this,arguments),this.type="comment"}return __extends(b,a),b.create=function(a,c){var d=new b;return d.initialize({nodes:[{node:a}]},c),d},b.prototype.clone=function(a,c){return b.create(a,c),1},b}(k);a.CommentManager=o,a.ICommentManagerFactory=h,be.injectable(Lb,h,null,Kd)}(a.processing||(a.processing={}));a.processing;!function(a){function b(){return new f}function c(){return new h}var d=function(){function a(){this.$EventManagerStatic=_(Ab),this.$NavigationEventStatic=_(Cb),this.$BaseViewControlFactory=_(_b),this.$ContextManagerStatic=_(Jb);var a=F("plat_");this.$ContextManagerStatic.defineGetter(this,"uid",a),this.$EventManagerStatic.on(a,"goBack",this.goBack,this)}return a.prototype.initialize=function(a){this.baseport=a},a.prototype.navigate=function(){this.navigating=!0},a.prototype.navigated=function(a,b,c){this.currentState={control:a},this.navigating=!1,a.navigator=this,a.navigatedTo(b),this._sendEvent("navigated",a,a.type,b,c,!1)},a.prototype.goBack=function(){},a.prototype.dispose=function(){},a.prototype._sendEvent=function(a,b,c,d,e,f){return this.$NavigationEventStatic.dispatch(a,this,{target:b,type:c,parameter:d,options:e,cancelable:f})},a}();a.BaseNavigator=d;var f=function(a){function b(){a.apply(this,arguments),this.history=[]}return __extends(b,a),b.prototype.navigate=function(a,b){var c=this;b=b||{};var d,f,h,i=this.currentState||{},j=i.control,k=b.parameter,l=this.baseport,m=this.$BaseViewControlFactory;if(h=this._sendEvent("beforeNavigate",a,null,k,b,!0),!h.cancelled){if(this.navigating=!0,m.detach(j),g(k)&&(k=e(k,!0)),l.controls=[],s(a.inject))d=a,f=a.name;else for(var n,o=Object.keys(de);o.length>0;)if(f=o.pop(),n=de[f],n.Constructor===a){d=n;break}if(t(d)){var p=_(Db);p.fatal("Attempting to navigate to unregistered view control.",p.NAVIGATION)}return h.target=d,h.type=f,t(j)?void D(function(){l.navigateTo(h)}):void l.navigateFrom(j).then(function(){m.detach(j),b.replace||c.history.push({control:j}),l.navigateTo(h)}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.NAVIGATION)})})}},b.prototype.goBack=function(a){var b=this;a=a||{};var c=this.currentState||{},d=c.control,e=r(a.length)?a.length:1,f=a.ViewControl,g=a.parameter,h=this.history,i=this.baseport;if(0===h.length){var j=this.$EventManagerStatic;j.dispatch("shutdown",this,j.DIRECT)}if(!t(d)){var k=this._sendEvent("beforeNavigate",d,d.type,g,a,!0);if(!k.cancelled){var l;if(!t(f)){var m=this._findInHistory(f);if(!(m>-1))return l=_(Db),void l.warn("Cannot find ViewControl in navigation history.",l.NAVIGATION);e=h.length-m}return!r(e)||e>h.length?(l=_(Db),void l.warn("Not enough views in the navigation history in order to navigate back.",l.NAVIGATION)):void i.navigateFrom(d).then(function(){b.$BaseViewControlFactory.dispose(d);var a=b._goBackLength(e);t(a)||(d=a.control,b.currentState=a,k.target=d,k.type=d.type,i.navigateTo(k))}).catch(function(a){D(function(){l=_(Db),l.fatal(a,l.NAVIGATION)})})}}},b.prototype.canGoBack=function(){return this.history.length>0},b.prototype.clearHistory=function(){for(var a=this.history,b=this.$BaseViewControlFactory.dispose;a.length>0;)b(a.pop().control)},b.prototype._findInHistory=function(a){for(var b=this.history,c=-1,d=b.length-1;d>=0;--d)if(b[d].control.constructor===a){c=d;break}return c},b.prototype._goBackLength=function(a){a=r(a)?a:1;for(var b,c=this.$BaseViewControlFactory.dispose,d=this.history;a-->0;)t(b)||t(b.control)||c(b.control),b=d.pop();return b},b}(d);a.Navigator=f,a.INavigatorInstance=b,be.injectable(Hb,b,null,Jd);var h=function(a){function b(){a.apply(this,arguments),this.$Router=_(dc),this.$Window=_(fc),this.__removeListeners=[],this.__historyLength=0}return __extends(b,a),b.prototype.initialize=function(b){a.prototype.initialize.call(this,b);var c=this.__removeListeners,d=this.$EventManagerStatic,e=this.uid;c.push(d.on(e,"routeChanged",this._onRouteChanged,this)),c.push(d.on(e,"beforeRouteChange",this._beforeRouteChange,this))},b.prototype.navigate=function(a,b){this.navigating=!0,this.$Router.route(a,b)||(this.navigating=!1)},b.prototype.navigated=function(b,c,d){a.prototype.navigated.call(this,b,c,d),this.currentState.route=c},b.prototype.goBack=function(a){a=a||{},this.__historyLength-=2,this.__historyLength<0&&this.$EventManagerStatic.dispatch("shutdown",this,this.$EventManagerStatic.DIRECT),this.$Router.goBack(r(a.length)?a.length:1)},b.prototype.dispose=function(){for(var a=this.__removeListeners;a.length>0;)a.pop()()},b.prototype._beforeRouteChange=function(a){var b=this._sendEvent("beforeNavigate",a.target,a.type,a.parameter,a.options,!0);b.cancelled&&a.cancel()},b.prototype._onRouteChanged=function(a){var b=this,c=this.currentState||{},d=c.control,e=a.target,f=this.baseport;t(e)||(this.__historyLength++,f.navigateFrom(d).then(function(){b.$BaseViewControlFactory.dispose(d),f.navigateTo(a)}).catch(function(a){D(function(){var b=_(Db);b.fatal(a,b.NAVIGATION)})}))},b}(d);a.RoutingNavigator=h,a.IRoutingNavigator=c,be.injectable(Ib,c)}(a.navigation||(a.navigation={}));var xe=(a.navigation,function(){function a(){var a=_(Jb);a.defineGetter(this,"uid",F("plat_"))}return a.start=function(){if(!a.$Compat.isCompatible){var b=_(Db);return void b.fatal("PlatypusTS only supports modern browsers where Object.defineProperty is defined",b.COMPAT)}a.__addPlatCss();var c=a.$EventManagerStatic;c.dispose("__app__"),c.on("__app__","ready",a.__ready),c.on("__app__","shutdown",a.__shutdown),c.initialize()},a.registerApp=function(b){if(!t(a.app)&&m(a.app.uid)&&a.$EventManagerStatic.dispose(a.app.uid),a.app=b,a.$Compat.amd){var c=a.$LifecycleEventStatic,d=c.dispatch;D(function(){d("ready",c)})}},a.load=function(b){var c=a.$LifecycleEventStatic,d=a.$Compiler,e=a.$Document.body,f=a.$Document.head;return c.dispatch("beforeLoad",a),t(b)?(d.compile(f),e.setAttribute(ed,""),d.compile(e),void e.removeAttribute(ed)):void(s(b.setAttribute)?(b.setAttribute(ed,""),d.compile(b),b.removeAttribute(ed)):d.compile(b))},a.__ready=function(b){ie.Injector.initialize(),t(a.app)||a.__registerAppEvents(b),a.$Compat.amd||a.load()},a.__shutdown=function(){var a=navigator.app;!t(a)&&s(a.exitApp)&&a.exitApp()},a.__registerAppEvents=function(b){var c=a.app;s(c.inject)&&(a.app=c=c.inject()),c.on("suspend",c.suspend),c.on("resume",c.resume),c.on("online",c.online),c.on("offline",c.offline),c.on("error",c.error),s(c.ready)&&c.ready(b)},a.__addPlatCss=function(){var b=a.$Document;if(!a.$Compat.platCss){if(!t(b.styleSheets)&&b.styleSheets.length>0)return void b.styleSheets[0].insertRule("[plat-hide] { display: none !important; }",0);var c=document.createElement("style");c.textContent="[plat-hide] { display: none !important; }",document.head.appendChild(c)}},a.prototype.suspend=function(){},a.prototype.resume=function(){},a.prototype.error=function(){},a.prototype.ready=function(){},a.prototype.online=function(){},a.prototype.offline=function(){},a.prototype.dispatchEvent=function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];a.$EventManagerStatic.dispatch(b,this,a.$EventManagerStatic.DIRECT,c)},a.prototype.on=function(b,c){return a.$EventManagerStatic.on(this.uid,b,c,this)},a.prototype.load=function(b){a.load(b)},a.app=null,a}());a.App=xe,a.IAppStatic=mb,be.injectable(pb,mb,[ub,Ab,xb,Kb,Bb],Hd),a.IApp=nb,be.injectable(qb,nb,[pb],Jd)}(plat||(plat={}));
//# sourceMappingURL=platypus.min.js.map